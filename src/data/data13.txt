Headings:
Identity Resolution ExternalIDs
Default externalIDs
Custom externalIDs
Viewing promoted externalIDs
Example
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/identity-resolution/identity-resolution-settings/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
The steps in this guide pertain to spaces created before September 27th, 2020. For spaces created after September 27th, 2020, please refer to theIdentity Resolution Onboardingdocs.
Before you connect a source to Unify, Segment recommends that you first review the default Identity settings and configure custom rules as needed. Segment applies configuration updates to allnewdata flowing through the space after you save your changes. As a result, if this is your first time setting up your Identity Graph, Segment recommends that you get started with aDevspace in theSpace Setupdocs.
Workspace owners and users with the Identity Admin role can edit the Identity Resolution table.
Changing Identity Resolution rules
Making a space’s Identity Resolution rules less restrictive by changing thelimitshouldn’t cause any issues to existing or future profiles.However, making a space’s rules more restrictive might have an impact existing profiles that don’t adhere to the new rules (for example, decreasing an identifier’s limit or changing thepriorityof identifiers).Segment recommends to get started with a Dev space in theSpace Setupdocs, test the rules with the expected data, and then create an identical Production space with those rules. Document any changes to a space’s Identity Resolution rules, and don’t update rules to be more restrictive after profiles already exist outside the bounds of those new rules.
Segment creates and merges user profiles based on externalIDs used as identifiers. You can view these externalIDs in the Identities tab of a User Profile in the Profile explorer.

By default, Segment promotes the following traits and IDs in track and identify calls to externalIDs:
You’ll notice that these identifiers have theDefaultlabel next to it underIdentifier Type.
To create your own custom externalID, clickAdd Identifier, and add the following:
These custom identifiers must be sent in the customexternalIdsfield in thecontextobject of any call to the Segment API. The four fields below are all required:
The following example payload adds a customphoneexternalID type:
Segment recommends that you add custom externalIDs to the Identity Resolution tablebeforeevents containing this identifier flow through the space. Once an event with a new type of externalID flows into the space, the externalID is automatically added to the table if it wasn’t manually added. When the externalID is automatically added, it defaults to the preset priority and limit, as explained below.
When a new event flows into Unify, Segment looks for profiles that match any of the identifiers on the event.
Based on the existence of a match, one of three actions can occur:
1: Create a new profileWhen there are no pre-existing profiles that have matching identifiers to the event, Segment creates a new user profile.
2: Add to existing profileWhen there is one profile that matches all identifiers in an event, Segment attempts to map the traits, identifiers, and events on the call to that existing profile. If there’s an excess of any identifier on the final profile, Segment defers to the Identity Resolution rules outlined below.
3: Merge existing profilesWhen there are multiple profiles that match the identifiers in an event, Segment checks the Identity Resolution rules outlined below, and attempts to merge profiles.
One common example of a use-case that can cause inaccurate merges is the Shared iPad setup. For example, many companies now have iPads available in-store for customers to register for an account or submit order information. If different users submit information on the same device, there will now be multiple events sent with the same deviceID. Without Identity Resolution rules in place, Segment might see all these different users merged into the same user profile based on this common identifier.
Segment’s three Identity Resolution rules allow Identity Admins to block incorrect values from causing incorrect merges, to set the maximum number of values allowed per externalID, and to customize the priority of these externalIDs.
The following rules exist to increase the likelihood that identities are resolved correctly.
Segment recommends that you proactively block certain values from being used as identifiers. While these values will remain in the payload on the event itself, they are not promoted to the externalID object Segment uses to determine user profiles.
This is important when developers have a hard-coded value for fields like user_id during QA or development that then erroneously makes it production. This can cause hundreds of profiles to merge incorrectly and can have costly consequences when these spaces are already feeding data into a production email marketing tool or push notification tool downstream.
In the past, certain default values cause large amounts of profiles to merge incorrectly. Segment suggests that for every externalID, customers opt into automatically blocking the following suggested values:

Before sending data through, Segment also recommends adding any default hard-coded values that your team uses during the development process, such asvoidorabc123.
Identity Admins can specify the total number of values allowed per identifier type on a profile during a certain period. For example, in the image below, theanonymous_idfield has a limit of5 Weekly.
This will vary depending on how companies define a user today. In most cases, companies rely onuser_idto distinguish user profiles and Segment defaults to the following configurations:
Specific cases may deviate from this default. For example, a case where a user can have more than oneuser_idbut one email, like whenshopify_idand an internal UUID define a user. In this case, an example configuration may be:
When you choose the limit on an identifier, ask the following questions about each of the identifiers you send to Segment:
Segment considers the priority of an identifier once that identifier exceeds the limit on the final profile.
For example, consider a Unify space with the following Identity Resolution configurations:
A profile already exists withuser_idabc123andemailjane@example1.com. A new event comes in with newuser_idabc456but the sameemailjane@example1.com.
If this event maps to this profile, the resulting profile would then contain twouser_idvalues and oneemail. Given thatuser_idhas a limit of 1, this exceeds the limit of that identifier. As a result, Segment checks the priority of theuser_ididentifier. Becauseemailanduser_idare the two identifiers on the event andemailranks lower thanuser_id, Segment demotesemailas an identifier on the incoming event and tries again.
At this point, the event searches for any profiles that match just the identifier user_idabc456. Now there are no existing profiles with this identifier, so Segment creates a new profile with user_idabc456.
By default, Segment explicitly orders user_id and email as rank1and2, respectively. All other identifiers are in alphabetical order beginning from rank3. This means that if the identifiers sent with events flowing into profiles are user_id, email, anonymous_id, and ga_client_id, the rank would be as follows:
If a new android.id identifier appeared without first giving it explicit order, the order would automatically reshuffle to:
If you require an explicit order for all identifiers, configure this in the Identity Resolution settings page before sending in events.

When choosing the priority of your identifier, ask the following questions about each of the identifiers you send to Segment:
This page was last modified: 07 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Identity Resolution Settings
Configure Identity Graph rules
ExternalIDs
Flat matching logic
Identity Resolution rules
Blocked values
Limit
Priority
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/identity-resolution/ecommerce-example/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Identity Resolution helps to create a unified view of the user across devices, apps, and unique identifiers.
Take the example of a sneaker company called SegmentKicks which has an eCommerce app called SegKicks as well as a running app called SegRuns. This example follows Jane Doe through her customer journey from an anonymous user to a registered buyer on one app, SegKicks, to her use of the same app on a different device, and finally to her use of a different app belonging to the same company, SegRuns.
Identity Resolution can connect a user’s anonymous behaviors to a user’s post-account registration activity.
Take this example using the eCommerce app, SegKicks:
By linking the original anonymous events to Jane’s logged-in activity, the app’s marketing team can now begin to map out her customer journey on a single app, understand her preferences, and re-target her with highly personalized emails about the shoes she didn’t complete purchasing.
Her identifiers will now contain the original anonymous_id, her email, and her user_id:
Users can have multiple touch points with an app ecosystem through more than one device. For example, users might interact with an eCommerce app through both a native app, a mobile browser, and a web browser.
Continuing with the example of Jane Doe, she now views the same mobile app SegKicks on her Android phone.
Jane logs into the Android phone with the same emailjanedoe@example.com.
Her new User Profile identities will now contains anandroid.id:
A company’s product ecosystem may also spread out across multiple apps. For example, SegmentKicks also has a running app SegRuns.
When Jane downloads the Android app SegRuns and views a workout:
Her final identifiers now have a newanonymous_idfrom the SegRuns app:
By combining the events throughout Jane’s entire customer journey from anonymous to known user, cross-device, and cross-app identification, SegKicks and SegRuns can now work together to understand how to give Jane the best customer experience possible while increasing her LTV across the entire SegmentKicks ecosystem.
For example, if Jane looked at ShoeC on her iPhone and completed checkout for ShoeC on her Android, SegKicks will now know to exclude her from a cart abandonment email for ShoeC. This wouldn’t be possible if SegKicks had only looked at her activity on the iPhone.
Additionally, most shoes need to be replaced every 300 to 400 miles. By understanding her activity on SegRuns, SegKicks will now be able to more effectively remind Jane to repurchase ShoeC or ShoeD once she’s reached that mileage.
This page was last modified: 28 Mar 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Identity Resolution eCommerce Example
Anonymous to known identification
Cross-device identification
Cross-app identification
Conclusion
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profiles-sync/overview/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Profiles Sync connects identity-resolved customer profiles to a data warehouse of your choice.
With a continual flow of synced profiles, teams can enrich and use these data sets as the basis for new audiences and models. Profiles Sync addresses a number of use cases, with applications for identity graph monitoring, attribution analysis, machine learning, and more. ViewProfiles Sync Sample Queriesfor an in-depth guide to Profiles Sync applications.
To help you get started, here are a few example use cases:
Use Profiles Sync for more insight into profiles generated by Segment’sIdentity Resolution. Query the Profile Sync data set to answer questions such as:
Understanding how Segment creates profiles helps you detect potential instrumentation errors.
Join Segment’s profile data with existing object data from your warehouse to create a single view of the customer. You can then use this data set to create personalized  experiences on any channel. For example, B2B companies can build a report that maps sales executives (object data synced with a source like Salesforce) with customers who are most likely to buy a certain product (Profile Traits data synced with Profiles Sync).
With Profiles Sync, your data teams can better understand profile merge events. Connect anonymous IDs, User IDs, and emails to understand your customer’s journey with details such as:
Use Profiles Sync to build data models that marketing partners can trust. Trace prospective customer journeys before buying products, and build models that help you understand which channels provide the most value.
Access profile traits and see how they change over time. This will help you to better understand how your customer’s behavior evolves, and build models that predict LTV, churn, and propensity scores.
To learn more about Profiles Sync, visit the following docs:
For more on Profiles Sync logic, table mappings, and data types, download thisProfiles Sync ERD.
This page was last modified: 31 Oct 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Profiles Sync Overview
Profiles Sync use cases
Understand how Segment creates Profiles
Create golden profiles
Understand a customer’s journey
Build attribution models
Use machine learning
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profiles-sync/profiles-sync-setup/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
On this page, you’ll learn how to set up Profiles Sync, enable historical backfill, and adjust settings for warehouses that you’ve connected to Profiles Sync.
Identity Resolution setup
To use Profiles Sync, you must first set upIdentity Resolution.
To set up Profiles Sync, first create a warehouse, then connect the warehouse within the Segment app.
Before you begin, prepare for setup with these tips:
You’ll first choose the destination warehouse to which Segment will sync profiles. Profiles Sync supports the Snowflake, Redshift, BigQuery, Azure, Postgres, and Databricks warehouse Destinations. Your initial setup will depend on the warehouse you choose.
The following table shows the supported Profiles Sync warehouse destinations and the corresponding required steps for each. Select a warehouse, view its Segment documentation, then carry out the warehouse’s required steps before moving to step 2 of Profiles Sync setup:
After you’ve finished the required steps for your chosen warehouse, you’re ready to connect your warehouse to Segment. Because you’ll next enter credentials from the warehouse you just created,leave the warehouse tab open to streamline setup.
To allow Segment to write to the warehouse you’re using for Profiles Sync, you’ll need to set up specific permissions.
For example, if you’re using BigQuery, you mustcreate a service accountfor Segment and assign the following roles:
Review the required steps for each warehouse in the table above to see which permissions you’ll need.
The following Segment accessrolesapply to Profiles Sync:
Unify and Engage read-only: Read-only access to Profiles Sync, including the sync history and configuration settings. With these roles assigned, you can’t download PII or edit Profiles Sync settings.
Unify read-only and Engage user: Read-only access to Profiles Sync, including the sync history and configuration settings. With these roles assigned, you can’t download PII or edit Profiles Sync settings.
Unify and Engage Admin access: Full edit access to Profiles Sync, including the sync history and configuration settings.
After selecting your warehouse, you can connect it to Segment.
During this step, you’ll copy credentials from the warehouse you just set up and enter them into the Segment app. The specific credentials you’ll enter depend on the warehouse you chose during step 1.
Segment may also display IP addresses you’ll need to allowlist in your warehouse. Make sure to copy the IP addresses and enter them into your warehouse account.
To connect your warehouse:
Set up Selective Sync to control the exact tables and columns that Segment will sync to your connected data warehouse.
Data will be backfilled to your warehouse based on the last two months of history.
You can sync the following tables:
Use Selective Sync to manage the data you send to your warehouses by choosing which tables and columns (also known as properties) to sync. Syncing fewer tables and properties will lead to faster and more frequent syncs, faster queries, and using less disk space.
You can access Selective Sync in two ways:
You’ll see a list of event type tables, event tables, andtables Segment materializesavailable to sync. Select the tables and properties that you’d like to sync, and be sure the ones you’d like to prevent from syncing aren’t selected.
Regardless of schema size, only the first 5,000 collections and 5,000 properties per collection can be managed using your Segment space. To edit Selective Sync settings for any collection which exceeds this limit,contact Segment support.
You must be a workspace owner to change Selective Sync settings.
Use Selective Sync when you want to prevent specific tables and properties from syncing to your warehouse. Segment stops syncing from disabled tables or properties, but will not delete any historical data from your warehouse.
If you choose to re-enable a table or property to sync again, only new data generated will sync to your warehouse. Segment doesn’t backfill data that was omitted with Selective Sync.
Profiles Sync sends profiles to your warehouse hourly once setup completes. Setup is complete after an initial automated backfill syncs all profile data. To initiate the backfill, the Profiles Sync requires live data flowing into your workspace. If live data isn’t available, you can send test data to trigger the backfill sooner. Backfill can also sync historical profiles to your warehouse.
You can only use historical backfill for tables that you enable withSelective Syncduring setup. Segment does not backfill tables that you disable with Selective Sync.
When Segment runs historical backfills:
Segment lands the data on an internal staging location, then removes the backfill banner. Segment then syncs the backfill data to your warehouse.
Reach out toSegment supportif your use case exceeds the scope of the initial setup backfill.
While historical backfill is running, you can start buildingmaterialized viewsand runningsample queries.
During setup, you have the option of setting up materialized key views in one of two ways:
You can choose to materialize views on your own by usingprofiles raw tables. 
You may want to materialize your own tables if, for example, you want to transform additional data or join Segment profile data with external data before materialization.
You can choose to use Segment’s open source dbt models by usingprofiles materializedtables.
You can alternatively usetables that Segment materializesand syncs to your data warehouse.
To start seeing unified profiles in your warehouse and build attribution models, you’ll need to materialize the tables that Profiles Sync lands into three key views:
SeeTables you materializefor more on how to materialize these views either on your own, or withSegment’s open source dbt models.
Note that dbt models are in beta and need modifications to run efficiently on BigQuery, Synapse, and Postgres warehouses. Segment is actively working on this feature.
As you use Profiles Sync, keep the following limits in mind:
You can view warehouse sync information in the overview section of the Profiles Sync page. Segment displays the dates and times of the last and next syncs, as well as your sync frequency.
In the Syncs table, you’ll find reports on individual syncs. Segment lists your most recent syncs first. The following table shows the information Segment tracks for each sync:
Selecting a row from the Syncs table opens a pane that contains granular sync information. In this view, you’ll see the sync’s status, duration, and start time. Segment also displays a nuanced breakdown of the total rows synced, sorting them into identity graph tables, event type tables, and event tables.
If the sync failed, Segment shows any available error messages in the sync report.
TheSettingstab of the Profiles Sync page contains tools that can help you monitor and maintain your synced warehouse.
In theBasic settingstab, you can disable warehouse syncs or delete your connected warehouse altogether.
To disable syncs, toggleSync statusto off. Segment retains your warehouse credentials but stops further syncs. Toggle Sync status back on at any point to continue syncs.
To delete your warehouse, toggleSync statusto off, then selectDelete warehouse. Segment doesn’t retain credentials for deleted warehouses; to reconnect a deleted warehouse, you must set it up as a new warehouse.
In theConnection settingstab, you can verify your synced warehouse’s credentials and view IP addresses you’ll need to allowlist so that Segment can successfully sync profiles.
If you have write access, you can verify that your warehouse is successfully connected to Segment by entering your password and then selectingTest Connection.
Changing your synced warehouse
If you’d like to change the warehouse connected to Profiles Sync,reach out to Segment support.
Segment supports hourly syncs.
This page was last modified: 07 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Set up Profiles Sync
Initially Setting up Profiles Sync
Step 1: Select a warehouse
Profiles Sync permissions
Profiles Sync roles
Step 2: Connect the warehouse and enable Profiles Sync
Step 3: Set up Selective Sync
Using Selective Sync
When to use Selective Sync
Using historical backfill
Step 4 (Optional): Materialize key views using a SQL automation tool
Profiles Sync limits
Working with synced warehouses
Monitor Profiles Sync
Settings and maintenance
Disable or delete a warehouse
Connection settings
Sync schedule
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profiles-sync/profiles-sync-setup/databricks-profiles-sync/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
With Databricks for Profiles Sync, you can useProfiles Syncto sync Segment profiles into your Databricks Lakehouse.
Before getting started with Databricks Profiles Sync, note the following prerequisites for setup.
A SQL warehouse is required for compute. Segment recommends a warehouse with the the following characteristics:
To improve the query performance of the Delta Lake, Segment recommends creating compact jobs per table using OPTIMIZE followingDatabricks recommendations.
Segment recommends manually starting your SQL warehouse before setting up your Databricks destination. If the SQL warehouse isn’t running, Segment attempts to start the SQL warehouse to validate the connection and may experience a timeout when you hit theTest Connectionbutton during setup.
Use the five steps below to connect to your Databricks warehouse.
To configure your warehouse, you’ll need read and write permissions.
Pick a name to help you identify this space in the warehouse, or use the default name provided. You can’t change this name once the warehouse is connected.
You’ll use the Databricks workspace URL, along with Segment, to access your workspace API.
Check your browser’s address bar when inside the workspace. The workspace URL should resemble:https://<workspace-deployment-name>.cloud.databricks.com. Remove any characters after this portion and note the URL for later use.
This catalog is the target catalog where Segment lands your schemas and tables.
Next, add SQL warehouse details about your compute resource.
Segment uses the service principal to access your Databricks workspace and associated APIs.
Service principal client ID: Follow theDatabricks guide for adding a service principal to your account. This name can be anything, but Segment recommends something that identifies the purpose (for example, “Segment Profiles Sync”).  Segment doesn’t requireAccount adminorMarketplace adminroles.
The service principal needs the following setup:
Client secret: Follow theDatabricks instructions to generate an OAuth secret.
Once you’ve configured your warehouse, test the connection and clickNext.
With selective sync, you can choose exactly which tables you want synced to the Databricks warehouse. Segment syncs materialized view tables as well by default.
Select tables to sync, then clickNext. Segment creates the warehouse and connects databricks to your Profiles Sync space.
You can view sync status, and the tables you’re syncing from the Profiles Sync overview page.
Learn more aboutusing selective syncwith Profiles Sync.
This page was last modified: 03 Jun 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Databricks for Profiles Sync
Getting started
Warehouse size and performance
Set up Databricks for Profiles Sync
Connect your Databricks warehouse
Step 1: Name your schema
Step 2: Enter the Databricks compute resources URL
Step 3: Enter a Unity catalog name
Step 4: Add the SQL warehouse details from your Databricks warehouse
Step 5: Add the service principal client ID and client secret
Set up selective sync
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profiles-sync/sample-queries/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
On this page, you’ll find queries that you can run with Profiles Sync to address common use cases.
The examples in this guide are based on a Snowflake installation. If you’re using another warehouse, you may need to adjust the syntax.
The queries on this page use two example schemas:
These schema names may not match your own.
These queries let you view and manage identity graphs, which give you insight into unified customer profiles generated byidentity resolution.
This example queries theid_graph_udpatestable to measure the rate at which Segment creates and merges profiles, as well as the type of event that triggered the profile change:
Segment’sconfigurable identifier limitslet you set maximum values for identifiers like email. These maximum configured values help prevent two separate users from being merged into a single Profile.
The following query lets you view Profiles that have reached a configured limit for the email identifier:
When a merge occurs, Segment selects and associates a single trait value with a profile. This logic depends on how you materialize theprofile_traitstable.
You can break out a profile, though, to see the trait versions that existed before the merge. As a result, you can identify a particular trait’s origin.
The following example inspects a particular profile,use_XX, and trait,trait_1. The query reports the profile’s last observed trait, its source ID, and any profiles Segment has since merged into the profile:
The following three snippets will provide a full list of your customers, along with:
Provides the latest subscription status set for all identifiers in the space. This query will not include identifiers that have no subscription status ever set.
To get complete user histories, join event tables to the identity graph and aggregate or filter withid_graph.canonical_segment_id:
Suppose you want to track a user’s entrances and exits of the audienceaud_1. Running the following query would return all qualifying entrance and exits:
This query works with any Trait or Audience membership, whether computed in Engage or instrumented upstream.
Yes. Engage sends updates to Audience membership (as a boolean) and computed trait value updates as traits on an Identify call that Segment forwards to your data warehouse.
The column name corresponds to the Audience or Trait key shown on the settings page:
Surface these values the same way as any other trait value:
Identity merges change Segment’s understanding of who performed historical events.
For example, ifprofile_bcompleted a “Product Purchased” event but Segment understands thatprofile_bshould be merged intoprofile_a, Segment deduces thatprofile_aperformed that initial “Product Purchased” event.
With that in mind, here’s how to differentiate betweensegment_idandcanonical_segment_id:
The mapping between these two identifiers materializes in yourid_graphtable. If a profile has not been merged away, thensegment_idis equivalent tocanonical_segment_id. If a profile has been merged away,id_graphreflects that state.
As a result, you can retrieve a customer’s complete event history by joining an event table, likeproduct_purchasedtoid_graph.
For more information, view theProfiles Sync tables guide.
Profiles Sync mimics the materialization performed bySegment Unify. A user’s merges, external IDs, and traits should be expected whether they’re queried in the warehouse, Profile API, or viewed in the UI.
The following edge cases might drive slight (<0.01%) variation:
By contrast, Segment Unify and incrementally-built Profiles Sync materializations won’t combine already-computed traits across two merged profiles at the moment of merge. Instead, one profile’s traits will be chosen across the board.
Theexternal_id_hashis a hash of theexternal_id_typeandexternal_id_valueusing SHA-1. This field corresponds to theprimary_keyfor the table:hash (external_id_type and external_id_value).
For example, in BigQuery the logic is:TO_HEX(SHA1(concat(external_id_type, external_id_value))) as seg_hash.
This page was last modified: 04 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Profiles Sync Sample Queries
About example schemas
Monitor and diagnose identity graphs
Show how many profiles Segment creates and merges per hour
Isolate profiles that have reached an identifier’s maximum configured value
Reconstruct a profile’s traits
Identify the source that generated the value for a particular trait for a canonical profile as well as its child profiles
Measure and model your customer base
Pull a complete list of your customers, along with their merges, external identifiers, or traits
Pull the latest subscription status set for every profile identifier in the space
Show all pages visited by a user
Show the complete history of a trait or audience membership associated with a customer
FAQs
Can I view Engage Audience membership and Computed Trait values in my Warehouse?
What is the relationship betweensegment_idandcanonical_segment_id? Are they unique?
Does Profiles Sync data ever differ from Unify data?
What hash function is used for the external_id_hash field by Profiles Sync?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profiles-sync/tables/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Through Profiles Sync, Segment provides data sets and models that can help you enrich customer profiles using any warehouse data available to you.
Using a practical example of how Segment connects and then merges anonymous profiles, this page explains the tables that Segment lands, as well as the tables you materialize as part of Profiles Sync.
To help illustrate the possible entries and values populated into Profiles Sync tables, view the event tabs below and consider the following scenario.
Suppose the following four events lead to the creation of two separate profiles:
Initially, Segment generates two profiles for the first three calls. In the final event, though, Segment understands that Profile 2 should be merged into Profile 1.  Segment then merges Profile 2 into Profile 1, merging away Profile 2 in the process.
Profiles Sync tracks and provides information about these events through a set of tables, which you’ll learn about in the next section.
Profile raw tables contain records of changes to your Segment profiles and Identity Graph over time.
With raw tables, you have full control over the materialization of Profiles in your warehouse, as well as increased observibility.
Raw tables contain complete historical data when using historical backfill.
Theid_graph_updatestable maps between the following:
As a result, this table contains information about the creation and merging of profiles, as well as the specific events that triggered those changes.
Using the events from the profile merge case study, Segment would generate three new entries to this table:
In this example, the table showsprofile_2mapping to two places: first to itself, then, later, toprofile_1after the merge occurs.
Segment shows the complete history of every profile. If, later,profile_1merges into a differentprofile_0, Segment adds recursive entries to show thatprofile_1andprofile_2both map toprofile_0.  These entries give you a comprehensive history of all profiles that ever existed.
If you’ll use Profiles Sync to build models, refer to theid_graphmodel, which can help you put together a complete view of a customer.
This table maps Segment-generated identifiers, likesegment_id, to external identifiers that your users provide. It has the following columns:
The anonymous site visits sample used earlier would generate the following events:
In this table, Segment shows three observed identifiers. For each of the three identifiers, Segment outputs the Segment ID initially associated with the identifier.
Theprofile_traits_updatestable maps eachsegment_idwith all associated profile traits.
Segment updates this table:
In the event that two profiles merge, Segment only updates theprofile_traits_updatestable for thecanonical_segment_id, or the fully merged id.
From theprofile_traits_updatestable, use Segment’sopen-source dbt models, or your own tools to materialize theprofile_traitstable with all profiles and associated profile traits in your data warehouse.
Event type tables provide a complete history for each type of event. Segment syncs events based on the event sources you’ve connected to Unify.
Identity Resolution processes these events, and includes asegment_id, enabling the data to be joined into a single Profile record.
Event type tables will have 2 months of historical data on backfill.
Event type tables includes the following tables:
These event tables are similar to the tables landed by Segment warehouse integrations, with the following exceptions:
The previous result would generate two entries in thepagestable:
And two entries in theidentifiestable:
All these events were performed by the same person. If you use these tables to assemble your data models, though, always join them againstid_graphto resolve each event’scanonical_segment_id.
You might see columns appended withhidden_entryorhidden_entry_joined_atin profile data of users in Journeys. Segment uses these for internal purposes, and they do not require any attention or action.
Profiles Sync uses the following schema:<profiles_space_name>.<tableName>.
Note that the Profiles Sync schema is different from the Connections Warehouse schema:<source_name>.<tableName>.
If your space has the same name as a source connected to your Segment Warehouse destination, Segment overwrites data to the Event tables.
For more on Profiles Sync logic, table mappings, and data types, download thisProfiles Sync ERDor visitschema evolution and compatibility.
Track event tables provide a complete event history, with one table for each unique named Track event. Segment syncs events based on the event sources you’ve connected to Unify.
These tables include a full set of Track event properties, with one column for each property.
Segment’s Identity Resolution has processed these events, which contain asegment_id, enabling the data to be joined into a single profile record.
These tables will have two months of historical data on backfill.
To view and select individual track tables, edit your sync settings after you enable Profiles Sync, and wait for the initial sync to complete.
With Profiles Sync, you can access the following three tables that Segment materializes for a more complete view of your profile:
These materialized tables provide a snapshot of your Segment profiles, batch updated according to your sync schedule.
If you’re not using materialized views for Profile Sync and would like to switch, follow these steps:
For materialized view tables, you must have delete permissions for your data warehouse.
Materialized views offer several advantages:
With theuser_traitstable, you’ll see all traits that belong to a profile, represented by thecanonical_segment_id. Use this table for a complete picture of your Profiles Sync data with external data sources such as customer purchase history, product usage, and more.
When a merge occurs, two things happen:
This table has the following columns:
Theuser_identifierstable contains all external ID values that map to a profile, which is represented by thecanonical_segment_id.
With theuser_identifierstable:
When a merge occurs:
This table has the following columns:
Theprofile_mergestable contains all mappings from asegment_idto a profile, represented by thecanonical_segment_id. This mapping indicates that a profile has been created within Segment.
With theprofile_mergestable:
When a merge occurs:
This table has the following columns:
You can materialize the following tables with your own tools, or using Segment’sopen-source dbt models:
You might want to materialize your own tables if, for example, you want to transform additional data or join Segment profile data with external data before materialization.
You can alternatively use tables that Segment materializes and syncs to your data warehouse.Learn moreabout the tables Segment materializes.
Please note that dbt models are in beta and need modifications to run efficiently on BigQuery, Synapse, and Postgres warehouses. Segment is actively working on this feature.
Every customer profile (orcanonical_segment_id) will be represented in each of the following tables.
This table represents the current state of your identity graph, showing only where asegment_idis now understood to point.
The most recent entry for eachsegment_idfromid_graph_updatesreflects this. After the four example events,id_graphwould show the following:
Segment drops most diagnostic information from this table, since it’s designed for reference use. In this case, you’d learn that any data references toprofile_2orprofile_1now map to the same customer,profile_1.
Use this table to view the full, current-state mapping between each external identifier you’ve observed and its corresponding, fully-mergedcanonical_segment_id.
In the case study example, you’d see the following:
Use theprofile_traitstable for a singular view of your customer. With this table, you can view all custom traits, computed traits, SQL traits, audiences, and journeys associated with a profile in a single row.
Theprofile_traitstable contains the last seen value for any of your customer profile traits that Segment processes as an Identify call.
If Segment later merges away a profile, it populates thesegment_idit merged in themerged_tocolumn.
In the case study example, Segment only collected email.  As a result, Segment would generate the followingprofile_traitstable:
Merged profiles
Profiles that Segment merges away are no longer canonical.
This page was last modified: 12 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Profiles Sync Tables and Materialized Views
Case study: anonymous site visits lead to profile merge
Profile raw tables
The id_graph_updates table
Recursive entries
The external_id_mapping_updates table
The profile_traits_updates table
Event type tables
Profiles Sync schema
Track event tables
Tables Segment materializes
Switching to materialized Profile Sync
Why materialized views?
The user_traits table
The user_identifiers table
The profile_merges table
Tables you materialize
The id_graph table
The external_id_mapping table
The profile_traits table
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
The Data Graph acts as a semantic layer that allows businesses to define relationships between various entity datasets in the warehouse — such as accounts, subscriptions, households, and products — with the Segment Profile. It makes these relational datasets easily accessible to business teams for targeted and personalized customer engagements.
To use the Data Graph, you’ll need the following:
Data Graph, Reverse ETL, and Profiles Sync require different warehouse permissions.
Data Graph currently only supports workspaces in the United States.
To get started with the Data Graph, set up the required permissions in your warehouse. Segment supports the following:
To track the data sent to Segment on previous syncs, Segment usesReverse ETLinfrastructure to store diffs in tables within a dedicated schema called_segment_reverse_etlin your data warehouse. You can choose which database or project in your warehouse this data lives in.
To connect your warehouse to the Data Graph:
The Data Graph is a semantic layer that represents a subset of relevant business data that marketers and business stakeholders can use for audience targeting and personalization in downstream tools. Use the configuration language spec and the following features to build your Data Graph:
Defining Relationships
Similar to the concept ofcardinality in data modeling, the Data Graph supports 3 types of relationships:
Data Graph Example

The first step in creating a Data Graph is to define your entities. An entity corresponds to a table in the warehouse.
Example:
Segments recommends that you select materialized views under the ProfilesSelective Sync settingsto optimize warehouse compute costs.
Next, define the profile. This is a special class of entity that represents Segment Profiles, which corresponds to the Profiles Sync tables and models. For Linked Audiences, this allows marketers to filter on profile traits, event history, etc. There can only be one profile for a Data Graph.
Example:
Now define your relationships between your entities. Similar to the concept ofcardinality in data modeling, the Data Graph supports 3 types of relationships below. All relationship types require you to define the relationship slug, name, and related entity. Each type of relationship has unique join on conditions.
This is the first level of relationships and a unique type of relationship between the Segment profile entity and a related entity.
To define a profile-to-entity relationship, reference your entity table and depending on your table columns, choose to join on one of the following:
Option 1 (Most common) - Join on an external ID:Use theexternal_idblock to join the profile entity with an entity table using external IDs from yourUnify ID resolutionsettings. Typically these identifiers areuser_id,email, orphonedepending on the column in the entity table that you want to join with.
Option 2 - Join on a profile trait:Use thetraitsblock to join the profile entity with an entity table usingProfile Traits.
Example:
For 1:many relationships, define the join on between the two entity tables using the spec below.
Example:
For many:many relationships, define the join on between the two entity tables with thejunction_table.
Attributes from a junction table are not referenceable via the Linked Audience builder. If a marketer would like to filter upon a column on the junction table, you must define the junction as an entity and define a relationship.
Junction table spec
Example:
You can validate your Data Graph using the preview, then click Save. After you’ve set up your Data Graph, your partner teams can start leveraging these datasets with withLinked EventsandLinked Audiences.
To edit your Data Graph:
A data consumer refers to a Segment feature like Linked Events and Linked Audiences that are referencing datasets, such as entities and/or relationships, from the Data Graph. You can view a list of data consumers in two places:
Upon editing and saving changes to your Data Graph, a modal will pop up to warn of breaking and/or potential breaking changes to your data consumers. You must acknowledge and clickConfirm and savein order to proceed.
Segment has a service that regularly scans and monitors the Data Graph for changes that occur in your warehouse that may break components of the Data Graph, like when the table being referenced by the Data Graph gets deleted from your warehouse or when the primary key column no longer exists. An alert banner will be displayed on the Data Graph landing page. The banner will be removed once the issues are resolved in your warehouse and/or the Data Graph. You will also have the option to trigger a manual sync of your warehouse schema.
Configure alerts for breaking changes to receive notifications over Slack, email, or in-app notification whenever Segment detects a breaking change in your warehouse.
To configure alerts for breaking changes:
This page was last modified: 05 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Data Graph
Prerequisites
Step 1: Set up Data Graph permissions in your data warehouse
Step 2: Connect your warehouse to the Data Graph
Step 3: Build your Data Graph
Key steps to build your Data Graph
3a: Define entities
3b: Define the profile
3c: Define relationships
Define profile-to-entity relationship
Define a 1:many relationship
Define many:many relationship
Step 4: Validate your Data Graph
Edit and manage your Data Graph
View Data Graph data consumers
Understand changes that may cause breaking and potential breaking changes
Detect warehouse breaking changes
Receive alerts for warehouse breaking changes
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/setup-guides/bigquery-setup//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
BigQuery for Data Graph is in beta and Segment is actively working on this feature. Some functionality may change before it becomes generally available. This feature is governed by Segment’sFirst Access and Beta Preview Terms.
Set up your BigQuery data warehouse to Segment for theData Graph.
You need to be an account admin to set up the Segment BigQuery connector as well as write permissions for the__segment_reverse_etldataset.
To set the roles and permissions:
Create a new dataset as Segment requires write access to the dataset for internal bookkeeping and to store checkpoint tables for the queries that are executed.
Segment recommends you to create a new dataset for the Data Graph. If you choose to use an existing dataset that has also been used forSegment Reverse ETL, you must follow theadditional instructionsto update user access for the Segment Reverse ETL catalog.
To create your dataset, navigate to the BigQuery SQL editor and create a dataset that will be used by Segment.
Grant theBigQuery Data Viewerrole to the service account at the project level. Make sure to grant read-only access to the Profiles Sync project in case you have a separate project.
To grant read-only access for the Data Graph:
If you want to restrict access to specific datasets, grant the BigQuery Data Viewer role on datasets to the service account. Make sure to grant read-only access to the Profiles Sync dataset.
To restrict read-only access:
You can also run the following command:
If you ran Segment Reverse ETL in the project you are configuring as the Segment connection project, a Segment-managed dataset is already created and you need to provide the new Segment user access to the existing dataset.
If you run into an error on the Segment app indicating that the user doesn’t have sufficient privileges on an existing__segment_reverse_etldataset, grant theBigQuery Data Editorrole on the__segment_reverse_etldataset to the service account . Note that the__segment_reverse_etldataset is hidden in the console. Run the following SQL command:
This page was last modified: 05 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
BigQuery Data Graph Setup
Step 1: Roles and permissions
Step 2: Create a dataset for Segment to store checkpoint tables
Step 3: Grant read-only access for the Data Graph
(Optional)Step 4: Restrict read-only access
Step 5: Validate permissions
Step 6: Connect your warehouse to Segment
Update user access for Segment Reverse ETL dataset
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/setup-guides/databricks-setup//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
On this page, you’ll learn how to connect your Databricks data warehouse to Segment for theData Graph.
Segment assumes that you already have a workspace that includes the datasets you’d like to use for the Data Graph. Sign in to Databricks with admin permissions to create new resources and provide the Data Graph with the necessary permissions.
Segment recommends setting up a new Service Principal user and only giving this user permissions to access the required catalogs and schemas.
If you already have a Service Principal user you’d like to use, grant it “Can use” permissions for your data warehouse and proceed toStep 2.
Segment requires write access to this catalog for internal bookkeeping and to store checkpoint tables for the queries that are executed. Therefore, Segment recommends creating a new catalog for this purpose.This is also the catalog you’ll be required to specify when connecting Databricks with the Segment app.
Segment recommends creating a new database for the Data Graph.
If you choose to use an existing database that has also been used forSegment Reverse ETL, you must follow theadditional instructionsto update user access for the Segment Reverse ETL catalog.
Run the following SQL to grant the Data Graph read-only access to the Profiles Sync catalog:
Run the following SQL to grant your Service Principal user read-only access to any additional catalogs you want to use for the Data Graph.
Restrict access to specific schemas by running the following SQL:
Sign in to theDatabricks CLI with your Client ID secretand run the following SQL to verify the Service Principal user has the correct permissions for a given table.
If this command succeeds, you can view the table.
To connect your warehouse to the Data Graph:
If Segment Reverse ETL has ever run in the catalog you are configuring as the Segment connection catalog, a Segment-managed schema is already created and you need to provide the new Segment user access to the existing catalog. Run the following SQL if you run into an error on the Segment app indicating that the user doesn’t have sufficient privileges on an existing_segment_reverse_etlcatalog.
This page was last modified: 05 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Databricks Data Graph Setup
Databricks credentials
Step 1: Create a new Service Principal user
1a) Create a new Service Principal user
1b) Add your Service Principal user to Warehouse User Lists
Step 2: Create a catalog for Segment to store checkpoint tables
Step 3: Grant read-only access to the Profiles Sync catalog
Step 4: Grant read-only access to additional catalogs for the Data Graph
(Optional) Step 5: Restrict read-only access to schemas
Step 6: Validate the permissions of your Service Principal user
Step 7: Connect your warehouse to Segment
Update user access for Segment Reverse ETL catalog
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/setup-guides/redshift-setup//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Redshift for Data Graph is in beta and Segment is actively working on this feature. Some functionality may change before it becomes generally available. This feature is governed by Twilio Segment’sFirst Access and Beta Preview Terms.
Set up your Redshift data warehouse to Segment for theData Graph.
To use Linked Audiences with Redshift, the Data Graph only supportsmaterialized views.
If you’re setting up Profiles Sync for the first time in the Unify space, go through the setup flow for Selective sync. If Profiles Sync is already set up for your Unify space, follow these steps to configure Profiles Sync for your Unify space:
You need to be an AWS Redshift account admin to set up the Segment Redshift connector as well as write permissions for the__segment_reverse_etldataset.
To get started with Redshift:
Segment recommends you to create a new Redshift user and role with only the required permissions.
Create a new role and user for the Segment Data Graph. This new role will only have access to the datasets you provide access to for the Data Graph. Run the SQL commands in your Redshift cluster:
Segment recommends you to create a new database for the Data Graph. If you choose to use an existing database that has also been used forSegment Reverse ETL, you must follow theadditional instructionsto update user access for the Segment Reverse ETL schema.
Provide write access to the database as Segment requires this in order to create a schema for internal bookkeeping and to store checkpoint tables for the queries that are executed. Segment recommends you to create a new database for this purpose. This is also the database you’ll be required to specify for theDatabase Namewhen connecting Redshift with the Segment app.
Run the following SQL commands in your Redshift cluster:
Grant the Segment role read-only access to additional schemas you want to use for the Data Graph including the Profiles Sync database.
To locate the Profile Sync database, navigate toUnify > Profiles Sync > Settings > Connection Settings. You will see the database and schema name.
Grant schema permissions based on customer need. See Amazon’s docs to viewschema permissionsandexample commandsthat you can use to grant permissions. Repeat the following SQL query for each schema you want to use for the Data Graph.
Grant table permissions based on your needs. Learn more aboutAmazon’s table permissions.
Table permissions can either be handled in bulk:
Or in a more granular fashion if needed:
To verify you have set up the right permissions for a specific table, log in with the username and password you created forSEGMENT_LINKED_USERand run the following command to verify the role you created has the correct permissions. If this command succeeds, you should be able to view the respective table.
To connect your warehouse to Segment:
If Segment Reverse ETL ran in the project you are configuring as the Segment connection project, a Segment-managed dataset is already created, and you need to provide the new Segment user access to the existing dataset. Run the following SQL if you run into an error on the Segment app indicating that the user doesn’t have sufficient privileges on an existing__segment_reverse_etl:
This page was last modified: 10 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Redshift Data Graph Setup
Prerequisite
Getting started
Step 1: Roles and permissions
Step 2: Create a database for Segment to store checkpoint tables
Step 3: Grant read-only access for the Data Graph
Schemas
Table
Step 4: Validate permissions
Step 5: Connect your warehouse to Segment
Update user access for Segment Reverse ETL dataset
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/setup-guides/snowflake-setup//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Data Graph, Reverse ETL, Profiles Sync require different warehouse permissions.
On this page, you’ll learn how to connect your Snowflake data warehouse to Segment for theData Graph.
Segment assumes that you already have a warehouse that includes the datasets you’d like to use for the Data Graph. Log in to Snowflake with admin privileges to provide the Data Graph with the necessary permissions below.
Segment recommends setting up a new Snowflake user and only giving this user permissions to access the required databases and schemas. Run the SQL code block below in your SQL worksheet in Snowflake to execute the following tasks:
Segment recommends creating a new database for the Data Graph.
If you choose to use an existing database that has also been used forSegment Reverse ETL, you must follow theadditional instructionsto update user access for the Segment Reverse ETL schema.
Next, give the Segment roleread-onlyaccess to additional databases you want to use for Data Graph including the Profiles Sync database. Repeat the following SQL query foreachdatabase you want to use for the Data Graph.
If you want to restrict access to specificSnowflake schemas and tables, then run the following commands:
To verify you have set up the right permissions for a specific table, log in with the username and password you created forSEGMENT_CONNECTION_USERNAMEand run the following command to verify the role you created has the correct permissions. If this command succeeds, you should be able to view the respective table.
To connect your warehouse to the Data Graph:
If Segment Reverse ETL has ever run in the database you are configuring as the Segment connection database, a Segment-managed schema is already created and you need to provide the new Segment user access to the existing schema. Run the following SQL if you run into an error on the Segment app indicating that the user doesn’t have sufficient privileges on an existing_segment_reverse_etlschema.
This page was last modified: 28 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Snowflake Data Graph Setup
Snowflake credentials
Step 1: Create a user and internal database for Segment to store checkpoint tables
Step 2: Grant read-only access to additional databases for the Data Graph
(Optional) Step 3: Restrict read-only access to schemas
Step 4: Confirm permissions
Step 5: Connect your warehouse to the Data Graph
Update user access for Segment Reverse ETL schema
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/linked-events//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Use Linked Events to enrich real-time event streams with entities from your data warehouse to your destinations. Insert additional event context for downstream applications for richer data about each event.
Consent enforcement for Linked Events
You can useConsent Managementto enforce consent in your downstream destinations for Linked Events stamped with theconsent object. You must enable Consent Management and have consent stamped on events from event streaming sources to use Consent Management. You cannot use Linked Events to enrich events with consent preferences that are stored in your warehouse.
On this page, you’ll learn how to get started with Linked Events.
Linked Events warehouse support
Linked Events supports Snowflake, BigQuery, Redshift, and Databricks.
With Linked Events, you can:
To use Linked Events, you’ll need the following:
Segment stores and processes all data in the United States.
Profiles Sync isn’t required for Linked Events.
The following Segment accessrolesapply to Linked Events:
Entities Admin Access: Entities Admins have the ability to view and edit entity models and connection details.
Entities Read-only Access: Entities Read-only users have the ability to view entity models.
To create models and enrich events in destinations, you need to be aWorkspace Owneror have the following roles:
Linked Events uses Segment’sReverse ETLinfrastructure for pulling in data from your warehouse.
To get started, you’ll need to set up your data warehouse and provide the correct access detailed in the set up steps below. Linked Events supportsBigQuery,Databricks,Snowflake, andRedshift.
Before getting started with the Data Graph, be sure to set up your warehouse permissions.
Linked Events uses Reverse ETL to compute the incremental changes to your data directly within your data warehouse. The Unique Identifier column detects data changes, such as new, updated, and deleted records.
For Segment to compute data changes in your warehouse, Segment requires both read and write permissions to the warehouse schema table. At a high level, the extract process requires read permissions for the query being executed. Segment tracks changes to the query results through tables that Segment manages in a dedicated schema (for example,_segment_reverse_etl), which requires some write permissions.
Only sync what you need for enrichment. There may be cost implications to having Segment query your warehouse tables.
Linked Events syncs data from your warehouse approximately once every hour.
The table below shows the data warehouses Linked Events supports. View the Segment docs for your warehouse, then carry out the corresponding steps.
The Data Graph is a semantic layer that represents a subset of relevant business data that you’ll use to enrich events in downstream tools. Use the configuration language spec below to add models to build out your Data Graph.
Each Unify space has one Data Graph. The current version is v0.0.6 but this may change in the future as Segment accepts feedback about the process.
Deleting entities and relationships are not yet supported.
Snowflake schemas are case sensitive, so you’ll need to reflect the schema, table, and column names based on how you case them in Snowflake.
An entity is a stateful representation of a business object. The entity corresponds to a table in the warehouse that represents that entity.
To use Linked Events, you’ll need to add an action destination to send enriched events to. Navigate toConnections > Destinations. Select an existing action destination, or click+ Add destinationto add a new action destination.
For Linked Events, Segment supportsDestination Actionsin cloud-mode only.
With Linked Events, you can select entities and properties from your data warehouse, then add enrichments to map properties to your connected destination.
To enrich events with entities:
After you load a sample event, you can add entities from theEnrich events with entitiessection. You’ll select an entity, then an entity match property.
After you’ve added an entity and match property, add your event enrichments.
Use enrichments to select the entity you wish to send to your downstream destination.
In the Mappings tab, locate theSelect Mappingssection where you can enrich source properties from the entities you’ve selected in the previous step.
At this time, Linked Events doesn’t support a preview of enriched payloads.
When you’re satisfied with the mappings, clickSave. Segment returns you to the Mappings table.
At this time, when you select mappings or test events, you won’t see enrichment data. Enrichment data is only available with real events.
To verify which of your events matched one or more enrichments:
To use Linked Events, be sure that you have proper permissions for the Data Warehouse you’re using. Visit theBigQuery,Databricks,Snowflake, andRedshiftsetup guides to learn more about updating permissions.
Segment currently syncs once every hour.
For Linked Events, Segment supports all actions-based destinations in cloud-mode. Device-mode destinations are not supported.
Test events don’t send Linked Events. You’ll only see test events that come from the source debugger, which is ahead of the event enrichment.
Linked Events uses the existing Audit Trail in your Segment workspace. To view your Audit Trail, navigate toSettings > Admin > Audit Trail.
You can define a schedule for refreshing the linked data from your data warehouse.
To use entities with Linked Events, you’ll need to set theenrichment_enabledflag totrue. Here’s the sample code:
This page was last modified: 15 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Linked Events Overview
Use cases
Prerequisites
Linked Events roles
Step 1: Set up your data warehouse and permissions
Step 2: Connect your warehouse to the Data Graph
Schema
Supported data warehouses
Step 3: Build your Data Graph
Defining entities
Step 4: Add an actions-based destination
Step 5: Enrich events with entities
Add entities
Add enrichments
Save your enrichments
Enrichment observability
FAQs
What data warehouse permissions does Segment require?
How often do syncs occur?
Which Destinations does Linked Events support?
Why aren’t test events working?
Can I view my Linked Events Audit Trail?
How can I refresh linked data from my warehouse?
How do I use entities in my data graph with Linked Events?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/data-graph/linked-events-limits//
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
To provide consistent performance and reliability at scale, Segment enforces default use limits for Linked Events.
Linked Events provides you with the flexibility to enrich unlimited events in downstream destinations. This means you won’t encounter any limitations or pauses in service related to the number of Linked Events enrichments.
Segment measures Linked Events limits based on entities and entity rows.
To see how many entities and entity rows you’re using with Linked Events, navigate toSettings > Usage & billingand select theLinked Eventstab.
There is a hard limit of 100 million entity rows that causes syncs to pause.
This page was last modified: 15 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Linked Events Limits
Usage limits
Special cases
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/predictions//
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
Predictions, Segment’s artificial intelligence and machine learning feature, lets you predict the likelihood that users will perform any event tracked in Segment.
With Predictions, you can identify users with, for example, a high propensity to purchase, refer a friend, or use a promo code. Predictions also lets you predict a user’s lifetime value (LTV).
Segment saves predictions to user profiles, letting you build Audiences, trigger Journeys, and send data to downstream destinations.
For more details on AI usage and data, seePredictions Nutrition Facts Label.
On this page, you’ll learn how to build a prediction.

Follow these steps to build a prediction:
Keep the following in mind when you build a prediction:
In the next section, you’ll learn more about the four available predictions.
Segment offers four predictions: Custom Predictive Goals, Likelihood to Purchase, Predicted LTV, and Likelihood to Churn.
Custom Predictive Goals require a starting cohort, target event, and quality data.
When you build a Custom Predictive Goal, you’ll first need to select a cohort, or a group of users, for which you want to make a prediction. Traits with small cohorts compute faster and tend to be more accurate. If you want to predict for an entire audience, though, skip cohort selection and move to selecting a target event.
The target event is the Segment event that you want to predict. In creating a prediction, Segment determines the likelihood of the user performing the target event. Segment lets you include up to two target events and an event property in your prediction.
In machine learning, better data leads to better predictions. Because Segment prioritizes trust and performance, Segment has a number of data checks to ensure that each prediction is reliable and of high quality. Segment provides guidance in the UI before you create a trait, but some checks only occur during model training. If a trait fails, you’ll see an error message and description in the UI.
This sections lists Segment’s access and data requirements, service limits, and best practices for Predictions.
For example, to predict a customer’s propensity to purchase over the next 30 days, set the Target Window to 30 days and the Target Event toOrder Completed(or the relevant purchase event that you track).
To access Predictions, you must:
This table lists the requirements for a trait to compute successfully:
Some customers want to specifically include or exclude events that get fed into the model. For example, if you track different events from an EU storefront compared to a US storefront and you only want to make predictions using data from the US, you could unselect the events from the EU space. This step is optional, Segment only recommends using it if you have a clear reason in mind for removing events from becoming a factor in the model.
Predictive Traits and anonymous events
Predictive Traits are limited to non-anonymous events, which means you’ll need to include an additionalexternal_idother thananonymousIdin the targeted events. If want to create Predictive Traits based on anonymous events, reach out to your CSM with your use case for creating an anonymous Predictive Trait and the conditions for trait.
Likelihood to Purchase is identical to Custom Predictive Goals, but Segment prefills theOrder Completedevent, assuming it’s tracked in your Segment instance.
If you don’t trackOrder Completed, choose a target event that represents a customer making a purchase.
Predicted Lifetime Value predicts a customer’s future spend over the next 120 days. To create this prediction, select a purchase event, revenue property, and the currency (which defaults to USD). LTV is only calculated for customers that have performed the selected purchase events 2 or more times. The following table contains details for each property:
Likelihood to Churn proactively identifies customers likely to stop using your product. Segment builds this prediction by determining whether or not a customer will perform a certain action.
To use Likelihood to Churn, you’ll need to specify a customer event, a future time frame for which you want the prediction to occur, and if you want to know whether the customer will or won’t perform the event.
For example, suppose you wanted to predict whether or not a customer would view a page on your site over the next three months. You would selectnot perform,Page Viewed, andat least 1 time within 90 days.
Churn predictions are only made for eligible customers. In the previous example, only customers that have performedPage Viewedin the last 90 days would be eligible to recieve this prediction. The Segment app shows you which customers are eligibile to recieve this prediction.
Segment then uses this criteria to build the prediction and create specific percentile cohorts. You can then use these cohorts to target customers with retention flows, promo codes, or one-off email and SMS campaigns.
For use cases and information on how Segment builds prediction, readUsing Predictions.
This page was last modified: 05 Aug 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Predictions
Build a prediction
Choosing a prediction
Custom Predictive Goals
Starting cohort
Target event
Access and data requirements
Definitions
Predictions access requirements
Successful trait computation
Selecting events (optional)
Likelihood to Purchase
Predicted Lifetime Value
Likelihood to Churn
Use cases
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/predictions/using-predictions/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
Predictions are stored ascomputed traitsin user profiles, with scores represented as percentage cohorts. For example, a score of0.8indicates the user is in the 80th percentile, or the top 20% of the cohort.
After selecting a cohort, use Predictions with the following Segment features:
You can access generated Predictions in thePredictiontab of your Trait. The Prediction tab gives you actionable insight into your prediction.

TheExplore your predictionsection of the Prediction tab visualizes prediction data and lets you create Audiences to target. An interactive chart displays a percentile cohort score that indicates the likelihood of users in each group to convert on your chosen goal. You can choose the top 20%, bottom 80%, or create custom ranges for specific use cases.
You can then create an Audience from the group you’ve selected, letting you send efficient, targeted marketing campaigns within Journeys. You can also send your prediction data to downstream destinations.
Predictions rank your customers by their likelihood to perform a specific conversion event, from most to least likely.
For each custom prediction, Segment monitors the percentile cohort where customers were ranked when they performed the predicted conversion event. After around 7 days, Segment creates a graph data visualization, allowing you to evaluate the prediction’s accuracy based on real workspace data.

For example, suppose you’re predicting the likelihood of customers completing anorder_completedevent. The graph shows that:
This pattern shows that the prediction was extremely accurate in identifying customers most likely to convert. Ideally, most graphs will show a similar trend, where the highest-ranked cohorts have the most conversion activity.
However, this pattern can change depending on how you use Predictions. For example, if you run a marketing campaign targeting the bottom 10% cohort, you might see an increase in conversions for that group instead.
Like any AI or machine learning tool, Predictions may not always be perfect. Start small, test your predictions, and refine your approach as needed. Model monitoring makes it easier to measure and improve the accuracy of your predictions.
The Predictions tab’sUnderstand your predictionsection provides insights into the performance of the underlying predictive model. This information helps you understand the data points that contribute to the prediction results.

The Understand your prediction dashboard displays the following model metrics:
Predictions offer more value in some situations than others. This sections covers common scenarios where predictions have high impact, as well as others where alternative approaches may be more appropriate.
Predictions are most effective in the following situations:
Predictions may not be as beneficial in the following situations:
Segment uses a binary classification model that uses decision trees.
Once Segment creates your prediction, you can check the model statistics page, where Segments shows you how the model was created. Segment also maintains automated systems that monitor model performance and will alert you if your model is not predictive.
Trait creation depends on the amount of data, but Segment expects predictions to be completed in around 24 hours. For larger customers, however, this could take 48 hours. Predictions shows a status ofIn Progresswhile computing; Segment updates this status when customers are scored.
These data science statistics measure the effectiveness of Segment’s predictions when tested against historical data. For more information, refer toROC Curve and AUC,The Lift Curve in Machine Learning, andIntuition behind log-loss score.
The Prediction Quality Score factors AUC, log loss, and lift quality to determine whether Segment recommends using the prediction. A model can have a score of Poor, Fair, Good, or Excellent.
The created trait value represents the user’s percentile cohort. This value will refresh when we re score the customers based on your refresh cadence. If you see0.85on a user’s profile, this means the user is in the 85th percentile, or the top 15% for the prediction.
Segment rebuilds the machine learning model every 30 days.
By default, Segment refreshes scores every 7 days. However, you can request that trait values update daily. Reach out to your CSM to determine your eligibility.
Predictive Traits can’t be updated, but Predictive Audiences can. To modify a Predictive Trait, you’ll need to recreate it.
You get five predictions as part of Engage Foundations or Unify Plus. To purchase more predictions, reach out to your CSM.
Predictive Audiences contribute to the Engage limit of 100 audiences. Whether you create the audience manually or with predictive modeling, the audience counts towards the 100-audience limit.
Yes.
Yes. Keep the following in mind when you work with Predictions:
The probabilities for all users are added together and then divided by the total number of users. If a user’s score in “Likelier to convert than average” is below 1, it means they are less likely than the average user to convert.
This page was last modified: 26 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Using Predictions
Working with Predictions in Segment
Prediction tab
Model monitoring
Model statistics
Predictions use cases
Marketing opportunities
Data science use cases
When to use a prediction
When other approaches work better
FAQs
What type of machine learning model does Segment use?
What level of confidence can I have in my predictions?
How long do predictions take to create?
What are AUC, log loss, and lift quality?
What is the Prediction Quality Score?
How does Segment store trait values?
How frequently do you re-train the model?
How frequently do you update trait values?
Can I update Predictive Traits and Predictive Audiences?
How many predictions can I have?
Is Predictions HIPAA eligible?
Are there any known Predictions limitations?
How is the average calculated?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/predictions/suggested-predictive-audiences/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
Suggested Predictive Audiences can help you improve customer engagement, drive higher conversion rates, and reduce ad spend.
This page explains what a Suggested Predictive Audience is, how to build a Suggested Predictive Audience, and what each available Audience targets.
A Suggested Predictive Audience is an out-of-the-box Audience template driven by machine learning.
Segment offersfive templatesthat are prebuilt withPredictionslike likelihood to purchase and lifetime predicted value. Selecting a template generates a Predictive Audience whose members you can engage in a number of ways:
Follow these steps to build a Suggested Predictive Audience:
Your Suggested Predictive Audience is now live.
Engage offers five Suggested Predictive Audiences. The following table summarizes the customers each Audience targets and the events and traits Engage uses to build the Audience:
Choose aReady to buyPredictive Audience to target customers who show a high propensity to make a purchase.
Segment builds this Audience with theLikelihood to Purchase prediction. Audience members show encouraging engagement and have a likelihood to buy in the top 20th percentile.
Choose aLong shotPredictive Audience to target customers who have made a purchase but have a middling likelihood to buy.
Segment builds this Audience with theOrder Completedevent andLikelihood to Purchasetrait. Audience members have completed a purchase but currently have a likelihood to buy somewhere between the 25th and 65th percentile.
Choose aHigh lifetime valuePredictive Audience to target customers that show a high predicted lifetime value.
Segment builds this Audience with thePredicted LTV prediction. Audience members are in the top 10th percentile of predicted lifetime value and Segment expects that they’ll spend the most over the next 90 days.
Choose aPotential VIPsPredictive Audience to target customers exhibiting several promising marketing behaviors.
Segment builds this Audience with thePage Viewedevent and Likelihood to Purchase and Predicted LTV prediction. Audience members have been active on your site within the last two weeks, have a high predicted lifetime value, and a high propensity to purchase.
Choose aDormantPredictive Audience to target inactive customers.
Segment builds this Audience with thePage Viewedevent and the Likelihood to Purchase Predictive Trait. Audience members have a low likelihood to purchase and haven’t been active on your site in the last 60 days.
This page was last modified: 23 Aug 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Suggested Predictive Audiences
Suggested Predictive Audience basics
Build a Suggested Predictive Audience
Suggested Predictive Audience types
Audience descriptions
Ready to buy
Long shots
High lifetime value
Potential VIPs
Dormant
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/predictions/predictions-nutrition-facts/
Paragraphs:
Twilio’sAI Nutrition Factsprovide an overview of the AI feature you’re using, so you can better understand how the AI is working with your data. Predictions’s AI qualities are outlined in the following Nutrition Facts label. For more information, including the glossary regarding the AI Nutrition Facts label, refer to theAI Nutrition Factspage.


AI Nutrition FactsCustomer AI Predictions
DescriptionPredictions creates propensity models that predict if a customer will purchase, churn, or perform any other conversion event
Privacy Ladder Level2
Feature is OptionalYes
Model TypePredictive
Base ModelGradient Boosted Trees
Trust Ingredients
Base Model Trained with Customer DataN/ACustomer Data is used to develop a model created specifically for each customer and is never reused for other customers
Customer Data Shared with Model VendorNoCustomer Data is used to build the model, but it is built by Twilio Segment for the customer and not by a third party vendor
Training Data AnonymizedNo
Data DeletionYes
Human in the LoopN/A
Data Retention30 days
Input/Output ConsistencyN/A
Other ResourcesLearn more at:https://twilio.com/en-us/customer-ai
This page was last modified: 26 Feb 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Predictions Nutrition Facts Label
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/computed-traits/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
Beginning August 18, 2023, new Unify Plus users can access Computed Traits in Unify.
Computed Traits allow you to quickly create user or account-level calculations that Segment keeps up-to-date over time. These can be computations like thetotal_num_ordersa customer has completed, thelifetime_revenueof a customer, themost_frequent_userto determine which user is most active in an account, or theunique_visitors_countto assess how many visitors from a single domain. These computations are based on your events and event properties that you are sending through Segment on thepageandtrackcalls.
View the table below to better understand how Segment collects custom, computed, and SQL traits.
You can use the Profile explorer (Unify > Profile explorer) to view traits attached to a profile.
Segment currently supports the following types of computed traits:
Event Properties per Computed Trait limit
Segment limits the number of Event Properties on each Computed trait to 10,000. If your Computed Trait exceeds this limit, Segment will not persist any new Event Properties and will drop new trait keys and corresponding values.
An Event Counter trait stores a count of aneventover a period of time. For example, you can create a trait callednumber_logins_90_daysbased on aUser Logged Inevent. You can also use event properties to only specific types of events.
User-level examples:
Account-level examples:

An aggregation computes asum, average, minimum, or maximumof a numericevent property. A good example is asum_cosmetics_revenue_90_daysif you’re sending anOrder Completedevent with arevenueproperty. In the example we’re refining the revenue even further based on another event property:category = 'cosmetics'. Note that you can only compute an aggregation trait for event properties that have a numeric value.
User-level examples:
Account-level use cases

A most frequent user-level computed trait will return themost common valuefor anevent property.  This is  helpful to create traits likepreferred_product_viewedormost_commonly_viewed_categorythat tell you what a user’s preferred product, or content category might be. Note that the most frequent computed trait requires the event property to have been tracked at least twice. In the case of a tie, Segment returns the first alphabetical value. For account-level computed traits, you can also return the most frequentuser trait. This is helpful when you want to determine which user has performed an event the most frequently. For example, you might to return the email of the user in an account most actively viewing your app.
User-level examples:
Account-level examples:

The first user-level trait returns the first event property value Segment has seen. This is common for creating traits likefirst_page_visitedbased on the page name. For accounts, the first computed trait could also return a trait likefirst_user_signup, to calculate the first user to use your product.
User-level examples:
Account-level examples:

The last trait returns the last event property value Segment has seen. This is common for creating traits likelast_utm_campaignto help you calculate last-touch attribution for paid advertising.
User-level examples:
Account-level examples:

Unique list computed traits will output alist of unique valuesin alphabetical order for anevent property. This is helpful to understand the different types of products or content that a customer or users in an account have interacted with or purchased. Customers are creating traits likeunique_product_categories_viewedand sending them to email marketing tools and accessing them through the Profiles API for in-app personalization.
Example use cases:

Unique list count computed traits will output acount of the unique list of valuesfor anevent property. Customers are creating traits likeunique_product_categories_viewed_countto understand the variety of products that a customer is viewing. At the account-level, customers are creating traits likeunique_visitors_countto calculate the number of unique visitors by ip address.
User-level examples:
Account-level examples:

All computed trait types support a common “Add Conditions” section. Conditions defined here restrict the messages considered when calculating the final value of the computed trait by looking at a property of the events. For example, you could limits events to only those where “price” is greater than 30.00 or where “page.url” contains “pricing”.
The following operators are available.
Segment sends user-level computed Traits to destinations using theIdentify callfor user traits, or using theTrack callfor event properties. Segment includes the trait value and property in the identify and track calls.
For example, the name of a computed trait is added to the user profile as a trait, and the trait’s value is set to the value of the computed trait. Segment sends an identify or track call when the trait is computed, depending on the destination configuration. If a computed trait counts the number of times a user visits your pricing page, and the user visits your pricing page five times, Segment sends an identify call with the propertypricing_page_visits: 5.
Learn more aboutComputed trait generated events here. The trait name corresponds to the snake cased name that you see in the trait settings, for examplemost_viewed_page_category. See thelist of Engage-compatible destinations
For account-level computed traits, you have the option to send either agroupcall and/oridentifycall. Group calls will send one event per account, whereas identify calls will send an identify call for each user in the account. This means that even if a user hasn’t performed an event, Segment will still set the account-level computed trait on that user. Because most marketing tools are still based at the user level, it is often important to map this account-level trait onto each user within an account. SeeAccount-level Audiencesfor more information.
After you create a computed trait, use the Overview page to view a compute progress bar, currentstatus, number of users with the trait, connected destinations, and more. For real-time traits, clickRefresh Traitto update the current number of users with the trait.
Viewing compute progress
When you create a real-time computed trait, you’ll see a progress bar, computed percentage, and status updates. For existing traits that you edit, Segment displays the compute status but not the progress bar or percentage.
Segment supports the editing of real-time Traits, which allows you to make nuanced changes to existing Traits in situations where cloning or building from scratch may not suit your use case.
To edit a real-time Trait, follow these steps:
Segment then processes your Trait edits. While the edit task runs, the trait remains locked and you can’t make further changes. Once Segment incorporates your changes, you’ll be able to access your updated Trait.
It is not possible to edit a trait to convert it from real-time to batch, or vice-versa. If the computation type needs to be changed, you will need to recreate the trait with the appropriate conditions.
You can access your computed traits using the Profile API by querying the/traitsendpoint. For example, you can query for theemails_opened_last_30_dayswith the following GET request:
returns:
TraitsYou can query a user’s traits (such asfirst_name,last_name, and more):
https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<external_id>/traits
By default, the response includes 20 traits. You can return up to 200 traits by appending?limit=200to the querystring. If you wish to return a specific trait, append?include={trait}to the querystring (for example,?include=age). You can also use the?class=audience​or?class=computed_trait​URL parameters to retrieve audiences or computed traits specifically.
You can read thefull Profile API docsto learn more.
You can download a copy of your trait by visiting the the computed trait overview page.Computed Trait CSVs are generated on demand. Before you can download the CSV, you will need to generate it. There are three different options for formatting:
You can’t add account traits and identifiers using the CSV downloader with account level audiences. This is because every row listed in the CSV file is a user, and since account traits and identifiers only exist on accounts, they wouldn’t exist as a user’s custom trait and appear on the CSV.
This page was last modified: 30 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Computed Traits
Comparing trait types
Types of Computed Traits
Event Counter
Aggregation
Most Frequent
First
Last
Unique List
Unique List Count
Conditions
Connecting your Computed Trait to a Destination
View compute status
Editing Realtime Traits
Accessing your Computed Traits using the Profiles API
Downloading your Computed Trait as a CSV file
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/custom-traits/
Paragraphs:
On this page
Custom traits are user or account traits collected from the Identify calls you send to Segment. For example, these could be demographics likeageorgender, account-specific likeplan, or even things like whether a user has seen a particular A/B test variation. From your sources, send custom traits as pieces of information that you know about a user in an Identify call.
As opposed tocomputed traitswhich are computed from your source data, orSQL Traitswhich are computed from warehouse data, custom traits are created from source events you pass into Segment and have no trait limits.
View the table below to better understand how Segment collects custom, computed, and SQL traits.
You can use the Profile explorer (Unify > Profile explorer) to view traits attached to a profile.
Here’s the payload of a typical Identify call with custom traits (with mostcommon fieldsremoved):
And here’s the corresponding JavaScript event that would generate the above payload:
Any source event where there’s atraitsobject and key value pairs generates custom traits.
Custom traits are mutable and update to the latest value seen by the user’s Identify events.
When an audience that previously generated Identify events is deleted, the data for the audience key is still attached to profiles that entered the audience and becomes visible in Segment as a custom trait.
Segment has reserved some custom traits that have semantic meanings for users, and will handle them in special ways. For example, Segment always expectsemailto be a string of the user’s email address. Segment sends this on to destinations likeMailchimpthat require an email address for their tracking.
Only use reserved custom traits for their intended meaning.
Reserved custom traits Segment has standardized:
To learn more about using an Identify call to tie custom traits to profiles,visit Segment’s Identify documentation.
This page was last modified: 12 Apr 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Custom Traits
Comparing trait types
Using custom traits
Reserved custom traits
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/sql-traits/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
SQL Traits End of Sale
SQL Traits entered End of Sale as of March 31, 2024. Existing Segment customers will continue to have access to SQL Traits, but Segment will no longer offer SQL Traits to new customers. Segment recommends usingReverse ETLto sync your data into Segment.
Use SQL Traits to import user or account traits from your data warehouse back into Unify or Engage to build audiences or to enhance data that you send to other Destinations.
SQL Traits are only limited by the data in your warehouse. Because anything you can write a query for can become a SQL Trait, you can add detail to your user and account profiles, resulting in more nuanced personalization.
This unlocks some interesting possibilities to help you meet your business goals.
Check out Segment’sSQL Traits blog postfor more customer case studies.
To view SQL Traits in a user profile, you must havePII access. Without this access, Segment redacts all SQL traits in a profile.
Note that after you bring in data with SQL Traits, changing data types for fields may not be compatible with all destinations.
SQL Traits allow you to import data fromobject cloud sourceslike Salesforce, Stripe, Zendesk, Hubspot, Marketo, Intercom, and more. For example, bring in Salesforce Leads or Accounts, Zendesk ticket behavior, or Stripe LTV calculations.
The two examples below show SQL queries you can use to retrieve cloud-source information from your warehouse.
Salesforce lead import
If you want to import data from the Salesforce leads and contacts table, you can use SQL similar to the following query:
Has Open Ticket in Zendesk
This query computes whether a user has an open ticket:
View the table below to better understand how Segment collects custom, computed, and SQL traits.
You can use the Profile explorer (Unify > Profile explorer) to view traits attached to a profile.
To use SQL Traits, you need the following:
Segment supports Redshift, Postgres, Snowflake, Azure SQL, and BigQuery as data warehouse sources for SQL Traits. Note that the BigQuery setup processrequiresa service user.
Safeguard your data
For any warehouse, Segment recommends that you create a separate read-only user for building SQL Traits.
If you don’t already have a data warehouse, use one of the following guides to get started:
To connect BigQuery to Segment SQL Traits, follow these instructions to create a service account for Segment to use:
Navigate to the Google Developers Console.
Click the drop down to the left of the search bar and select the project that you want to connect.
Note: If you don’t see the project you want in the menu, click the account switcher in the upper right corner, and verify that you’re logged in to the right Google account for the project.
Click the menu in the upper left and selectIAM & Admin, thenService accounts.
ClickCreate Service Account.
Give the service account a name likesegment-sqltraits.
UnderProject Role, addonlytheBigQuery Data ViewerandBigQuery Job Userroles.
IMPORTANT: Do not add any other roles to the service account. Adding other roles can prevent Segment from connecting to the account.
ClickCreate Key.
SelectJSONand clickCreate.
A file with the key is saved to your computer. Save this; you’ll need it to set up the warehouse source in the next step.
You’re now ready to create a new BigQuery warehouse source, upload the JSON key you just downloaded, and complete the BigQuery setup.
Once your warehouse is up and running, follow these steps:
Navigate to the Engage settings (Engage > Engage Settings > Warehouse Sources), and clickAdd Warehouse Source.
Select the type of warehouse you’re connecting.
In the next screen, provide the connection credentials, and clickSave.
If you’re connecting a BigQuery warehouse, use the JSON key file that you downloaded as the last step.
Before you create a SQL Trait, you must first preview it to validate your query. If you’re new to SQL, try out one of the templates Segment offers.
From the Audiences viewer, go to the Computed Traits tab, and clickNew Computed Trait. Next, choose SQL, and clickConfigure. Select the data warehouse that contains the data you want to query.
If you’re sending data fromobject cloud sourcesto your warehouse, the SQL Traits UI has some pre-made templates you can try out.
When you’re building your query, keep the following requirements in mind for the data your query returns.
A successful preview returns a sample of users and their traits.
If Segment recognizes a user already in Engage, it displays a green checkmark on their profile. Clicking the checkmark displays the user’s profile. If a user has a question mark, Segment hasn’t detected thisuser_idin Engage before.
Once you’re ready to import the SQL Trait, select the Destinations to which you want to send the data.  If you prefer to build Engage audiences directly from the data instead of sending it to a Destination, clickSkip.
Give your SQL Trait a descriptive name. If you’re importing multiple Traits, use a name like “Zendesk Traits”. The Trait names you use in audience-building or in your downstream tools correspond to the column names from the query.
If you’re building Engage audiences from this data, select “Compute without enabled destinations”.
ClickCreate Computed Traitto save the Trait.
CheckCompute without destinationsif you only want to send to Engage.
When you create a SQL Trait, Segment runs the query on the warehouse twice a day by default. You can customize the time at which Segment queries the data warehouse and  the frequency, up to once per hour, from the SQL Trait’s settings.
For each row (user or account) in the query result, Engage sends an identify or group call with all the columns that were returned as Traits. For example, if you write a query that returnsuser_id, has_open_ticket, num_tickets_90_days, avg_zendesk_rating_90daysSegment sends an identify call with the following payload:
Yes. The result set is capped at 25 million rows.
For each SQL Trait you create, you can set a compute schedule to query the data warehouse up to once per hour. Your query may run at any given time during the hour you select.
You can query based onemail,user_id, oranonymous_id. If Segment doesn’t locate a match based on the chosen identifier, it creates a new profile. See more below.
Yes. The Engage engine sends an identify call if there is no match between the identifier you chose and an existing record. When this happens, Segment creates a new user profile. This identify call takes place in the back-end and doesn’t show up in your Debugger.
No. Engage only sends an identify/track/group call if the values in a row have changed from previous runs.
If you’re importing a large list of users and traits, you’ll need to consider your API call usage as well as volume among the partners receiving your data. These vary depending on Segment’s partners,contact supportfor more information.
Yes, Segment limits request sizes to a maximum of 16KB. Records larger than this are discarded.
No, SQL Traits supports string and numeric data types. You can cast arrays as a comma-separated string. In this case, if you used this trait to build an audience, you could check if the array contains a certain value with the “contains” operator, but the value is sent to any connected destinations as a string.
After a SQL trait has been created, you can’t change its Warehouse Source. You’ll need to create a new trait if you want to change the Warehouse source.
If a user was present in one computation, but it is no longer present in the following one, the SQL trait will detect this difference and nullify all trait values for the user.Contact Segmentif you have a use case which calls for an exemption from this default behavior.
You might encounter apermission denied for schemaerror, like the following:
Segment usually displays this error because you’re querying a schema and table that the current user cannot access. To check the table privileges for a specific grantee (user), view the credentials of the stored warehouse user.
To grant access to a table, an admin usually needs to grant access to both a schema and table through the following similar commands:
Learn more about granting permissions using the following links:
Segment supports returning only 25 columns.Contact Segmentwith a description of your use case if you need access to more than 25 columns.
Each query row must correspond to a unique user. Segment displays this error if it detects multiple rows with the sameuser_id. Use adistinctorgroup bystatement to ensure that each row has a unique user_id.
Question marks in previews indicate one of two things:
1. Segment doesn’t recognize thisuser_id/group_idin Engage.
In this case, for sources connected to Engage, Segment hasn’t received any event (for example, identify, track, or page) with thisuser_id. This could still be a legitimateuser_idfor a number of reasons, but before syncing, make sure you rule out option two (below), as sending a different identifier as theuser_idcan corrupt your identity graph.
2. You have the wronguser_idcolumn.
You might be returning a value foruser_idthat’s inconsistent with how you trackuser_idelsewhere. Some customers want to returnemailas theuser_id, or a partner’s tool ID as theuser_id. These conflict with Segment best practices and corrupt the identity graph if you then trackuser_iddifferently elsewhere in your apps.
If you see only question marks in the preview, and have already tracked data historically with Segment, then you likely have the wrong column. If your cloud source doesn’t have the databaseuser_id, Segment recommends using aJOINclause with an internal users table before sending the results back to Segment.
Segment added the compute schedule feature on Feb 8, 2021, so traits created prior to this date will not have this option. If your trait lacks this feature, recreating it will make it available.
Check that you’ve configured the identifier that uniquely identifies users in a SQL query (user_id,anonymous_id,email, orgroup_idfor account traits) in Identity Resolution settings as an identifier. This ensures the trait is added to the user’s profile with the correct identifier. If you don’t configure the identifier in Identity Resolution settings, the trait’s value is not added to the user profile.
Ensure that the name given to the SQL trait is not the same name as the identifier or column name from the query. To use SQL traits to update an identifier, the identifier will need to be a column in the query of your SQL trait. The column name in the query of the SQL trait should be the one that Identity Resolution uses to generate the identifier.
If you experience issues saving the SQL Trait query or previewing the results of the SQL Trait query, open the browser’s Console and Network tabs to see if any errors occurred upon clicking the Save/Preview buttons. If you find any errors, please expand the error and take a screenshot of it. You can then share these details when creating a support ticket.
To see error messages in SQL traits, you will need to have PII Access.
The SQL Trait edit will apply to its next scheduled computational run. If the edit was made too closely to its next scheduled run, then its changes will be applied to the subsequent scheduled run, at which point you’ll see those updates reflected on its user’s profiles.
The SQL Trait resync will apply to its next scheduled computational run. If the resync was made too closely to its next scheduled run, then its changes will be applied to the subsequent scheduled run, at which point you’ll see those updates reflected on its user’s profiles.
This page was last modified: 08 Aug 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
SQL Traits
Example: cloud sources sync
Comparing trait types
Configure SQL Traits
Step 1. Set up a warehouse source
Redshift, Postgres, Snowflake, Azure SQL setup
BigQuery setup
Step 2. Add the warehouse as a Source
Create a SQL Trait
Preview the SQL Trait
Configure SQL Trait options
FAQs
Is there a limit to the result set that can be queried and imported?
How often does Segment query the customer’s data warehouse?
What identifiers can I use to query a list?
Can I use SQL Traits to create users in Segment? Or do SQL Traits only append Traits to existing users?
Does Engage send identify/track/group calls on every run?
I have a large (1M+) query of users to import, should I be worried?
Is there a limit on the size of a SQL Trait’s payload?
Do SQL Traits support arrays?
Can I change the Warehouse Source after a SQL trait has been created?
What happens if a user is no longer returned by the SQL trait?
Troubleshooting
I’m getting a permissions error.
I’m seeing a maximum columns error.
I’m seeing a duplicateuser_iderror.
I’m seeing some users/accounts in my preview with question marks. What does that mean?
Why do some SQL Trait settings not have the “Compute schedule” option?
Why doesn’t the value of a SQL trait show in a user profile after a successful sync?
Why doesn’t the identifier updated by a SQL trait show the correct value found in the column?
Are there any errors in the browser’s Network or Console tab?
Why can’t I see error messages in SQL traits while other users can?
If I edit the SQL Trait query, when will that edit apply those changes?
If I request a resync for my SQL Trait, when will that resync run?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/traits/recommended-items/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
With Recommended Items, you can add personalized item recommendations as acomputed traitto each user profile.
Based on a user’s past interactions, this trait generates a list of up to 5 items, like products, articles, or songs, that each user is most likely to engage with.
Segment designed Recommended Items for cases where you want to personalize experiences, like email content, in-app recommendations, or website suggestions, to fit each user’s unique preferences.
On this page, you’ll learn how Recommended Items works, how to create a Recommended Item trait, and best practices to get the most out of your recommendations.
.
Recommended Items uses your interaction events (likeorder_completed,product_added, andproduct_searched) along with event metadata to generate personalized recommendations for each user. Here’s an overview of the process:
Once Segment attaches the recommendation array to a profile, you can use it to:
Before you begin
Before you create Recommended Item traits, you’ll first need to set up a Recommendation Catalog. The catalog setup process involves mapping your interaction events and providing product metadata to support recommendations. If you haven’t yet set up your Recommendation Catalog, follow the steps in theProduct Based Audiences documentation.
To create a Recommended Item trait:
Segment begins creating your new trait. This process could take up to 48 hours.
Suppose you’re managing a music streaming app and want to give each user personalized music recommendations based on their listening habits.
Here’s how you could configure this trait:
By setting up a trait like this, each user profile now includes personalized recommendations that reflect individual tastes. You can use these recommendations across a range of touchpoints, like in-app sections, personalized email content, or targeted messaging, to create a more engaging and customized user experience.
Keep the following in mind as you work with Recommended Items:
This page was last modified: 31 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Recommended Items
How Recommended Items works
Create a Recommended Items trait
Example use case: personalized album recommendations
Best practices
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/profile-api/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
The Segment Profile API provides a single API to read user-level and account-level customer data. Segment now allows you to query the entire user or account object programmatically, including theexternal_ids,traits, andeventsthat make up a user’s journey through your product.
You can use this API to:
This document has four parts:
Important: The Profile API is intended to be used server-side. You should not implement directly in client applications. See theBest Practicessection for more details.
Your access token enables you to call the Profile API and access customer data.
European Union requirements
To implement the Profile API in the European Union, you must complete the following steps within an EU workspace. View theregional Segment documentationfor more information.
Navigate to the API access settings pageUnify > Unify settings > API access.
Create yourAccess Tokenwith a name that describes your use case, for exampletesting/development. Take note of thespace IDvalue, you’ll pass this into the Profile API request URL in a later step.
ClickGenerate token. Copy the resultingAccess Tokenand store it in a file on your computer. You’ll pass in theAccess Tokeninto the Profile API for authorization as an HTTP Basic Auth username in a later step.
To query phone numbers that contain a plus sign (+), insert the escape characters%2Bin place of the plus sign.
For example, if aphone_numberidentifier has the value+5555550123, enterphone_number:%2B5555550123in your query.
If the field you’re using within the Profile API endpoint contains a value with a non-alphanumeric character, then the Profile API may respond with500error. In this case, seeW3’s ASCII Encoding Refernece, which lists the escape characters you can use to replace the non-alphanumeric character in the Profile API endpoint so that the Profile API will respond with a200 Success.
Prepare the request URL by replacing<space_id>and<external_id>in the request URL:https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<external_id>/traits
If you’re using the Profile API in the EU, use the following URL for all requests:
https://profiles.euw1.segment.com/v1/spaces/<space_id>/collections/users/profiles/<external_id>/traits
The response is returned as a JSON object which contains the queried user’s assigned traits.
Search by an External ID: You can query directly by a user’s user_id or other external_id.
https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<user_identifier>/events
External IDs: You can query all of a user’s external IDs such asanonymous_idoruser_id.
https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<user_identifier>/external_ids
TraitsYou can query a user’s traits (such asfirst_name,last_name, and more):
https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<external_id>/traits
By default, the response includes 20 traits. You can return up to 200 traits by appending?limit=200to the querystring. If you wish to return a specific trait, append?include={trait}to the querystring (for example?include=age). You can also use the?class=audience​or?class=computed_trait​URL parameters to retrieve audiences or computed traits specifically.
MetadataYou can query all of a user’s metadata (such ascreated_at,updated_at, and more):
https://profiles.segment.com/v1/spaces/<space_id>/collections/users/profiles/<external_id>/metadata
Search an account profile
If you’re sending group calls to Segment, you can now access your account profiles as well. Retrieve your account traits, computed traits, and audience traits by querying thegroup_idyou are interested in:
https://profiles.segment.com/v1/spaces/<space_id>/collections/accounts/profiles/group_id:12345/traits
Search for linked users or accounts
If you’re looking to find all the users linked to an account, you can search for an account’s linked users, or a user’s linked accounts.
https://profiles.segment.com/v1/spaces/<space_id>/collections/accounts/profiles/group_id:12345/links
The return limit for the/linksendpoint is 20 records, which you can request by appending?limit=20to the query string.
You can also request using cURL:
The Segment API is organized aroundREST. The API has predictable, resource-oriented URLs, and uses HTTP response codes to indicate API errors. Segment uses standard HTTP features, like HTTP authentication and HTTP verbs, which are understood by off-the-shelf HTTP clients.JSONis returned by all API responses, including errors.
Endpoint
European Union endpoint
The Profile API uses basic authentication for authorization — with theAccess Tokenas the authorization key. YourAccess Tokencarries access to all of your customer data, so be sure to keep them secret. Don’t share your Access Token in publicly accessible areas such as GitHub or client-side code.
You can create your Access Secret in your Unify settings page. Segment recommends that you name your tokens with the name of your app and its environment, such asmarketing_site/production. Access tokens are shown once — you won’t be able to see it again. In the event of a security incident, you can revoke and cycle the access token.
When you make requests to the Profile API, use the Access Token as the basic authentication username and keep the password blank. Base64 is a requirement for authentication. If you use a tool like Postman, or if you use the-uflag in a cURL request, this encoding occurs automatically. Otherwise, you’ll need to use Base64 to manually encode your Access Token.
If you’re using a Segment Function or Node.js you can format your header object to include authentication, like so:
Segment uses conventional HTTP response codes to indicate the success or failure of an API request. In general, codes in the2xxrange indicate success, codes in the4xxrange indicate an error that failed given the information provided (for example, a required parameter was omitted), and codes in the5xxrange indicate an error with Segment’s servers.
HTTP Status
Error Body
To ensure low response times, every Space has a default rate limit of 100 requests/sec. Please contactfriends@segment.comif you need a higher limit with details around your use case. For more information about rate limits, see theProduct Limitsdocumentation.
All top-level API resources have support for bulk fetches using “list” API methods. For instance you can list profiles, a profile’s events, a profile’s traits, and a profile’s external_ids. These list API methods share a common structure, taking at least two parameters:nextandlimit.
Each API request has an associated request identifier. You can find this value in the response headers, underRequest-Id.
If you need to contact Segment regarding a specific API request, please capture and provide theRequest-Id.
The Profile API supports the following routes. These routes are appended the Profile API request URL:
Retrieve a single profile’s traits within a collection using anexternal_id. For example, two different sources can set a differentfirst_namefor a user. The traits endpoint will resolve properties from multiple sources into a canonical source using the last updated precedence order.
This example retrieves a profile’s traits by an external id, like ananonymous_id:
Or auser_id:
Request
404 Not Found
200 OK
With?verbose=trueenabled:
Get a single profile’s external ids within a collection using anexternal_id.
Request
404 Not Found
200 OK
Get up to 14 days of a profile’s historical events within a collection using anexternal_id.
Request
404 Not Found
200 OK
Get a single profile’s metadata within a collection using anexternal_id.
Request
404 Not Found
200 OK
Get the users linked to an account, or accounts linked to a user, using anexternal_id.
Request
404 Not Found
200 OK
The Profile API doesn’t support CORS because it has access to the sum of a customer’s data. Segment also requests that you prevent the Access Token to the public, for example in a client-side application. Engineers implementing this API are advised to create a personalization service in their infrastructure, which other apps, websites, and services communicate with to fetch personalizations about their users.

If you want to display the most relevant blog posts given a reader’s favorite blog category:
Users who take a few minutes to read through an article on the blog will find posts recommended using their historical reading pattern including the post they just read.
Segment does not recommend usingexternal_idsas a lookup field that might contain personally identifiable information (PII), because this can make its way into your server logs that can be hard to find and remove. For this reason, Segment recommends against usingemailas anexternal_idfor Profile API use cases.
Segment typically sees p95 response times under 200ms for the/traitsendpoint, based on an in-region test inus-westto retrieve 50 traits. However, if you know which traits you’re looking for, Segment suggests you use the/traits?include=parameter to provide a list of traits you want to retrieve.
Another best practice to optimize performance in high-throughput applications is to use connection pooling. Your personalization service should share existing connections when making a request to the Profile API, instead of opening and closing a connection for each request. This additional TLS handshake is a common source of overhead for each request.
Segment recommends against blocking the page render to wait for a third party API’s response, as even small slow down can impact the page’s conversion performance. Instead, Segment recommends you to asynchronously request the data from after the page loads and use a server-to-server request for the necessary computed traits. Resulting computed traits can be cached for the second page load.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Profile API
Product highlights
Quickstart
Configure access
Find a user’s external id
Query the user’s event traits
Explore the user’s traits in the response
Explore more of the API
cURL
API reference
Authentication
Errors
Rate limit
Pagination
Request arguments
Response arguments
Request IDs
Routes
Get a profile’s traits
Query parameters
Examples
Get a Profile’s External IDs
Query parameters
Get a profile’s events
Query parameters
Get a profile’s metadata
Query parameters
Get a profile’s linked users or accounts
Best practices
Recommended implementation
Example workflow
External IDs
Performance
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/debugger/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
The Profile Source Debugger enables you to inspect and monitor events that Segment sends downstream.
Because Segment generates a unique source for every destination connected to a Space, the Debugger gives you insight into how Segment sends events before they reach their destination. Even when a destination is removed, you can’t delete and shouldn’t disable this source for Segment to function as designed. The source will be reused by Segment as needed.
The Debugger provides you with the payload information you need to troubleshoot potential formatting issues and ensure Segment sends events as your destinations expect.
Modifying or disabling these system-generated sources could result in unforeseen issues and data loss.
Turning off these sources might impede profile updates, while removing them could compromise the stability of the Engage space, potentially making it irrecoverable. To ensure the system’s integrity, Segment highly recommends leaving these sources enabled.
Navigate to the Debugger tab on the Unify settings page of the space you want to debug. Select the source you want to inspect in the Debugger.
The Debugger presents a stream of incoming events. The event inspector displays three tabs for each event:
Similar to the Connections Debugger, you can search through events using information contained within the event’s payload.
This page was last modified: 22 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Using the Profile Source Debugger
Working with the Debugger
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/insights/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
With Profiles Insights, you can troubleshoot event data with transparent insight into yourUnify profiles. View errors and violations, success logs, and an audit trail for events that flow into your profiles. You can also learn why certain issues occur, and take preventative action against future errors.
To get started with Profiles Insights, navigate toUnify>Profiles insights.
From the Profiles Insights page, you can navigate to these tabs:
Use the errors and violations tab to view and help you troubleshoot any errors or violations that have occurred in your space.
You can filter results by ID type, time range, specific violations, and more.
To filter byexternal_id, you must enter anexternal_idvalue in the search bar.

Errors occur when a message didn’t resolve to a profile because Segment didn’t find a matching identifier or the system behaved unexpectedly. Click on an error log to view the error and next steps that Segment recommends.
Profiles Insights flags the following error:
Profile Insights won’t surface errors if the event was dropped before entering Unify’sIdentity Resolution. Learn more aboutUnify ingestion limits.
Violations occur when incoming events don’t comply with yourIdentity Resolution Settings. For example, when Segment drops an anonymous ID (lower priority) to resolve an event based on a matching user ID (higher priority), it results in a violation.
Learn about identifier prioritiesin your Identity Resolution.
For any violations, Segment may drop lower priority identifiers or the identifiers that violate your Identity Resolution Settings. From the grid, you can click a log name to view the violation details and recommended next steps.
You can use theMessage Payloadtab to view raw messages for Track events and see exactly where the violation occurred.
Profiles Insights flags the following violations:
Success logs provide visibility into a profile’s journey from creation to the point of merging into other profiles.
Use the success logs to view:
You can filter results by ID type, time range, incoming event type, and more.
When you click a specific log, Segment displays merge or mapping details along with the message payload for Track events.
The Audit trail displays all audit actions that occur in your Unify space. This can include, for example, a user creating an access token or modifying Unify settings.
Click an audit log link to view the user who initiated the action, timestamp, and log details.
Profiles Insights can display up to 500 records and supports searches within a 30-day time frame.
This page was last modified: 23 Apr 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Profiles Insights
Getting started
Errors and violations
Errors
Violations
Success logs
Audit trail
FAQ
What are the record display and search time limits for Profiles Insights?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/csv-upload/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
You can use the Profiles CSV Uploader to add or update user profiles and traits. This page contains guidelines for your CSV upload and explains how to upload a CSV file to Unify.
Keep the following guidelines in mind as you upload CSV files:
Use theUpload CSVpage to upload a CSV file in your Segment space:
ClickDownload Templateto download a CSV template with identifier columns from your identity resolution configuration.
Enter values for the identifiers in your CSV file.
You can upload a CSV file in two ways:
Keep the following in mind as you fill out your CSV template.
You can use these characters in your CSV file:
àáâäǎæãåāçćčċďðḍèéêëěẽēėęğġgg͟hħḥh̤ìíîïǐĩīıįķk͟hłļľl̥ṁm̐òóôöǒœøõōřṛr̥ɽßşșśšṣs̤s̱sțťþṭt̤ʈùúûüǔũūűůŵýŷÿźžżẓz̤ÀÁ
ÄǍÆÃÅĀÇĆČĊĎÐḌÈÉÊËĚẼĒĖĘĞĠGG͟HĦḤH̤ÌÍÎÏǏĨĪIĮĶK͟HŁĻĽL̥ṀM̐ÒÓÔÖǑŒØÕŌŘṚR̥ɌSẞŚŠŞȘṢS̤S̱ȚŤÞṬT̤ƮÙÚÛÜǓŨŪŰŮŴÝŶŸŹŽŻẒZ
Use the Update History page to view CSV file uploads in your workspace over the last 30 days.
To view the Update History page:
The following table lists validation errors you may run into with your profiles and traits CSV upload:
This page was last modified: 12 Mar 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Add or Update Profiles and Traits with a CSV
CSV file upload guidelines
Upload a CSV file
1. Download your CSV template
2. Fill out your CSV file
3. Upload your CSV file
Work with the CSV template
Allowed CSV file characters
View Update History
Validation errors
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/unify-gdpr/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
AllSegment GDPR featuresapply to Unify.
Segment never shares or sells user data. Unify inherits Segment’s holistic approach to security and privacy, using 256-bit AES standard encryption to safeguard data stores both at rest and in transit.
End-user privacy and the GDPR principles informed the design of Unify, a product powered by first-party data. Unify integrates Segment’s existing end-user privacy features with several user rights:
Below, learn how each of these rights protects the integrity of users and their data.
Using Segment’s platform, you canmanage user deletionacross all Segment products and supported Destinations. User deletion requests remove user data from all internal Segment archives and environments, including Engage audiences, within 30 days.
Withone-click suppression, you can block data collection for specific users. Segment discontinues profile building around suppressed users and prevents them from joining future audiences.
When Segment receives new information, the platform updates user profiles and traits in both Segment and its downstream tools. Use theProfile APIto confirm that an update has been processed.
Identity Resolutionconnects information you’ve gathered about a customer into a single profile. Using the Profile API, you can provide end users with this data. You can also enable raw data integrations and warehouses to share a user’s data in a structured format.
Visit the Segment site to learnhow Segment products simplify GDPR compliance, and reference Segment’scomplying with the GDPRdocumentation to incorporateGDPR best practicesinto your workflow.
This page was last modified: 28 Mar 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Unify and GDPR
User Rights
Right to Erasure
Right to Object
Right to Rectification
Rights to Access and Portability
Next Steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/faqs/
Paragraphs:
Unify requires a Business tier account and is included with Engage.See theavailable plans, orcontact Support.
On this page
Yes, Identity Graph supports multiple external IDs.
Identity Graph automatically collects a rich set of external IDs without any additional code:
If you want Identity Graph to operate on a different custom ID, you can pass it in usingcontext.externalIdson anIdentifyorTrack call. If you’re interested in this feature, contact your CSM to discuss the best way to implement this feature.
Segment analyzes each incoming event and extracts external IDs (likeuser_id,anonymous_id,email). The simplified algorithm works as follows:
All Profile matching is deterministic and based on first-party data that you’ve collected.
Segment doesn’t support probabilistic matching. Most marketing automation use cases require 100% confidence that a user is who you think they are (sending an email, delivering a recommendation, and so on). The best way to support this is through a deterministic identity algorithm.
If two merged user profiles contain conflicting profile attributes, Segment selects the newest, or last updated, attributes when querying the profile.
Any of the external IDs can be used to query a profile. When a profile is requested, Segment traverses the merge graph and resolves all merged profiles. The result is a single profile, with the latest state of all traits, events, and identifiers.
No. As the Identity Graph uses external IDs, they remain for the lifetime of the user profile.
No. Alternatively, you may delete the entire user profile from Segment using aGDPR deletion request.
Segment determines the Monthly Tracked Users (MTUs) count by the number of unique user IDs and anonymous IDs processed, regardless of how you manage these profiles in Unify and Engage. This count is taken as events are sent to Segment, before they reach Unify and Engage. Therefore, the creation of new profiles or the merging of profiles in Unify doesn’t affect the MTU count. The MTU count only increases when you send new unique user or anonymous IDs to Segment.
TheProfile Explorerretains event details for a period of up to 2 weeks. If you need event information beyond this timeframe, Segment recommends usingProfiles Syncfor comprehensive event analysis and retention.
Yes, you can remove a trait from a user profile by sending an Identify event with the trait value set tonullin the traits object from one of your connected sources. For example:
Setting the trait value to an empty string won’t remove the trait, like in this example:
Instead, this updates the trait to an empty string within the user profile.
This page was last modified: 18 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Unify FAQs
Does your identity model support multiple external ID types?
How does Unify handle identity merging?
Is all matching deterministic, or is there any support for probabilistic matching?
What happens to conflicting and non-conflicting profile attributes?
What identifiers can the merged profile be queried/updated with?
Can external IDs be changed or removed from the profiles?
Can I delete specific events from a user profile in Unify?
How does profile creation affect MTUs, particularly where a profile isn’t merged with the parent profile due to exceeding the merge limit?
What is the event lookback period on the Profile Explorer?
Can I remove a trait from a user profile?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/unify/product-limits/
Paragraphs:
Unify Plus requires a business tier account and is included with EngageSee theavailable plans, orcontact Support.
On this page
Beginning November 6, 2024, new Unify Plus and Engage users can refer to this page for Segment’s product limits. Existing users prior to this date can continue to refer to the Engage product limits in theEngage Default Limitsdocumentation.
To provide consistent performance and reliability at scale, Segment enforces default use and rate limits within Unify. Most customers do not exceed these limits.
To learn more about custom limits and upgrades, contact your dedicated Customer Success Manager orfriends@segment.com.
Unify Plus customers receive the following based on their signup date:
Unify Plus limits vary based on your Engage plan:
Visit Segment’spricing pageto learn more.
These limits are set per each Unify/Engage Space.
Unify will silently drop events if:
This page was last modified: 05 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Unify Limits
Unify Plus limits
Default limits
Audiences and Computed Traits
SQL Traits
Profile API
Identity
Unify ingestion limitations
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Powered by real-time data, Twilio Engage is a customizable personalization platform with which you can build, enrich, and activate Audiences.
Engage Channels builds on top of these Audiences, helping you connect with and market to your customers through email, SMS, and WhatsApp campaigns.
Engage usesSegment Identity Resolutionto take event data from across devices and channels and intelligently merge it into complete user- or account-level profiles. This gives your organization a single view of your customer base. To learn more, read theIdentity Resolution documentation.
Support teams rely on Segment's unified profiles to make real-time and informed decisions about customers when answering tickets or taking support calls. Read about how the support team at Frame.io reduced ticket response time by 80%.
Add detail to user profiles with new traits and use them to power personalized marketing campaigns. You can add new traits to your user or account profiles in Engage using:
Create lists of users or accounts that match specific criteria. For example, after creating aninactive accountsaudience that lists paid accounts with no logins in 60 days, you can push the audience to your analytics tools or send an SMS, email, or WhatsApp campaign with Engage Channels. Learn more aboutEngage audiences.
Once you create your Computed Traits and Audiences, Engage sends them to your Segment Destinations in just a few clicks. You can use these Traits and Audiences to personalize messages across channels, optimize ad spend, and improve targeting. You can also use theProfile APIto build in-app and onsite personalization. Learn more aboutusing Engage dataand theProfile API.
Marketing teams use Engage to run real-time multi-channel marketing campaigns based off specific user attributes they've computed in Engage. Read about how Drift used Engage to increase prospect engagement by 150% in two months.
To send email, SMS, and WhatsApp campaigns with Engage Channels, you’ll connect aTwilio messaging service,SendGrid subuser account, andWhatsApp messaging serviceto your Segment Engage space. Use existing accounts, or create new ones.
View theonboarding stepsfor more on how to connect Twilio and SendGrid accounts.
Use Engage to build email, SMS, and WhatsApp campaigns withinJourneys. Send campaigns tosubscribed usersbased on event behavior and profile traits. Withmessage analytics, you can track the performance of your campaigns.
Send Email:Build email campaignswith existing templates, or create a new email template within Journeys. Before you send the email, test the template and setconversion goals.
Send SMS messages:Build SMS campaignsto message users in real-time as a step in a Journey. For example, create an abandoned cart campaign that texts users a reminder to complete their purchase, along with a promo code. Addmerge tagsand set conversion goals.
Send WhatsApp messages:Build WhatsApp campaignsthat deliver messages to your customers on the world’s most used messaging app.
To learn more, visit theCSV Uploaderdocumentation.
Build personalizedemail,SMS, andWhatsApptemplates in Twilio Engage for use in your campaigns. Design email templates with a WYSIWYGDrag and Drop Editoror theHTML Editor. Engage saves the templates for you to preview, edit, and reuse throughout Journeys.
Insert real-time user profile traits from merge tags to personalize each message. For example, address recipients by name or highlight new products from a user’s favorite brand.
Use the CSV uploader to add or update user profiles andsubscription states. To learn more, visit theCSV Uploaderdocumentation.
Set user subscription states in two ways:
Use Engage to add subscription states to user email addresses and phone numbers. Subscription states help determine which users you can send campaigns to in Engage. You can set user subscription states with aCSV file upload, or programmatically with Segment’sPublic API.
With analytics in Engage, you can monitor real-time conversion data. Track message performance and customer interaction beyond clicks and opens. Use campaign dashboards to view events such asEmail Delivered,Unsubscribed,Spam Reported, and more.
For each message step in a Journey, you can set conversion conditions with events and properties in your Segment space. Then, define a duration after message delivery to track goals.
For example, track users who perform the eventOrder Completedwith a promo code that you send them.
VisitMessage Analyticsto learn more.
This page was last modified: 23 Aug 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Engage Introduction
What can you do with Engage?
Create unified customer profiles
Personalizing customer interactions
Enrich profiles with new traits
Build Audiences
Sync audiences to downstream tools
Personalizing marketing campaigns
Market to customers with Engage Premier and Channels
Send email, SMS, and WhatsApp messages in Journeys
Build Email, SMS, and WhatsApp message templates
Personalize with merge tags
CSV Uploader
User subscriptions
Message Analytics
Conversion Goals
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/quickstart/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
This guide walks you through the set up process for a simplified Engage space. If your implementation is complex, use this to demonstrate and test Engage before working on a more complex configuration.
The first four steps in this guide also apply to Unify set up. To learn more, visit theUnify Onboarding Guide.
Regional Segment
Engage Foundations is available on Segment’s regional infrastructure. For more information, see the articleRegional Segment.
Engage requires bothConnectionsandUnify.
The following are prerequisites to configuring and using Engage:
When you first start working with Engage, start by creating a “Developer” Engage space. This is your experimental and test environment while you learn more about how Engage works.
Invite teammates to your Engage dev space and grant them access to the space. Navigate toAccess Managementin your workspace settings to add them.
```Segment Source Details:
Details for replay:
All the events or only a subset of event names? Provide event names and/or method calls (page/identify/track/group) if only a subset of events is needed.
```
To learn more, visitConnect production sources.
After the replay finishes, you can see the data replayed into Engage using the Profile Explorer. Visit theProfiles Onboarding Guidefor more info.
You can build an audience using any source data that flows into your Engage space.
In this step, use the Audience Builder UI to create an Audience using properties you’re familiar with. For example, you might know the number of new website user signups in the last seven days, if you’ve connected your production website source to Engage.
To build your own audience:
After you build your audience, clickPreview Resultsto see the total number of users who meet the audience criteria, for example all users who signed up within the last seven days.
After you create your test audience, clickSelect Destinations. Engage guides you through configuration steps to set up a destination for your audience. If you don’t already have destinations configured for the Engage space, you are prompted to select one or more. Finally, enter a name for the audience.
The larger the audience you’re creating, the longer it takes Engage to successfully compute the Audience. The Audience page shows a status that indicates if the audience is still being calculated. When the total number of users appears in the Audience overview, as in the example screenshot below, the audience has successfully finished computing, and Engage then sends the audience to the destination you selected.

Audiences are either sent to destinations as a boolean user-property (for exampleNew_Users_7days=trueor a user-list, depending on what the destination supports. Read more aboutwhich destinations support which types of data.
The UIs for the destination tools you send the audience data to are different, so the process of validating the audience varies per tool. However, the guiding principle is the same. You should be able to identify the full group of users who are members of your audience in your destination.
After you validate that your full audience is arriving in your destination, you’re ready to create a Production space. Segment recommends that you repeat the same steps outlined above, focusing on your production use cases and data sources.
This page was last modified: 21 Jun 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Twilio Engage Foundations Onboarding Guide
Engage configuration requirements
Step 1: Create a new Developer space
Step 2: Invite teammates to your Engage space
Step 3: Connect production sources
Step 4: Check your profile data
Step 5: Create an Audience
Step 6:  Connect the Audience to a Destination
Step 7: Validate that your audience is appearing in your destination
Step 8: Create your production space
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/onboarding/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Twilio Engage brings Segment, Twilio, SendGrid, and WhatsApp together to help you create and send email, SMS, and WhatsApp campaigns to your customers.
Before sending your first Engage campaign, though, you’ll need to configure and connect accounts with all four platforms.
This guide lists all required onboarding steps and walks you through Engage setup. By the end of the onboarding process, you’ll be ready to send your first campaign.
The steps in this guide are only required if you plan to send email, SMS, and WhatsApp messages with Engage. Visit theEngage Foundations Onboarding Guidefor general onboarding steps to set up your Engage space, connect sources, create audiences, and more.
Regional Segment
You can use Engage Premier onSegment’s regional infrastructure in the EU. Twilio Engage ensures data residency in the EU, but the channels you connect to, may not guarantee the same level of data residency. Check directly with the providers of the channels you use for information about data residency in their applications. Native channels like email and SMS, which use Twilio, are not data resident.
Twilio is GDPR compliant, and hasBinding Corporate Rulesto ensure that data is protected when it’s transferred between countries.
You’ll set up Twilio Engage in four stages:
The following table shows a high-level checklist of tasks you’ll need to complete in each platform:
Several onboarding steps require copying and pasting information between Segment and SendGrid or Twilio. To streamline setup, open your Segment workspace in one browser tab and open two others for tasks you’ll carry out in SendGrid and Twilio.
Continue reading for a detailed, step-by-step breakdown of each onboarding stage.
Throughidentity resolution, Segment uses thephoneandemailtraits to identify users who can receive your Engage campaigns. To begin using Engage, you’ll need to verify that these identifiers exist in your workspace and add them if they don’t.
Follow these steps to configure the traits:
Your Segment workspace is now configured for Engage.  Next, you’ll create a SendGrid account and connect it to Segment.
SendGrid powers delivery of your Engage email campaigns. During this stage of onboarding, you’ll create and set up a SendGrid Pro account. You’ll then configure SendGrid and Engage to enable both subscription tracking and an event webhook.
Start by creating a SendGrid account and then upgrading to the SendGrid Pro Plan:
Upgrading to SendGrid Pro
Upgrading to a SendGrid Pro account may require additional action on your part. Follow the instructions inSendGrid’s account upgrade guideto complete your upgrade.
Next, you’llcreate a SendGrid subuserand ensure that a dedicated IP has been assigned:
In theCreate New Subuserwindow, create a username for the subuser, then add an email address and password. Your SendGrid subuser username must begin with the prefixtwilio_engage_app_. Add a unique identifier to the end of the prefix, for example,twilio_engage_app_someusername.

SendGrid parent account
In this section, you’ll authenticate your domain and set up reverse DNS with your SendGrid parent account.
Now, you’ll authenticate your domain with SendGrid and your DNS provider andenable link branding. Domain authentication protects your sending reputation by showing email providers that you’ve given SendGrid permission to send email campaigns for you.
To authenticate your domain, you’ll copy CNAME records given to you by SendGrid and paste them into your DNS provider.Before you begin, verify that you have the necessary permissions to add CNAME records to your DNS.If you’re not sure if you have the right permissions, reach out to your organization’s IT department.
You’ll authenticate your domain using the SendGrid platform and your DNS provider:
Complete authentication by setting up reverse DNS:
You’ll also need to enablesubscription tracking, which keeps records of users who unsubscribe from your email campaigns:
Subuser Step
This step takes place in thesubuserspace.
You’ll now need to enable event webhooks, which trigger webhook notifications for campaign-related events like clicks and opens:

Copying SendGrid Credentials
This step creates an API key and API Key ID that you’ll immediately add to Segment. Make sure you’re ready to copy and save the API key before proceeding; SendGrid only displays the API key once. You must follow these steps from within the SendGrid subuser accountyou created for use with Twilio Engage.
Re-using API Keys
It is not possible to re-use API Keys in different Engage spaces. For each space, a new API Key is required.
Now, you’ll generate an API key and API Key ID within SendGrid.With your SendGrid account open in one tab, open yourSegment workspaceopen in another. You’ll need both open to copy and paste the API credentials into your Engage settings.
SendGrid Subuser Step
Carry out the following steps in your SendGridsubuserspace.
To finish linking the API credentials to your Segment account, follow these steps:

If you already send emails regularly on your chosen IP, proceed toStage 3.
To finish configuring your SendGrid account for usage with Twilio Engage, you’llwarm up your IP. IP warmup protects your sender reputation and ensures that you avoid email deliverability issues.
As a best practice,only warm up your IP when you’re ready to begin sending campaigns.
You can enable automated IP warmup by following these steps:
Once you’ve enabled IP warmup, you’re ready to send as many campaigns as you’d like. SendGrid will begin sending your campaigns through a shared pool of IP addresses, including your own. Over the next 30 days, SendGrid will gradually increase the number of campaigns sent through your chosen IP. After 30 days, SendGrid will send all your emails from your dedicated IP.
Keep the following in mind once you’ve enabled automated IP warmup:
Once you’ve completed IP warmup, your SendGrid account will be fully configured and ready to use with Engage.  You’re ready to move to Stage 3 and set up Twilio SMS.
To add the ability to send SMS campaigns in Engage, you’ll now create a Twilio account, set up a phone number and messaging service, and generate an API key.
Phone Number Registration
You’ll need to purchase a phone number to set upTwilio Messaging. Depending on the phone number type you purchase, you may have to register the number. Before completing this section, read Twilio’s documentation onshort code,long code, andtoll free numbers.
Once you’ve identified the type of phone number you’ll use with Twilio Engage, follow these steps to create a Twilio Messaging Service:
Copying Twilio Credentials
This step generates an Account SID, API key SID, and API key secret that you’ll later add to Segment. Make sure you’re ready to copy and save both before proceeding.
Start by creating your Twilio account and getting an API key for Engage:
Copy and save both theSIDandSecretfield contents.

Return to the API keys & tokens page. In theLive credentialssection, copy the Account SID credentials.

UnderEnter your Twilio API Key information(shown below), paste the Account SID, API Key SID, and API Key Secret you copied above into their corresponding fields.

ClickVerify, then select the messaging services you want to use in your space.

If you’re unable to verify your Account SID, SID, or API Key secret, you may have copied an extra space at the end of one or the other. Verify that you’ve not added any extra characters or spaces, then try to verify again.
To send WhatsApp messages in Twilio Engage, you’ll register a Twilio number with WhatsApp, connect your Facebook account, and create a WhatsApp messaging service.
In the Facebook popup from the previous section, carry out these steps:
You’ll now create a messaging service to connect your number to Engage:
Your WhatsApp messaging service is now created.
You can use Engage Premier onSegment’s regional infrastructure in the EU. Twilio Engage ensures data residency in the EU, but the channels you connect to, may not guarantee the same level of data residency. Check directly with the providers of the channels you use for information about data residency in their applications. Native channels like email and SMS, which use Twilio, are not data resident.
Twilio is GDPR compliant, and hasBinding Corporate Rulesto ensure that data is protected when it’s transferred between countries.
With configured accounts and services for all platforms, you’ve completed Engage onboarding and are ready to create and send campaigns to your users.
Not sure where to start? Read the Engage documentation onsending email campaigns,SMS campaigns, andWhatsApp campaigns. To save time when generating Engage campaigns, check out the Engage guides on creatingSMS templates,email templates, andWhatsApp templates.
If you’re planning to import contacts to Engage, learn how toupdate your audiences with a CSV file.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Twilio Engage Premier Onboarding Guide
Before you begin: overview and task checklist
Stage 1: Configure Engage Identifiers in Unify
Stage 2: Create and configure a SendGrid account
Create your SendGrid Pro account
Create a subuser and check the dedicated IP address
Authenticate your domain
Enable subscription tracking
Enable event webhook
Generate an API key
Warm up your IP
Automated IP warmup
IP warmup best practices
Stage 3: Create and configure Twilio SMS services
Set up a Twilio Messaging Service
Generate an API key, and select your messaging service(s)
Stage 4: Create and configure Twilio WhatsApp services
Register a Twilio number with WhatsApp
Connect your Facebook account
Create the WhatsApp messaging service
Regional Segment
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/use-cases/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Use Twilio Engage to build personalized marketing campaigns and improve:
To help you get started with Engage, here are a few example campaigns.
This journey sends an exclusive promo code to repeat customers to promote ongoing loyalty.

Build similar campaigns with SMS or use both email and SMS to contact subscribed users on their preferred channels.
This journey sends purchase reminders to cart abandonment users based on the channels they’ve subscribed to.

This journey sends exclusive offers and onboarding emails based on user action.
This campaign sends personalized re-engagement email and SMS promo offers to low recency customers.
Use Engage to send one-time updates as part of a campaign.
This campaign sends a semi-annual newsletter to subscribed users.

This page was last modified: 21 Sep 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Use Cases for Twilio Engage Premier
Customer loyalty email campaign
Cart abandonment
Onboarding
Low recency campaign
Company updates and newsletters
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Segment associatessubscription stateswith each email address and phone numberexternal idin your audiences. Subscription states indicate the level of consent end users have given to receive your marketing campaigns.
Knowledge of subscription states will help you understand which users can and cannot receive your campaigns. This page provides an overview of user subscriptions.
Email addresses and phone numbers in your audience have one of the four following user subscription states:
It’s best practice to only send Engage campaigns to users with asubscribedstatus. However, if you need to send an email to someone who hasn’t subscribed, you can create an email campaign that yousend to all users.
To learn how Segment determines user subscription states, read theUser Subscription State documentation.
You can set user subscriptions manually when you upload contactsusing Engage’s CSV uploader. You can also use a CSV upload to correct contacts with outdated subscription states.
Most user subscriptions update programmatically, using Segment APIs. The Public API and the Identify call handle subscription state changes made when users sign up to or change their subscription status to your marketing materials with online forms or within notification centers.
View theSetting User Subscriptionspage to learn more about user subscription changes.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
User Subscriptions Overview
The Four Subscription states
Setting User Subscriptions
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/set-user-subscriptions/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Segment associates auser subscription statewith each email address and phone number in your Engage audiences. Subscription states give you insight into the level of consent a user has given you to receive your Engage campaigns.
You can set a user’s subscription state using a CSV file or, programmatically, using Reverse ETL or Segment’s APIs. On this page, you’ll learn how and when to use these processes.
Setting user subscriptions by uploading a CSV file proves useful when you’re importing batch contacts to Segment for the first time or when you need to change a specific user’s subscription status.
For example, you may want to add contacts to Segment using an audience list sourced from a third-party tool, or you may have gathered a large number of contacts from an in-person event.
To learn how to upload a CSV file to Segment, view theEngage CSV Uploader page.
To change the subscription status of an email or phone number with a CSV file, include at least one of the following user subscription columns next to the contact column:
These columns take the following values:
Engage accepts both uppercase and lowercase subscription status values.
Refer to theUser Subscription States documentationfor detailed explanations of each subscription state.
With Segment’s APIs, you can manage user subscriptions programmatically on a real-time basis. Use the APIs for ongoing subscription status updates, like when users subscribe to your marketing campaigns on a website form or modify their subscription from within a notification center.
To update Engage user subscriptions with Segment’s APIs, first choose betweenthe Identify call, for non-critical subscription updates, or thePublic API, for critical updates that require immediate confirmation, like unsubscribes.
When you use the Identify call, Segment replies with a standard HTTP200 OKstatus response code if it successfully received the request. Because the Identify call updates user traits asynchronously, though, the200 OKcode indicates that Segment has received, but not yet processed, the request. As a result, use the Identify call for non-critical subscription updates, like form signups on your website or adding a subscription from within the user’s notification center.
When you update user subscriptions with Segment’s Public API, however, you’ll get an immediate response that confirms that Segment both received and processed the request. Use the Public API, then, for unsubscribes, so users immediately find out if their subscription updated.
For Segment to process the subscription status request, your Identify call payload must include at least one object that contains an email address or phone number, its subscription type, and its subscription status. Engage accepts both uppercase and lowercase subscription statuses in Identify calls.
The following example payload shows an Identify call with acontextobject, which you’ll add to the Identify call to update user subscriptions. Thecontextobject contains amessaging_subscriptionsarray with three objects that update SMS, WhatsApp, and email subscription statuses:
For successful requests, Segment instantly updates subscription states in your workspace. You can then display successful updates or error messages with users in your notification center.
While SMS and WhatsApp share the same number, you must add a separate subscription state for both of them.
Engage Premier Subscriptions userscan use Reverse ETL to sync subscription data from warehouses to destinations. To get started with using Reverse ETL for managing subscriptions, seeReverse ETL for Engage Premier Subscriptions.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Set User Subscriptions
Setting user subscriptions with a CSV file upload
Subscription state CSV fields
Manage user subscriptions with Segment APIs
Choosing between the Identify call and the Public API
Format the Identify call payload
Setting user subscriptions with Reverse ETL
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/subscription-states/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Customer profiles in your Segment audiences containcontact vectors. A contact vector is a piece of unique, specific contact information associated with a customer, like the customer’s email address or phone number.
Segment associates one of fouruser subscription stateswith each contact vector in a customer profile. These subscription states indicate the level of consent customers give you to send them your marketing materials.
A customer profile, then, may have contact vectors with different subscription states. For example, a customer may consent to receive email campaigns but not SMS campaigns. Subscription states, then, describe permissions at the contact vector level, not at the customer level.
Understanding the four user subscription states helps you improve campaign deliverability and comply with sending guidelines and legislation. This page explains the four subscription states and how each impacts your sending ability.
The following table displays the four subscription states:
You can gain insight into your audience profiles by learning how and why each subscription state is associated with a user’s profile.  Below, you’ll find the four states described in detail, along with common scenarios that produce those states.
Asubscribeduser has, at some point, given you explicit permission to send them your marketing materials.
Subscribed users have intentionally requested to receive your marketing materials and have taken voluntary action to confirm that choice. You may have received this consent from a number of sources, including the following:
It’s your responsibility to ensure that Segment correctly reflects your users’ subscription choices. Failure to do so may put you in violation of legislation likeCAN-SPAM,TCPA, orGDPR.
Anunsubscribeduser has intentionally opted out of receiving your marketing materials. You cannot send Engage campaigns to unsubscribed users.
Users commonly unsubscribe in the following ways:
You must include an unsubscribe option in all Engage email and SMS campaigns.
Users with thedid-not-subscribestate associated with their email address or phone number gave you their contact information without explicitly agreeing to receive your marketing materials.
The following scenarios often lead to an email or phone number with thedid-not-subscribesubscription state:
Emails or phone numbers with adid-not-subscribestatus won’t receive your marketing campaigns.
Profiles withno subscription status, or a blank status, indicate that Segment has created a profile for the user, but that the user never actually provided their contact information. Some situations that lead to theno subscription statusstate include the following:
Some contacts within your Segment space may fall into the no subscription status category.Identity resolution, for example, may result in a user profile created from connecting an email address with an anonymous ID. In this case, the profile would exist within your audience despite the fact that the user never had the option to subscribe or unsubscribe.
You can set subscription states by either CSV file upload or, programmatically, with thePublic API.
Uploading contacts with a CSV file works best for initial batches of contacts you’d like to bring into Engage. Syncing programmatically with the Public API is best suited for real-time and ongoing subscription maintenance, like when a user signs up for a form on your site or unsubscribes from your marketing campaigns within their notification center or account settings.
To learn more about both options, reference the Engage documentation on using theCSV uploaderand setting user subscriptions.
Use SQL to import user subscription states from your data warehouse back to Engage. When you sync with SQL, you can query user subscription data at automated intervals. Pull subscription statuses for each contact vector and use your data warehouse as a single source of truth for subscription data.
This option is especially useful if you don’t have the ability to set subscription states with CSVs or Segment’s Public API.
ViewSubscriptions with SQL Traitsfor more information.
On occasion, a user’s subscription state may not be up-to-date. For example, a user may have unsuccessfully attempted to unsubscribe from your marketing campaigns.
The Public API will resolve most subscribe and unsubscribe requests in real time. In some circumstances, however, you’ll need to take action to update a user’s subscription state.  The following table lists some situations in which you may find a manual update useful:
Reach out to supportwith questions you may have about resolving a user’s subscription state.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
User Subscription States
Subscription states overview
Understanding subscription states
Subscribed
Unsubscribed
Did not subscribe
No subscription status
Setting user subscriptions
Sync subscription statuses with SQL
Troubleshooting subscription states
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/subscription-groups/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Subscription groups let your users choose the emails they want to receive from you. This page introduces subscription groups and explains how you can use them withEngage email campaigns.
A subscription group lets you send email campaigns to specific groups of users. Subscription groups also give your customers the ability to manage their email preferences, ensuring they only get emails they want to receive.
For example, you may want to create a subscription group that will receive only promotional email campaigns. Should a customer decide to opt out of your promotional campaigns, they’ll still be able to receive email campaigns from other subscription groups you’ve created and to which they’ve subscribed.
With subscription groups, your customers can opt in and out of groups on an individual basis instead of unsubscribing from all your campaigns.
Your customers will have the chance to opt in and out of subscription groups on both a subscription preferences page and on the landing page that launches when they unsubscribe.
Customers can access these pages through theunsubscribe and manage preference linksthat you include in youremail templates.

To use a subscription group, you’ll need to first create the group, add subscribers, then create a new email template.
Follow these steps to create a subscription group:
In addition to adding group subscribers when you first create a subscription group, you can also add subscribers to existing groups with a CSV file upload with these steps:
The following table lists validation errors you may run into with your CSV upload:
Use the Update History page to view CSV file uploads in your workspace over the last 30 days.
To view the Update History page:
Engage uses the following error codes on the report:
Please note the following limits as you upload CSV files to Twilio Engage:
To use subscription groups, you’ll need to create a new email template with new unsubscribe and manage preference links.
Once you’ve created a subscription group and added subscribers to it, follow these steps to send to the group:
Segment supports subscription groups for email. You can send statuses for email subscription groups using theIdentify call.
To set susbcription groups with the Identify call, you’ll need to include a key-value pair of"type": "EMAIL"and thegroupsobject, like in the following sample payload:
Your Engage space includes up to 25 subscription groups.
No. Templates you’ve previously created aren’t compatible with subscription groups. To use subscription groups, you’ll need to create new templates that include new unsubscribe and manage preference links.
If you delete a subscription group, Engage will still maintain the preferences of the group’s end users.
TheEngage Events Sourcetracks four subscription group events:Email Unsubscribed,Email Group Unsubscribed,Channel Subscription Updated, andGroup Subscription Updated.
If a user unsubscribes from all of your subscription groups, they’ll need to re-subscribe by explicitly opting back in to each group.
Yes. Test emails include fully functional unsubscribe and subscription preference links. If a test email recipient unsubscribes using a test email, Segment updates that user’s subscription state.
Test emails temporarily override an email subscription state. This means that an unsubscribed email address can receive a test email but won’t receive regular email campaigns from which they’ve unsubscribed.
Yes. Keep the following table in mind when you name a subscription group:

This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Subscription Groups
About subscription groups
What your users experience
Using subscription groups
Create a subscription group
Add group subscribers
Validation errors
View update history
Subscription group CSV upload limits
Create a new email template and send an email
Set subscription group status with the Identify call
FAQs
How many subscription groups can I have?
Can I use subscription groups with templates I’ve already built?
What happens if I delete a subscription group?
What subscription group events does the Engage Channels Source send?
How can users opt back in if they’ve unsubscribed from all groups?
Do subscription preference links work in test emails?
Should I follow any conventions when naming a subscription group?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/subscription-sql/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use Subscriptions with SQL Traits to connect to your data warehouse and query user subscription data to Engage on a scheduled basis. Use your data warehouse as a single source of truth for subscription statuses and query from warehouses such as BigQuery, Redshift, or Snowflake.
On this page, you’ll learn how to use SQL to sync subscription data from your warehouse to Engage.
Updating subscription statuses with SQL creates new profiles and updates existing profiles. These profile updates may lead to users entering existing audiences or message campaigns.
To use Subscriptions with SQL Traits, you need the following:
Segment supports Redshift, Postgres, Snowflake, Azure SQL, and BigQuery as data warehouse sources for SQL Traits. VisitSegment’s warehouse docsfor more on getting started with data warehouses.
Before you begin with Subscriptions with SQL Traits, you may also want to visit thesubscription docsto learn more about user subscriptions in Engage.
You can sync with SQL from two locations in the Segment app. Navigate toUnify > Profile explorerorEngage > Audiences > Profile explorer, then:
To configure Subscriptions with SQL Traits, you can write your own query or clickUse Templateto use one of the templates Engage provides. For any new users that your query returns, Engage adds a new profile.
ClickReset Templateto reset your SQL query.
Queries must return at least one pair of the columns below with a value ofsubscribed,unsubscribed, ordid_not_subscribe:
For more subscription SQL best practices, view thequery requirementsbelow.
Once you write your SQL query, clickSelect warehousefrom the Configure screen to select the data warehouse you’d like to query.
Before you schedule your sync intervals, clickPreviewto preview a subset of data and validate your results. To see subscription statuses for a particular profile, select a user row, then select the Identities tab.
You can schedule sync intervals to import subscription data from your warehouse to Engage:
SQL queries are executed directly to your data warehouse, which could generate additional costs for pay-per-query warehouses.
Use the Update History page to view all SQL jobs.
From the Update History page, you can view details for each SQL job including the creation date and time, compute status, and the number of users updated across all runs for a job. Click the job link to visit a particular SQL job Overview page.
When you build your SQL query, keep the following requirements in mind for the data your query returns.
Your query must:
Your query must not:
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Subscriptions with SQL Traits
Getting started
Sync subscription data with SQL
Configure your SQL query
Select a warehouse and preview your query
Schedule sync intervals
View SQL job history
Query requirements
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/user-subscriptions/csv-upload/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use the CSV Uploader to add or update user subscription states.
When you upload a CSV file, Engage adds new profiles and updates existing user profiles. Each CSV row corresponds to a user profile and columns to an identifier in youridentity resolution configuration.
You can alsoset subscription statesfor each email and phone number that you upload in the CSV. Subscription states help you track which email addresses and numbers you have permission to market to.
Uploading a CSV creates new profiles and updates existing profiles. These profile updates may lead to users entering existing audiences or message campaigns.
Using the CSV Uploader to upload user profiles to Engage willnotincrease your MTUs count.Learn moreabout MTUs and Engage.
Follow these steps to add subscribers with a CSV file upload
ClickDownload Templateto download a CSV template with identifier columns from your identity resolution configuration. Engage adds subscription columns next to email and SMS identifiers, where you can update subscription states for email addresses and phone numbers.
CSV files can only have a singleemailandphoneidentifier column. Include any additional email addresses or phone numbers for a user profile as a separate row.
Navigate toUnify > Unify settingsand select theIdentity resolutiontab to view or add identifiers in your Segment workspace.
Enter values for the identifiers in your CSV file. You can alsoset email, phone, and WhatsApp subscriptionsusing theemail_subscription_status,sms_subscription_status, andwhatsapp_subscription_statuscolumns.
A few best practices to keep in mind as you fill out your CSV:
Upload a CSV file to Twilio Engage in two ways:
Engage processes CSV rows sequentially. Column values, except for a blank subscription status, override previous values for a user profile.
A blank subscription status in the CSV doesn’t overwrite currentemailorphonesubscription statesin your Segment space.
Every time you upload a file, you have the option to add a custom trait to user profiles in the CSV. Use custom traits to help youcreate audiencesor send messages to a specific group of users. You can also add an existing custom trait name from your Segment workspace to the list of users in the CSV file.
Custom traitsdisplay in the Custom Traits tab of a user profile in the Profile explorer.
Use the Update History page to view CSV file uploads in your workspace over the last 30 days.
To view the Update History page:
View the status of the file upload and the custom trait name added to user profiles in the CSV upload. The error report only shows rows that Segment couldn’t successfully process.
Use error reports to fix invalid rows and quickly re-upload data.
From the Update History page:
Engage uses the following error codes on the report:
The following table lists validation errors you may run into with your CSV upload:
Use the CSV Uploader to set subscription states for user email addresses and phone numbers.
Each user profile in a Segment workspace can have multiple email addresses and phone numbers, all with different subscription states.
For each CSV file, Engage adds:
In theemail_subscription_status,sms_subscription_status, andwhatsapp_subscription_statuscolumns, set subscription states for email and phone numbers with the following values:
Engage accepts both uppercase and lowercase subscription status values.
Only contact users that subscribe to your communications. ViewUser Subscription Statesto learn more.
Segment recommends sending to subscribed users. If a recipient deletes or flags an unwanted message as spam, inbox providers might start to filter your messages straight to spam folders. View more SendGrid deliveryBest Practicesto prevent email from going to spam.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Update Subscriptions with a CSV
Upload a CSV file
1. Download your CSV template
2. Fill out your CSV file
3. Upload your CSV file
4. Name your custom trait
View Update History
Error reports
Validation errors
Set user subscriptions
Message consent
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/profiles/csv-upload/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
You can use the Profiles CSV Uploader to add or update user profiles and traits. This page contains guidelines for your CSV upload and explains how to upload a CSV file to Engage.
When you upload a CSV file, Engage generates internal Identify calls using Segment’s Tracking API and sends them into theEngage output source.
Keep the following guidelines in mind as you upload CSV files to Twilio Engage:
Use theUpload CSVpage to upload a CSV file in your Segment space:
ClickDownload Templateto download a CSV template with identifier columns from your identity resolution configuration.
Enter values for the identifiers in your CSV file.
Upload a CSV file to Twilio Engage in two ways:
Keep the following in mind as you fill out your CSV template.
You can use these characters in your CSV file:
àáâäǎæãåāçćčċďðḍèéêëěẽēėęğġgg͟hħḥh̤ìíîïǐĩīıįķk͟hłļľl̥ṁm̐òóôöǒœøõōřṛr̥ɽßşșśšṣs̤s̱sțťþṭt̤ʈùúûüǔũūűůŵýŷÿźžżẓz̤ÀÁ
ÄǍÆÃÅĀÇĆČĊĎÐḌÈÉÊËĚẼĒĖĘĞĠGG͟HĦḤH̤ÌÍÎÏǏĨĪIĮĶK͟HŁĻĽL̥ṀM̐ÒÓÔÖǑŒØÕŌŘṚR̥ɌSẞŚŠŞȘṢS̤S̱ȚŤÞṬT̤ƮÙÚÛÜǓŨŪŰŮŴÝŶŸŹŽŻẒZ
Use the Update History page to view CSV file uploads in your workspace over the last 30 days.
To view the Update History page:
The following table lists validation errors you may run into with your profiles and traits CSV upload:
This page was last modified: 03 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Add or Update Profiles and Traits with a CSV
CSV file upload guidelines
Upload a CSV file
1. Download your CSV template
2. Fill out your CSV file
3. Upload your CSV file
Work with the CSV template
Allowed CSV file characters
View Update History
Validation errors
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Audiences let you group users or accounts based on event behavior and traits that Segment tracks.
You can build Audiences from coretracking events,traits, andcomputed traits. You can then sync Audiences to hundreds ofDestinationsor access them with theProfile API.
You can build an Audience from existing events, traits, computed traits, or other Audiences.
TheInclude Anonymous Userscheckbox determines which external IDs need to exist on a profile for Segment to include the user in the audience:
Editing an audience before the initial backfill is complete can create technical errors.
Audience Keys
Avoid using the same Audience Key twice, even if you’ve deleted the original Audience.
You can build an Audience from any events that are connected to Engage, includingTrack,Page, andScreencalls. You can use thepropertybutton to refine the audience on specific event properties, as well.
The Audience builder doesn’t return every property value in the Constant value or Traits drop-downs. Segment displays a portion of values from the incoming data stream. However, if you don’t see the value you’re looking for, you can manually enter it.
Selectand not whoto indicate users that have not performed an event. For example, you might want to look at all users that have viewed a product above a certain price point but not completed the order.

You can also specify two different types of time-windows,withinandin between. Thewithinproperty lets you specify an event that occurred in the lastxnumber of days, whilein betweenlets you specify events that occurred over a rolling time window in the past. A common use case is to look at all customers that were active 30 to 90 days ago, but have not completed an action in the last 30 days.
You can also build audiences using Custom Traits, Computed Traits, SQL Traits, and audience memberships.
Custom traitsare user or account-specific attributes. You can collect these traits from your apps when a user completes a form or signs up using anIdentify call. You can view these traits in the Profile explorer. Custom Traits are mutable and update to the latest value seen by the user’s Identify events.
When you delete an audience that previously generated Identify events, the data for the audience key stays attached to profiles that entered the audience. This data then becomes visible in Segment as a custom trait.
You can also use computed traits in an audience definition. For example, you can create atotal_revenuecomputed trait and use it to generate an audience ofbig_spendercustomers that exceed a certain threshold.
Engage supports nested traits, but the Audience builder doesn’t support accessing objects nested in arrays. When you send arrays of objects, they are flattened into strings. As a result, the same conditions that work on strings will work on the array. Within the builder, you can only use string operations likecontainsanddoes not containto look for individual characters or a set of characters in the flattened array.
With SQL Traits, you can use data in your warehouse to build an audience. By running SQL queries on this warehouse data, you can import specific traits back into Segment to enhance both Segment audiences and the data you send to downstream destinations.
When you build an audience based on audience membership, you use existing audiences as criteria for creating new audiences. You can include or exclude profiles based on their membership in other audiences, allowing you to generate more specific audience segments.
You can use the following time comparison operators in your audience definition:
Only ISO timestamps can be used with these operators. Additionally, these time comparison operators exclusively apply to custom traits.
If the timestamp is not a valid ISO timestamp (for example, a trailingZis missing), Segment won’t process the audience in real-time. Learn more aboutreal-time compute compared to batch.
Note: Timezones seen in the UI are based on your local timezone, but are converted to UTC on the backend.
Funnel audiences allow you to specify strict ordering between two events. This might be the case if you want an event to happen or not happen within a specific time window, as in the following example:

Dynamic Property references give you more flexibility over funnel audiences. Instead of specifying a constant value in both events, likeproduct_id = 123for both Product Viewed and Order Completed events, you can specify that a child event references an event property of a parent event. You can also compare an event property to a trait variable.

If you have a B2B business, you might want to build an Audience of accounts. You can use both account-level traits that you’ve sent through theGroupcall, or user-level traits and events. For example, you might want to re-engage a list of at-risk accounts defined as companies which are on a business tier plan and where none of the users in that account have logged in recently. When incorporating user-level events or traits, you can specifyNone of the users,Any users, orAll users.
SeeAccount-level Audiencesfor more information.
You can send audiences and computed traits to third-party services in Segment’sDestinations catalog.
For step-by-step instructions on how to connect an audience to a destination, seeSend Audience Data to Destinations.
Because a number of factors (like system load, backfills, or user bases) determine the complexity of an Audience, some compute times take longer than others.
As a result,Segment recommends waiting at least 24 hours for an Audience to finish computingbefore you resume working with the Audience.
From the Overview page, you can view Audience details including the current compute status and a progress bar for real-time and batch Audiences. Engage updates the progress bar and status for real-time computations approximately every 10 minutes.
Viewing compute progress
When you create a real-time Audience, you’ll see a progress bar, computed percentage, and status updates. For existing Audiences that you edit, Engage displays the compute status but not the progress bar or percentage.
Engage syncs the Overview page for an individual audience more frequently than the Engage Audiences page (Engage > Audiences). As a result, you might see temporary discrepancies in Audience details, such as user counts, between these two pages.
For real-time computations, you can clickRefresh AudienceorRefresh Traitto update user counts, status, and compute progress.
Engage displays the following compute statuses for Audiences and Traits.
Real-time Compute allows you to update traits and Audiences as Segment receives new events. Real-time Compute unlocks exciting use cases:
Real-time Compute doesn’t support time window conditions. Segment creates Audiences using time window conditions as batch computations. Additionally, Segment createsFunnel Audiencesas batch computations.
To create a new Audience or Trait:
Go to yourComputed TraitsorAudiencestab in Engage and selectCreate.
While Engage is computing, use the Audience Explorer to see users or accounts that enter your Audience. Engage displays the Audience as computing in the Explorer until at least one user or account enters.
Facebook Custom Audiences,Marketo Lists, andAdwords Remarking Listsimpose rate limits on how quickly Segment can update an Audience. Segment syncs at the highest frequency allowed by the tool, which is between one and six hours.
Real-time computations connected to List destinations use a separate sync process that can take 12-15 hours to send changes present in the most recent computation.
Engage supports the editing of realtime Audiences and Traits, which allows you to make nuanced changes to existing Traits and Audiences in situations where cloning or building from scratch may not suit your use case.
To edit a realtime Trait or Audience, follow these steps:
Engage then processes your realtime Audience or Trait edits. While the edit task runs, the audience remains locked and you can’t make further changes. Once Engage incorporates your changes, you’ll be able to access your updated Audience or Trait.
If your audience includes historical data (Historical Backfill is enabled), editing an audience creates a new backfill task. The backfill task, and therefore the edit task, take longer to process if the audience is connected to a destination with rate limits. Rate-limited destinations dictate how fast Engage can backfill. View a list ofrate-limited destinations.
It is not possible to edit an audience to convert it from real-time to batch, or vice-versa. If the computation type needs to be changed, you will need to recreate the audience with the appropriate conditions.
You can’t edit an audience to include anonymous users. If you need to include anonymous profiles, recreate the audience with the appropriate conditions
You can access your Audiences using the Profile API by querying the/traitsendpoint. For example, you can query forhigh_value_userproperty with the followingGETrequest:
The query would return the following payload:
You can read thefull Profile API docsto learn more.
You can download a copy of your Audience by visiting the Audiences overview page.
Once Segment generates the CSV, you can download the file directly. You’ll receive an email notification of the CSV completion, with a URL to the Audience overview page.
Note the following limits for the CSV downloader:
Generating a CSV can take a substantial amount of time for large audiences. After you generate the CSV file, leave the modal window open while Segment creates the file. (If the audience recalculates between when you click Generate and when you download the file, you might want to regenerate the file. The CSV is a snapshot from when you clicked Generate, and could be outdated.)
You can’t add account traits and identifiers using the CSV downloader with account level audiences. This is because every row listed in the CSV file is a user, and since account traits and identifiers only exist on accounts, they wouldn’t exist as a user’s custom trait and appear on the CSV.
The audience summary is a breakdown of the percentages of external_ids of users in the audience. These are the default IDs that Segment includes in the Identity resolution configuration. Segment displays the percentage of the audience with each identifier, which you can use to verify the audience size and profiles are correct. The update of identifier breakdowns on profiles doesn’t occur in real time.
The Identifier Breakdown won’t show custom IDs included in the Identity resolution configuration. Segment only displays external IDs in the breakdown.
Segment recommends using the$operator when you deal with array properties. However, the$causes logical conditions to apply independently to each array entry independently. As a result, you’ll get more accurate results by using theequals one ofcondition:

The audience builder accepts CSV and TSV lists.
This error occurs when creating audiences that reference each other, meaning audience X refers to audience Y in its trigger condition, and later you attempt to modify audience Y’s trigger condition to refer back to audience X. To avoid this error, ensure that the audiences do not reference each other in their conditions.
Including historical data lets you take past information into account. You can only exclude historical data for real-time audiences. For batch audiences, Segment includes historical data by default.
This page was last modified: 22 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Engage Audiences Overview
Building an Audience
Events
Building audiences with traits
Custom Traits
Computed Traits
SQL Traits
Audience memberships
Time comparison
Funnel Audiences
Dynamic property references
Account-level audiences
Send audiences to destinations
Understanding compute times
Refresh real-time Audiences and Traits
Compute statuses
Real-time computations
Batch computations
Real-time compute compared to batch
Editing Realtime Audiences and Traits
Access your Audiences using the Profiles API
Download your Audience as a CSV file
Identifier Breakdown
FAQ
Why do I get a different user count when I use$on a field?**
How do I populate multiple items off a list for anequals one ofcondition? **
Why am I receiving the error “The audience would create a cycle by referencing another audience”?
How does the historical data flag work?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/linked-audiences/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Linked Audiences empowers marketers to effortlessly create targeted audiences by combining behavioral data from the Segment Profile and warehouse entity data within a self-serve, no-code interface.
This tool accelerates audience creation, enabling precise targeting, enhanced customer personalization, and optimized marketing spend without the need for constant data team support.
With Linked Audiences, you can:
To learn more about specific use cases you can set up with Linked Audiences, seeLinked Audiences Use Cases.
Before you begin setting up your Linked Audience, ensure you have:
To set up your Linked Audience, complete the following steps:
Linked Audiences allows you to filter based on properties likeprofile traits,relational datamapped to theData Graph,events, and existingaudiences.

To build a Linked Audience:
After creating your Linked Audience, you will be brought to the Overview page with the Linked Audience in a disabled state.
The linked audiences builder sources profile trait and event keys from the data warehouse. This data must be synced to the data warehouse throughProfiles Syncbefore you can reference it in the linked audience builder. If there is a profile trait that exists in the Segment Profile that hasn’t successfully synced to the data warehouse yet, it will be grayed out so that it can’t be selected.
The linked audience builder also returns a subset of available entity property key values, event property and context key values, and profile trait key values that you can select in the input field drop-down so that you don’t need to type in the exact value that you want to filter on. If you don’t see the value you’re looking for, you can manually enter it into the input field. 
Segment displays:
You can duplicate your conditions in the audience builder into the same condition group.You can only create nested entity conditions up to six levels in depth. For example, an entity condition that queries for relationships between Profiles, Accounts, Credit Cards, and Transactions has four levels of depth.
As you’re building your Linked Audience, you can choose from the following conditions:
The entity and event condition type supports these configurations: 
at least: supports 1 or greater,exactly: supports 0 or greater, 
at most: supports 0 or greater.
*When filtering by 0, you can’t filter on by entity properties or on additional nested entities.
You can create audience definitions using eitherANDorORoperators across all condition levels. You can switch between these operators when filtering on multiple entity or event properties, between conditions within a condition group, and between condition groups.
Example:

If you have defined entity conditions in your audience definition, you will see a “Matched Entities” tab in the audience preview to help you understand what entities qualified a user to be a part of an audience.
This information appears when you click the user profile generated from the audience preview. The contextual information encompasses entity relationships as well as entity column values that were used as filtering criteria in the audience definition. By default, Segment includes the entity ID. The data being returned is truncated - 10 entities at each level, 6 levels of depth. If you want to opt out of this functionality, contact Segment Support.

Event conditions
When filtering on event properties, you can dynamically reference the value of another profile trait, or enter a constant value. These operators support dynamic references: equals, not equals, less than, greater than, less than or equal, greater than or equal, contains, does not contain, starts with, ends with.
Entity conditions
When filtering on entity properties, you can dynamically reference the value of another entity column (from the same entity branch at the same level or above it), profile trait, or enter a constant value. You can only dynamically reference properties of the same data type. Dynamic references are supported for specific operators depending on the data type, as in the following table:
After you build your Linked Audience, you can send events to your chosen destinations and use them for personalizing your customer communications.
To activate your Linked Audience:
Destinationsare the business tools or apps that Segment forwards your data to. Adding a destination allows you to act on your data and learn more about your customers in real time. To fully take advantage of Linked Audiences, you must connect and configure at least one destination.
Linked Audiences destinations
Linked Audiences only supportsActions Destinations. List destinations aren’t supported.
Note:Ensure yourdestination has been enabledin Segment before you begin the steps below.
TheDestination Actionsframework allows you to see and control how Segment sends the event data it receives from your sources to actions-based destinations. Each Action in a destination lists the event data it requires and the event data that is optional. Segment displays available Actions based on the destination you’ve connected to your Linked Audience. You can see details of each option and how to use it in theActions Destinations Catalogdocumentation.
Select the Destination Action to call when the event happens, then clickNext.
Configure how and when events are produced with each audience run. Select the entities referenced in the audience builder to act as a trigger for your events.
After you select an action, Segment attempts to automatically configure the data fields that will be sent to the destination. You can review and adjust these settings before enabling this event.
Select additional traits and properties to include when the event is sent.
ClickCopy to use in Braze Cloud Mode (Actions)to copy the personalization syntax for the selected traits and properties to use in your destination messaging templates.
This feature is in beta for customers using Braze. Some functionality may change before it becomes generally available. This feature is governed by Segment’sFirst Access and Beta Preview Terms.
As you’re enriching your events in Linked Audiences, you should view a preview of the event payload schema based on the properties you select. It might look like the following:

Only required fields are displayed. All optional & pre-filled fields are hidden, though you can view hidden fields by clickingShow hidden fields.
These fields are pre-filled with properties configured by default.
Send a test event to ensure that everything is connected properly and your destination receives the event.
Enter the destination User id for the profile you want to use to test the event, then clickSend test event to destination.
The Event content drop-down shows you a preview of what the data sent to your destination might look like.
After building your Linked Audience, chooseSave and Enable. You’ll be redirected to the Audience Overview page, where you can view the audience you created. Segment automatically disables your audience so that it doesn’t start computing until you’re ready. A run is when Segment runs the audience conditions on your data warehouse and sends events downstream.
To enable your audience, select theEnabledtoggle, then selectEnable audience.
You can trigger a run for your audience if you want to send events to your destination without waiting for the next scheduled run. To do so, selectRun Now. This triggers a run for the audience and sends events downstream.
Use the Audience Overview page to view the audience profile count, current run schedule, run status, and upcoming run time.
Determine when an audience should run and send data to enabled destinations with a run schedule:
You can maintain your run schedule at any time from the audience’sSettingstab.
You can also clickRun Nowon the Audience Overview page at any time (even if the run schedule isIntervalOverviewDay and time) to manually trigger a run on your warehouse and send data to enabled destinations.
There may be up to a 5 minute delay from the configured start time for audiences that are configured with theIntervalandDay and timerun schedules. For example, if you configured an audience with theDay and timecompute schedule to run on Mondays at 8am, it can compute as late as Monday at 8:05am. This is to help us better manage our system load.
With your Linked Audience activated, follow these steps to monitor your activation:
Delivery Overview shows you four steps in your data activation pipeline:
You can maintain your Linked Audience by accessing these tabs on the main page of your Linked Audience:
This page was last modified: 21 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Linked Audiences
Prerequisites
Setting up Linked Audiences
Step 1: Build a Linked Audience
Linked Audience conditions
Operator selection
Entity Explorer
Dynamic references
Step 2: Activate your Linked Audience
Step 2a: Connecting to a destination
Step 2b: Select your Destination Actions
Step 2c: Define how and when to trigger an event to your destination
Step 2d: Configure the event
Enrich event
Copy personalization syntax
Show/hide preview
Map event
Step 3: Send a test event to your destination
Step 4: Enable your Linked Audience
Run Now
Set a run schedule
Step 5: Monitor your activation
Delivery Overview for Linked Audiences
Maintaining Linked Audiences
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/linked-audiences-limits/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Linked Audiences is an add-on to Twilio Engage. To useLinked Audiences, you must have access to Engage.
To provide consistent performance and reliability at scale, Segment enforces default use limits for Linked Audiences.
The Linked Audiences module provides you the flexibility to create and publish unlimited Linked Audiences within each billing cycle. This means you won’t encounter any limitations or pauses in service related to the number of Linked Audiences you generate.
Linked Audience limits are measured based on Activation Events, which is the number of times profiles are processed to each destination, including audience entered, audience exited, and entity change events. This includes both successful and failed attempts. For example, if you processed an audience of 50k to Braze and Google Ads Conversions, then your total Activation Event usage is 100k records.
Your plan includes a high limit of Activation Events, which ensures that the vast majority of users can use Linked Audiences freely without needing to worry about the limit.
To see how many Activation Events you’ve processed using Linked Audiences, navigate toSettings > Usage & billingand select theLinked Audiencestab. If your limit is reached before the end of your billing period, your syncs won’t automatically pause to avoid disruptions to your business. You may be billed for overages in cases of significant excess usage. If you consistently require a higher limit, contact your sales representative to upgrade your plan with a custom limit.
If you have a non-standard or high volume usage plan, you have unique Linked Audiences limits or custom pricing.
This page was last modified: 19 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Linked Audiences Limits
Usage limits
Product limits
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/account-audiences/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Account-level audiences are audiences for businesses that sell to other businesses. They return the set of accounts which match a combination of account-level traits, user-level traits, and user events. You can sync these accounts and associated users with downstream destinations.
You can use account-level audiences to accomplish the following use cases:
A single account-level audience can incorporate any combination of the following condition types:
To access account-level audience conditions:

The three types of user-level conditions are:
You can create conditions which operate on the set of events collectively triggered by all users associated with an account withaccount-level computed and SQL traits.
Workspaces with access to account-level audiences can create account-levelcomputedandSQLtraits. All user-level computed trait types are supported (see theTypes of computed traitsdocs for a full list). Account-level computed traits operate on the set of events triggered by all users associated with a given account.
Use-cases for account-level computed traits include:
Use SQL traits for complex calculations not supported by computed traits. For example, you would use SQL traits to calculate the number of unique users associated with an account who have logged in during the past month.
To associate users to an account with SQL traits, you must return both thegroup_idanduser_idin the account level SQL trait. This fires a Group call which Segment uses to add users to groups in destinations.
When a group (account) contains more than one user, the query returns duplicategroup_ids (mapped to uniqueuser_ids). However, Segment doesn’t return duplicategroup_ids in the account-level SQL trait. As a result, you can’t map users to accounts in a many-to-many situation.
Once created, you can connect account-level computed and SQL traits to downstream destinations. You can also use them as conditions in account-level audiences, enabling you to build audiences based on the set of events triggered by all users associated with a given account.
For example, you can create an audience which selects all accounts where users associated with the account have collectively logged in fewer than 10 times in the past 30 days. To accomplish this, you would:
Create an account-level event counter computed trait, selecting the “Logged In” event and specifying a time window of the past 30 days.
This computed trait will count all “Logged In” events collectively triggered by users associated with each account over the past 30 days, and append the resulting counts to each Account profile.
Create an account-level audience, containing a single condition using the new computed trait (for example,logins_past_30_days<10).
When you connect an account-level audience or trait to a destination, you select which events to send to the destination when the audience or trait is calculated. Each destination supports a subset of the following events:
Enable group calls when you want to update a destination’s account records based on audience membership. Enable identify calls when you want to update a destination’s user records based on audience membership.
Account-level audiences let you target all users associated with accounts that match your audience criteria. However, you may need to target a subset of users based on the traits of their associated accounts.
Account-level traits are not available in the user-level audience builder. However, account-level audience membership is available in user-level audiences through the “Part of an audience” condition. This enables you to use account-level audiences as a “passthrough” for account-level traits.
For example, you may wish to create an audience which selects all admin-level users associated with accounts in the software industry (for example,user.role=Admin AND account.industry=Software). To accomplish this, you would:
If you find that these limitations impede your ability to use account-level audiences, contactfriends@segment.comwith details about your use case.
This page was last modified: 12 Aug 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Account-level Audiences
Enable account-level audiences
Account-level audience conditions
Account-level computed and SQL traits
Use account-level SQL traits to associate users to an account
Use account-level computed and SQL traits as account-level audience conditions
Connect account-level audiences, computed traits, and SQL traits to destinations
Use account-level traits in user-level audiences
Known limitations of account-level audiences
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/generative-audiences/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
With Generative Audiences, part of Segment’s CustomerAI, use generative AI to create Engage Audiences with natural language prompts.
Describe your desired audience based on events performed, profile traits, or existing audiences in your workspace. Based on your prompt, Segment builds the audience with generative AI.
For more details on AI usage and data, seeGenerative Audiences Nutrition Facts Label.
In this article, you’ll learn how to use Generative Audiences along with some best practices.
To create an audience with Generative Audiences:
To help you write your prompt, view theseexample promptsandbest practices.
To use Generative Audiences, a workspace owner must first accept the Customer AI Terms and Conditions.
Once Segment generates the audience conditions, the prompt box remains open for reference. You can close this box, or modify your audience description and clickBuild with AIagain.
Modifying an audience description overwrites the existing conditions previously generated. You can also edit any conditions straight from the audience builder.
Use the following examples to help you get started with audience prompts.
To build an audience with customers who haven’t made a purchase in the last 30 days, enter:Customers who haven't purchased in the last 30 days.
To find all profiles that have recently opened an email, enter:Profiles that recently opened an email.
To build an audience with customers who spend over $50 on an order, enter:Customers who have orders greater than $50.
You’ll have more accurate results if you base your audience prompts on specific events and traits that are in your Segment space.
Below are a few examples of how CustomerAI configures audience conditions for negative prompts. Negative conditions might include, for example, building an audience of users without a certain profile trait, or who haven’t performed certain events.
As you use Generative Audiences, keep the following best practices in mind:
As you’re writing your prompt, you can view traits and events that are active in your workspace from the audience builder. After you add a condition in the builder, click the property field to view active and inactive traits or events in your workspace.
You can also use the Profile explorer (Unify>Profile explorer) to view specific events and traits associated with profiles in your Segment space.
Learn more aboutusing existing events and traitsto build audiences.
Due to alimited space schema, CustomerAI may not recognize some events or traits that are inactive in your workspace.
Engage uses the following error messages with Generative Audiences:
Segment’s generative AI service is handled by a third party that needs context about your Engage workspace and has limitations to how many contextual parameters Segment can send it.
Segment solves this limitation by including only the most recently used properties and values for events and traits within your Engage space. As a result, some event and traits within your workspace may not be recognized.
At this time, Segment only supports audience description prompts in the English language. Support in other languages is currently unavailable and might provide undesired results.
This page was last modified: 18 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Generative Audiences
Create an audience with Generative Audiences
Modify an audience description
Example prompts
Using negative conditions
Best practices
View events and traits in your workspace
Error handling
Known limitations
Limited space schema
Language support
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/generative-audiences-nutrition-facts/
Paragraphs:
Twilio’sAI Nutrition Factsprovide an overview of the AI feature you’re using, so you can better understand how the AI is working with your data. Twilio outlines AI qualities in Generative Audiences in the Nutrition Facts label below. For more information, including the AI Nutrition Facts label glossary, refer to theAI Nutrition Factspage.

AI Nutrition FactsGenerative Audiences
DescriptionGenerate user audiences from text instructions
Privacy Ladder Level1
Feature is OptionalYes
Model TypeGenerative
Base ModelOpenAI - GPT-4
Trust Ingredients
Base Model Trained with Customer DataNo
Customer Data is Shared with Model VendorNo
Training Data AnonymizedN/A
Data DeletionYes
Human in the LoopYes
Data Retention30 days
Input/Output ConsistencyNo
Other Resources
This page was last modified: 04 Mar 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Generative Audiences Nutrition Facts Label
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/product-based-audiences/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Product Based Audiences lets you select a product, article, song, or other piece of content from your catalog, and then build an audience of the people that are most likely to engage with it. Segment optimized the personalized recommendations built by Product Based Audiences for user-based commerce, media, and content affinity use cases.
You can use Product Based Audiences to power the following common marketing campaigns:
Segment utilizes your interaction events (order_completed, product_added, product_searched, song_played, article_saved) and the event metadata of those interaction events to power our CustomerAI Recommendations workflow.
To create your Recommendation Catalog:
Segment can take several hours to create your Recommendation Catalog.
Once you’ve created your Recommendation Catalog, you can build a Recommendation Audience. A Recommendation Audience lets you select a parameter and then build an audience of the people that are most likely to engage with that parameter.
To create a Product Based Audience:
Segment can take up to a day to calculate your Product Based Audience.
This page was last modified: 20 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Product Based Audiences
Create a Product Based Audience
Set up your Recommendation Catalog
Create your Product Based Audience
Best practices
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/product-based-audiences-nutrition-label/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
Twilio’sAI Nutrition Factsprovide an overview of the AI feature you’re using, so you can better understand how the AI is working with your data. Twilio outlines AI qualities in Product Based Audiences in the Nutrition Facts label below. For more information, including the AI Nutrition Facts label glossary, refer to theAI Nutrition Factspage.

AI Nutrition FactsCustomer AI Product Based Audiences
DescriptionCustomerAI Product Based Audiences lets customers improve marketing campaigns by segmenting users based on preferences like product, category, or brand to automate the creation and maintenance of personalized recommendations for businesses in the retail, media, and entertainment industries.
Privacy Ladder Level2
Feature is OptionalYes
Model TypePredictive
Base ModelAWS Personalize - Hierarchical recurrent neural network
Trust Ingredients
Base Model Trained with Customer DataN/A
Customer Data is Shared with Model VendorNo
Training Data AnonymizedNo
Data DeletionYes
Human in the LoopN/A
Data Retention30 days
Input/Output ConsistencyN/A
Other Resources
This page was last modified: 19 Sep 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Product Based Audiences Nutrition Facts Label
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/organization/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
To add structure to yourSpaces, you can organize Audiences into folders and clone Audiences within, and between, Spaces.
Folders allow you to group Audiences together. You can create, edit, and search through folders directly within the Engage Audiences page.
To create a Folder, follow the steps below:
To edit the name or description of a Folder you’ve created, click theMore Optionsicon and selectEdit. Once you’ve made your desired changes, clickSave.
To disband a Folder you’ve made, click theMore Optionsicon and selectDisband. Audiences from the disbanded Folder return to your main Audience list.
Disbanding folders does not delete audiences.
To move an Audience to a Folder you’ve already created, follow the steps below:
Audience cloning creates a copy of your Audience. You can clone an Audience within the same space, or clone an Audience to a different space.
To clone an Audience within the same Space, follow the steps below:
You may wish to clone an Audience between spaces for a number of use cases, including the following:
Note
When you clone an Audience to a different space, first verify that the target Space includes the same events and traits for the cloned Audience.
To clone an Audience between Spaces, follow the steps below:
If your target Space doesn’t include the cloned Audience’s events and traits, Engage prompts you to resolve the Space incompatibilities during Step 5.  As a best practice, verify that the target Space includes the Audience’s traits and events before cloning.
To delete an Audience, follow the steps below:
This page was last modified: 28 Jun 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Organizing Your Audiences
Working with folders
Creating a folder
Editing and disbanding folders
Moving Audiences into folders
Clone Audiences
Clone an Audience inside a Space
Cloning an Audience between Spaces
Delete an Audience
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/audiences/send-audience-data/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
With the help of sources and destinations in Segment’s catalog, you can create and send audiences and computed traits to third-party services.
Segment’s Connections pipeline first collects and sends events from your source to your destination. Built on top of Connections, Engage then uses the same source events to let you create audiences and computed traits within Segment. You can then send the audience or computed trait you’ve built to your destination(s).
Because Engage only sends audiences and computed traits to destinations, it doesn’t replace a standard event pipeline. Connect a source directly to a destination if you want the destination to receive all events that Segment gathers.
Once you’ve previewed your audience, you can choose to connect it to a destination or keep the audience in Segment and export it as a CSV file download.
When you create an audience, Segment starts syncing your audience to the destinations you selected. Audiences are either sent to destinations as a boolean user-property or a user-list, depending on what the destination supports. Read more aboutsupported destinationsin the Engage documentation.
For account-level audiences, you can send either aGroupcall and/orIdentifycall. Group calls send one event per account, whereas Identify calls send an Identify call for each user in the account. This means that even if a user hasn’t performed an event, Segment will still set the account-level computed trait on that user.
Because most marketing tools are still based at the user level, you’ll usually want to map this account-level trait onto each user within an account. SeeAccount-level Audiencesfor more information.
When you connect a new destination to an existing audience, Engage will backfill historical data for that audience to the new destination.
Follow these steps to connect an audience to a destination:
You can view a list of an audience’s connected destinations in the destination list table of the audience overview tab.

The Destinations table contains information about the destination’s matching mappings, status, and sync status.
Actions destinationshave mappings that can receive granular data from your audience. TheMatching mappingscolumn shows the number of mappings that match the data coming from the audience, as well as the number of enabled and disabled mappings. SeeWorking with mappingsfor more information.
The Matching mappings column will showNot applicablefor classic destinations.
TheDestination statuscolumn showsConnected,Disconnected, orDisabled:
TheSync statuscolumn shows the currentcompute statusbetween the audience and connected destination.
You can add and access mappings within your audience’s connected destination by following these steps:
Segment then returns you to the audience’s destination side panel, which shows your new mapping(s).
Use Segment’sDuplicate mappingsfeature to create an exact copy of an existing mapping. The copied mapping has the same configurations and enrichments as your original mapping.
This page was last modified: 11 Sep 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Send Audience Data to Destinations
Connect your audience to a destination
View connected destinations
Matching mappings
Status columns
Working with mappings
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Journeys, a feature of Engage, provides a way for marketers to personalize experiences through planning how and when to engage customers with the right campaigns and messages.
Journeys enable you to define steps in a user’s journey based on event behavior and traits. You can build Journeys from your tracking events, traits, computed traits, or audiences. At each step of a journey, you can send your list of users to any Engage-compatible destination.
Start with the visual builder to define entrance criteria, build out conditional branching logic, then focus messaging to drive conversion. Repeat purchase campaigns, trial conversions, and onboarding flows are great examples to get started from. For more information, seeBuild a Journey.
Connect destinations to your Journey to send events or user lists when users reach the corresponding step in the Journey. For more information, seeSend Journeys data to a Destination.
For information about best practices for getting started with Journeys, and to view frequently asked questions about Journeys, seeBest Practices and FAQ.
SeeExamples Journeys Use Casesfor examples of ways you can use Journeys in your marketing workflow.
For a list of key terms related to Journeys, seeJourneys Key Terms.
For information about Product Limits related to Journeys, seeProduct Limits - Journeys.
This page was last modified: 27 Sep 2022
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Overview
Get started
Send data to your destinations
Best practices and FAQ
Journeys use cases
Journeys glossary
Journeys Product Limits
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/build-journey/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Verify that you’ve connected at least one source to your Engage space, with events streaming in.
For more information, seeSetting up your Sources.
Segment recommends that your entry condition’s time window be shorter than or equal to anyexit settingsyou have. This prevents users from repeating your journey an excessive amount of times.
If you select theUse historical dataoption, Segment queries all historical data to generate a list of users who enter the Journey upon publication. If you don’t selectUse historical data, only users who satisfy the entry conditionafteryou publish enter the Journey.
YourUse historical dataselection won’t impact subsequent Journey steps.  Only future events and existing trait memberships trigger post-entry Journey steps.
Once you’ve created an entry condition, you can begin adding steps to your Journey.
Journeys offers the following steps:
For more details on each available Journey step, view theJourney step types documentation.
Once you’ve added steps, you’re ready to publish the Journey.
To publish and activate a Journey, clickPublish Journeyfrom the Journey Overview. You can also clickPublish Journeyin the bottom-right corner of the Journey Builder.
Some Journey features can only be edited before publication. For more information, see the difference between Draft and Published Journeys below.
Your Journey is now live. Next, you’ll learn about making changes to a published Journey.
You may find that you need to make changes to a published Journey, like adding new steps or pausing entry to the Journey. This section explains how to pause, resume, and clone a Journey so that you can modify it as needed.
Pausing a published Journey prevents new users from joining your Journey. Users already in the Journey, however, will continue their progress.
Follow these steps to pause a Journey:
Compute Limits
Because pausing only affects new Journey members, paused Journeys still count towards compute credit limits.
You can resume new user entries to a paused Journey at any time.
After you resume a Journey, users who meet the Journey’s entry conditions will join the Journey. New users will not enter the Journey, however, if they met its entry conditions while it was paused.
Follow these steps to resume entry to a paused Journey:
You can duplicate a Journey by cloning it.
Follow these steps to clone a Journey:
Segment then creates a draft of your Journey.
You can also clone a Journey from a Journey’s Overview by clicking the…icon.
Use the Journey archive setting when you want to end a Journey but preserve its data.
No new users enter archived Journeys, and progress stops for any users already in the Journey. Archived Journeys no longersend data to Destinations.
Steps in archived Journeys don’t count towards your compute credits.
You can apply exit settings to both single entry and re-entry Journeys. Users who exit a Journey leave all Journey steps and Destinations.
Configure exit settings during initial Journey setup by enabling exit settings and entering the number of days that should pass before users exit the Journey. Journeys exits users once this time passes.
If you don’t apply exit settings to a Journey, users will remain in the Journey indefinitely.
The Journeys re-entry setting allows users to repeat Journeys they’ve already exited. Common use cases for Journeys re-entry include the following:
To let users re-enter a Journey they’ve exited, you’ll need to enable two Journeys settings:
Journeys exits users based off of the exit time you configure. Users can re-enter the Journey once they meet the Journey’s entry condition again and your defined re-entry time has passed. You can configure re-entry time by hour, day, or week. Re-entry time begins once a user exits the Journey.
Suppose, for example, you enable re-entry for an abandoned cart campaign. You set exit to seven days and re-entry to 30 days. A user who abandons their cart will progress through the journey and exit no later than seven days after entering. Once 30 days after exit have passed, the user will immediately re-enter the journey if the user still satisfies the journey’s entry condition.
Ad-based exit settings
Exit settings you configure for theShow an ad stepdon’t impact other Journey steps. Users can exit an ad step but remain in the Journey.
To enable Journey re-entry for a new Journey, follow these steps:
When you’ve finished creating your Journey, clickSave as Draftin the bottom-right corner.
Keep the following in mind when working with a published Journey:
This page was last modified: 04 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Build a Journey
Before you begin
Adding the entry condition
Using historical data for the entry step
Available step types
Publishing a Journey
Working with a published Journey
Pausing and resuming a Journey
Resuming a Journey
Cloning a Journey
Archive a Journey
Journey exits and re-entry
Journey exits
Journey re-entry
Exit and re-entry times
Setting up re-entry
Drafting a Journey
When Journeys are in a draft state
About published Journeys
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/step-types/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
On this page, you’ll find information about the steps you can add to a Journey.
Journeys has two steps that you can use to determine how and when users move to the following step.
TheAdd a conditionstep defines the conditions that a user must satisfy to move from one step to the next. You can define new conditions or import conditions from an existing audience.
TheAdd a delaystep defines the length of time in minutes, hours, days, or weeks that a user must wait before moving to the next step.
Journeys offers four steps that help you control how users flow through your Journey.
A true/false split divides the previous step’s user group into two branches, based on Boolean logic against a defined condition. Users who satisfy the condition(s) move to theTruebranch. Otherwise, they move to theFalsebranch. To enforce mutual exclusivity, Journeys evaluates true/false conditions when a user reaches the relevant step.
You can add Step Names to describe the users who end up in both the True and False branches.
Multi-branch splitdivides the group of users from a previous step into two or more branches based on each branch’s defined conditions.
Define the number of branches you want to create, then add anAdd a conditionstep to define each branch’s condition.
Journeys doesn’t enforce mutual exclusivity in branch conditions. For more information about ensuring branch exclusivity, seeBest Practices.
A randomized split lets you experiment with and test the performance of a Journey’s branches. When you create a randomized split, you add up to five Journey branches, each with a different step. Journeys then sends eligible users down one of the branches at random. Each branch receives a portion of the eligible users based on percentages that you assign to the branches.
If the Journey has a re-entry condition, users will join the same split branches upon re-entry.
To test your messaging channels, for example, you might create a randomized split with three different branches, assigning 40% of users to an email campaign, 40% to an SMS campaign, and 20% to a control group. Once users flow through the split, you can determine the success of the email and SMS campaigns compared to each other and the control group.
Follow these steps to add a randomized split to a Journey:
Users who meet the Journey’s entry condition will then enter the Journey and flow through the randomized split.
Once users complete your Journey’s randomized split step, you’ll have insight into how each split performed. You can take action on the results by cloning the Journey and sending a new set of users through the highest performing branch.
You can merge split Journey branches by using theConnect to existing stepsoption. Connecting to existing steps lets you apply a single step to more than one group. For example, you may want to target some Journey group members with email campaigns while targeting others with ad campaigns. Instead of duplicating steps, you can connect these steps to steps that already exist.
Keep the following in mind when connecting to existing steps:
Follow the instructions below to connect branches to an existing step:
With Journey actions steps, you can send marketing campaigns to groups of users and deliver Journey information to downstream tools.
TheShow an adstep lets you send users to an advertising destination. You can also configure exit settings that remove users from the ad step after specific periods of time.
For example, you may want to show an ad for only one week to users who abandoned a cart during a purchase. With the Show an ad step, you can remove users from the ad destination seven days after they enter it.
Ad-based exit settings
Ad step exit settings don’t impact other Journey steps. A user can exit an ad step but remain in the overall Journey. For more on Journeys exit settings, viewJourney exit and re-entry times.
Follow these steps to add a Show an ad step to a Journey:
TheSend an email,Send an SMS, andSend a WhatsAppsteps are only available onEngage Premier.
Use Twilio Engage to send email as a step in a Journey.
To send email in Engage, you must connect aSendGrid subuser accountto your Segment space. Visit theonboarding stepsfor more information.
Subscribedusers will receive an email upon entering the step. To send an email to users regardless of their subscription state, you can use Engage tosend a message to all users. VisitEmail Campaignsfor more information.
Use Twilio Engage to send an SMS message as a step in a Journey.
To send SMS in Engage, you must connect a Twilio messaging service to your Segment workspace. Visit theonboarding stepsfor more information.
As soon as asubscribeduser enters the Send SMS step, they’ll receive the text. VisitSMS Campaignsfor more information.
Use Twilio Engage to send a WhatsApp message as a step in a Journey.
WhatsApp Public Beta
WhatsApp as an Engage channel is in public beta.
TheSend to Destinationsstep delivers information about the Journey to the selected Destination. For more information, seeSend data to Destinations.
This page was last modified: 29 Sep 2023
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Step Types
Conditions and delays
Add a condition
Add a delay
Flow control steps
True/false splits
Multi-branch splits
Randomized splits
Add a randomized split
Act on the split’s results
Connecting to existing steps
Actions steps
Show an ad
Channels steps
Send an email
Send an SMS
Send a WhatsApp
Send to Destinations
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/journeys-edits/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
With Journeys edits and versioning, you can make changes to live journeys.
Keep the following in mind when you edit a journey:
Follow these steps to edit a journey:
After you’ve published, users who meet the entry criteria can enter the new journey version.
You can return to the Journeys list page to view the new live journey and its previous versions, which are nested under the journey container.
Journey settings
A Journey’s settings can’t be edited once the Journey has been published, includingentry and exit settings. The only settings you can change after publishing a Journey are the Journey’s name and description.
Exit settings determine how users flow between journey versions.
Suppose you have a journey with exit settings enabled. The following table lists the actions you can take with the journey, as well as the results:
Suppose you have a journeywithoutenabled exit settings. If you pause or archive Version 1 when publishing Version 2 of that journey, then users can immediately enter Version 2 when they meet its entry criteria, even if they’re still in Version 1.
Version exclusion
To prevent users from a previous journey from ever entering a new journey version, enable version exclusion when you create the new journey version.
Adding a list destination to a journey version creates a new record in Segment’s systems. This process can take up to ten hours. During this time, you’ll be unable to publish new versions of a journey.
For example, if you add a list destination to Version 1 of a journey, and users begin flowing into the version, then Segment will begin creating the new record. If you create a Version 2 draft from Version 1 of the journey while Segment is still creating the new record, you won’t be able to publish Version 2 until this process is completed.
If the version has a list destination but no users have flowed into the version, though, Segment won’t create a new record for that list destination, and you won’t have to wait to publish a new journey version.
This page was last modified: 03 Oct 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Edits & Versioning
Before you begin
Edit a journey
Working with Journeys versioning
Exit settings and user flow between journeys
List destinations
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/send-data/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
When you send data to destinations, you send a series of events or user lists, depending on the destination type.
Ensure you have connected and enabled destinations in your Space.
To include an advertising destination in a Journey, ensure you have connected and enabled the destination within your Space, then utilize theShow an Adstep.
With the Engage event tester, you can send a test event payload to a Destination. As a result, you can confirm that you’ve correctly configured Journey Audiences before you publish your Journey.
Follow these steps to send a test event:
If your Destination successfully handled the event, Segment displays a200 OKHTTP status code along with the full response. If an error occurred, Segment displays any available details in the Event lifecyle section.
Use Trait Enrichment and ID Sync to configure sync payloads that you send from Journeys to your destination.
To use Trait Activation with Journeys:
Use Segment’sDuplicate mappingsfeature to create an exact copy of an existing mapping. The copied mapping has the same configurations and enrichments as your original mapping.
The data type you send to a destination depends on whether the destination is an Event destination or a List destination.
To view the events that get generated by an Engage Space’s Journeys, navigate toUnify settings > Debuggerto view the list of sources that are configured to generate events foreach destination instance. Each source generates events only to its connected destinations. Under the source’s Debugger tab, you’ll find the most recent events generated by that source according the connected destinations’ audiences and computed traits.
The full JSON body of a journey event will have the journey’s specific details found under thecontext.personasobject. These fields can be useful when building outDestination Filters,Actions destination mappings, andFunctions.
The integrations object in these payloads will appear as{"All" : false,}and only list some destinations. This is due to the fact that each source has multiple destinations connected, while each journey may only have a subset of destinations connected to it. SeeFiltering with the Integrations Objectfor more information. The integrations object routing specific events to its specified destinations is also why a destination’sDelivery Overviewtab will show a large number of events under theFiltered at destinationbox, as that destination will only receive the events intended to be sent to it according to the journeys that are connected to that specific destination.
The format in which the destination receives updates depends on the call type.
When the user enters the step:
When the user enters the step:
The destination receives a list of users who qualify for the associated journey step. Unlike lists associated with Engage Audiences, users who are added to a journey list cannot be subsequently removed. Seebest practicesfor techniques to suppress targeting with journey lists. List destinations do not have access to the Event tester.
For more information, seeUsing Engage Data.
This page was last modified: 11 Sep 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Send Journeys data to a Destination
Before you begin
Send data to destinations
Test event payloads
Use Trait Activation with Journeys
What events are sent to destinations?
Event destination
Track calls
Identify calls
List destination
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/journeys-analytics/
Paragraphs:
On this page
Segment maintains analytics for each Journey and its individual steps. As a result, you can view both granular and high-level performance metrics that give you insight into your Journeys.
Journeys Level Analytics is a collection of statistics that can help you assess how a Journey is performing.
Where individual messaging analytics give you focused insight into specific Journey events, Journey Level Analytics shows you a high-level overview of a Journey’s effectiveness.
Follow these steps to view the Analytics for a specific Journey:
Journeys in draft status don’t display Analytics.
The following table shows the statistics available for a Journey:
Completed and exits are mutually exclusive. The “Search for a user” search box excludes users who have exited the Journey.
Use the date picker to view a Journey’s analytics over a specific time frame in any 180 day period.
The following table shows descriptions of the time frames you can select:
Displayed with each step of your Journey, Step-Level Analytics shows you how many users made it to the step you’re viewing. You can use this data to gain context for how users flow through your Journey.
With Step-Level Analytics, you can configure two settings that give you granular insight into each step’s performance:
By default, Engage calculates an individual step’s analytics as a percentage of the number of users in the previous step. However, you can also view step analytics as a percentage of the initial number of users in the Journey’s entry step.
For example, suppose your Journey’s entry step contained 100 users, and 50 proceeded to the next step. For both calculation options, Engage would display50% and 50for the next step. If 25 users from the second step reached step three, however, Engage would display50% and 25for previous-step based calculations but25% and 25for entry-step based calculations.
To change this base percentage, selectCalculate % based on, then selectEntry steporPrevious step.
If you’ve enabled re-entry for your Journey, you can also configure Step-Level Analytics to calculate the step’s percentage based on unique or total users. SelectingUniquegenerates a percentage based on unique users, whileTotalincludes users who have re-entered the Journey.
For more information on re-entry settings in Journeys, viewJourney re-entry.
This page was last modified: 30 Apr 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Analytics
Journey-Level Analytics
Access a Journey’s Analytics
Journey-Level Analytics statistics
Step-Level Analytics
Changing the calculation percentage
Previous step or entry step
Total or unique users
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/event-triggered-journeys/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
With Event-Triggered Journeys, you can build real-time, event-based marketing workflows to automate and personalize customer journeys.
Unlike traditional audience-based journeys that rely on pre-defined user segments, event-triggered journeys start automatically when users perform specific actions on your website or app.
On this page, you’ll learn how to create an event-triggered journey, configure entry conditions, and work with published event-triggered journeys.
Public Beta
Event-Triggered Journeys is in public beta, and Segment is actively working on this feature. Some functionality may change before it becomes generally available. Event-Triggered Journeys is not currently HIPAA eligible.
Event-triggered journeys help you create a responsive approach for time-sensitive use cases, like cart abandonment campaigns and transactional messages.
Whereaudience-based journeysactivate based on aggregated conditions, event-triggered journeys respond instantly to individual events, delivering personalized experiences based on the full context of each event.
Opt for an event-triggered journey in situations like these:
Before you begin
Before you start building an event-triggered journey, make sure that you’ve enabled alldestinationsyou plan to send data to and that the events you want to use as triggers are already available in your Segment workspace.
To set up an event-triggered journey:
When a journey instance reaches aSend to Destinationstep, you can configure how data is sent to your desired destination. This step allows you to define where the data goes, what actions are performed, and how information is mapped, giving you control over the integration. Event-Triggered Journeys currently supports allActions Destinations.
For other destinations or more complex logic, you can useDestination Functions.
Select a DestinationChoose the destination where you want to send data. Currently, onlyActions DestinationsandDestination Functionsare supported.
Choose an ActionSpecify the action to take within the selected destination. For example, you might update a user profile, trigger an email, or log an event.
Define the Event NameAdd a descriptive event name to send to your destination.
When a journey reaches this step, the Segment prepares and sends the payload based on your configuration. The integration ensures compatibility with the selected destination’s API, allowing seamless data transfer and execution of the specified action.
Event-Triggered Journeys includes advanced options to help you tailor journey behavior and customize data delivery to downstream destinations.
Unique identifiers in event-triggered journeys help you manage multiple journey instances when a user triggers the same event more than once.
When you selectRe-enter every time event occurswhen you create an event-triggered journey, you can choose an event property as a unique identifier. Selecting this option does two things:
For example, in an abandonment journey, suppose a user starts two applications (likeapplication_started), each with a differentapplication_id. By settingapplication_idas the unique identifier, Segment can match follow-up events (likeapplication_completed) to the correct application journey. As a result, each journey instance only receives the completion event for its specific application.
Follow the best practices in this table to optimize your event-triggered journeys:
Segment built Event-Triggered Journeys to respond instantly to events, offering real-time capabilities with a few considerations in mind.
Event-Triggered Journeys can power a variety of real-time, personalized experiences. This section details some common scenarios to help you see how they might work in practice.
Suppose you want to instantly send a personalized message whenever a user completes a specific action on your site, like filling out a form or subscribing to a service. With Event-Triggered Journeys, you can configure the journey to trigger each time this entry event occurs. Segment will forward the event data, including all relevant details, to your connected destination in real-time.
Imagine you’re running an e-commerce site and want to follow up with users who start the checkout process but don’t complete it within a certain timeframe. You can create an event-triggered Journey to watch for abandonment cases like these.
Start by setting thecheckout_startedevent as the trigger and specify a unique identifier likesession_idto track each user’s journey instance. Then, configure the journey to check for thepurchase_completedevent within a defined window (for example, 1 hour). If the user doesn’t complete the purchase, the journey can automatically send a nudge to encourage them to finish their order.
Say you want to follow up with users after they engage with specific content, like downloading an e-book or watching a demo video. Event-Triggered Journeys can help you send timely, personalized messages based on these interactions.
To do this, set the entry event tocontent_downloadedorvideo_watchedand configure the journey to send a follow-up email. You could even personalize the email with details from the triggering event, like the content title or timestamp, by configuring your destination payload to enrich the message with event-specific context.
This page was last modified: 19 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Event-Triggered Journeys
Overview
Build an event-triggered journey
Send data to downstream destinations
Configure the Destination Send Step
Journey setup configuration options
Unique identifiers
Notes and limitations
Best practices
Working with Event-Triggered Journeys
Use Cases
Real-time event forwarding
Real-time abandonment Campaigns
Personalized follow-up Messages
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/journey-context/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Event-Triggered Journeysredefine how you orchestrate and personalize customer experiences.
This page explains Journey context, which can help you dynamically adapt each journey to individual user interactions, creating highly relevant, real-time workflows.
Public Beta
Event-Triggered Journeys is in public beta, and Segment is actively working on this feature. Some functionality may change before it becomes generally available. Event-Triggered Journeys is not currently HIPAA eligible.
Unlike traditional audience-based journeys, which rely solely on user progress through predefined steps, event-triggered journeys capture and store the details of user-triggered events. This shift allows you to access the data that caused users to reach a specific step and use it to make more precise decisions throughout the journey.
With journey context, you can:
For example:
Journey context is a flexible data structure that captures key details about the events and conditions that shape a customer’s journey. Journey context provides a point-in-time snapshot of event properties, making accurate and reliable data available throughout the journey.
Journey context stores event property information tied to specific user actions, likeAppointment IDorOrder ID.
Journey context doesn’t store:
However, the up-to-date values of profile traits and audience membership can be added in a payload sent to a destination.
This focused approach ensures journey decisions are always based on static, reliable data points.
Event properties are the foundation of Journey context. Examples of event properties include:
Segment captures each event’s properties as a point-in-time snapshot when the event occurs, ensuring that the data remains consistent for use in personalization.
Journey context provides the framework for capturing and referencing data about events and conditions within a journey. It allows Event-Triggered Journeys to dynamically respond to user behavior by making event-specific data available for decisions and actions at each step.
This is useful for scenarios like:
By incorporating event-specific data at each step, journey context helps workflows remain relevant and adaptable to user actions.
Journey context gets referenced and updated at various steps in an event-triggered journey. Each step plays a specific role in adapting the journey to user behavior or conditions.
This step checks whether a user performs a specific event within a given time window. If the event occurs, Segment adds its details to journey context for use in later steps.
For example, a journey may wait to see if acheckout_completedevent occurs within two hours of a user starting checkout. If the event happens, its properties are added to context and the workflow can proceed; otherwise, it may take an alternate path. The data captured includes event properties (likeOrder ID).
If a Hold Until branch is set to send profiles back to the beginning of the step when the event is performed, those events are also captured in context. Because they may or may not be performed during a journey, they will show as available in future steps but will not be guaranteed for every user’s progression through the journey.
The send to destination step allows journey context data to be included in payloads sent to external tools, like messaging platforms or analytics systems.
For example, a payload sent to a messaging platform might includeOrder IDandCart Contentsto personalize the message. Users can select which parts of journey context to include in the payload.
The structure of journey context organizes event-specific data gets and makes it accessible throughout the journey workflow. By standardizing how data is stored, Segment makes it easier to reference, use, and send this information at different stages of a journey.
Journey context is organized as a collection of key-value pairs, where each key represents a data point or category, and its value holds the associated data.
For example, when a user triggers an event likeAppointment Scheduled, Segment stores its properties (likeAppointment ID,Appointment Start Time) as key-value pairs. You can then reference these values in later journey steps or include them in external payloads.
The following example shows how journey context might look during a workflow. In this case, the user scheduled an appointment, and the workflow added related event data to the context:
This payload contains:
Journey context underpins the flexibility and precision of Event-Triggered Journeys. By capturing key details about events and decisions as they happen, journey context lets workflows respond dynamically to user actions and conditions.
Whether you’re orchestrating real-time abandonment recovery or personalizing messages with event-specific data, journey context provides the tools to make your workflows more relevant and effective.
To learn more about how Event-Triggered Journeys work, visit theEvent-Triggered Journeys documentation.
This page was last modified: 19 Dec 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journey Context
Overview
What is Journey context?
Examples of stored context
Using Journey context in Event-Triggered Journeys
Journey steps that use context
Hold Until split
Send to destination
Context structure
Journey context and Event-Triggered Journeys
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/faq-best-practices/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
When you create a multi-branch split, do not create overlapping conditions that might lead a user to qualify for more than one step at a time.
For example:
Add time windows when defining conditions to enforce funnel constraints in a Journey, rather than using an unbounded event condition which operates on the entire history of the user profile. For example, to check if a user has completed an order since receiving an email triggered 7 days ago, use the condition “Order Completed at least 1 time within 7 days.”
Unlike lists associated with Engage Audiences, users who are added to a journey list cannot be subsequently removed. Lists are typically associated with advertising campaigns, and you must take additional steps if you wish to ensure that users do not continue to be targeted with ads after they achieve some goal. A typical implementation pattern is:
Save your Journey in a draft state so that you can review before you publish it. Once you publish a Journey, you cannot edit select portions of a Journey and Journeys sends data to destinations.
Aside from the entry condition, all Journey step conditions are triggered by future events and existing trait memberships. Event-based conditions only evaluate events that occurafterthe Journey is published.
When youinclude historical datain a Journey’s entry condition, Unify identifies users who previously satisfied the entry condition and adds them to entry. For example, to evaluate if a user has ever used a discount code mid-Journey, create and configure aComputed Traitto select fordiscount_used = trueto use in your Journey.
Including historical data doesn’t impact any additional Journey steps, however. To include historical data in post-entry conditions, use the following table to identify which conditions will automatically include historical data:
To include historical data based on custom traits or events that predate the Journey, first build an Audience that includes the targeted data by following these steps:
For example, to includecustom trait = ABCin a Journey, create an Audience calledABCthat includes that custom trait, then add the Journey conditionPart of AudienceABC.
Using thePart of Audiencecondition, Journeys then populates the custom trait as if it were using historical data.
Follow these best practices to test your journeys:
Journeys run in real-time, like real-time Audiences in Engage. This means that users will progress through Journeys as Segment receives new events.
Yes. Users must first exit a Journey, however, before entering it again. To learn more about Journey re-entry, read theJourney re-entry sectionof theBuild a Journeypage.
Journeys supports all Engage destinations, including Destination Functions. Read more inSend data to destinations.
When building a Journey, if you checkUse historical data, you can see the estimated number of users in the initial cohort.
Once published, Journeys displays the number of users are in each step of the Journey at any given time.
The data type you send to a destination depends on whether the destination is an Event Destination or a List Destination.
For Engage customers, users with either the Engage User or Engage Admin roles can create, edit, and delete journeys. Users with the Engage Read-only role are restricted to view-only access.
Journeys triggers audience or trait-related events for each emailexternal_idon a profile. If a profile has two email addresses, you’ll see two Audience Entered and two Audience Exited events for each Journey step. Journeys sends both email addresses to downstream destinations.
It may take up to five minutes for a user profile to enter each step of a Journey, including the entry condition. For Journey steps that reference a batch audience or SQL trait, Journeys processes user profiles at the same rate as the audience or trait computation. Visit the Engage docs tolearn more about compute times.
This page was last modified: 22 Feb 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Best Practices and FAQ
Best practices
Enforce exclusivity in multi-branch splits
Add time windows whenever possible
Suppress targeting with journey lists
Review your Journey in drafts first
Know how to incorporate historical data
Use dev spaces and data warehouse destinations to test journeys
FAQs
How often do Journeys run?
Can a user re-enter a Journey?
What destinations does Journeys support?
What are the reporting capabilities of Journeys?
How are users sent to downstream destinations?
Which roles can access Journeys?
Why am I seeing duplicate entry or exit events?
How quickly do user profiles move through Journeys?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/use-cases/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
To help you get underway, you can reference these sample Journeys.
This journey focuses on converting one-time buyers into repeat purchasers by delivering communications in their preferred channels.

This journey represents a campaign designed to drive returning purchases based on intent and lifetime value goals.

This journey creates an acquisition campaign designed to convert trial accounts to paid accounts with a unified owned and paid media strategy.

This journey creates an onboarding flow designed to maintain new user engagement through the onboarding experience.

This journey creates an acquisition campaign designed to convert trial subscriptions to paid subscriptions with a unified owned and paid media strategy.

This journey aims to bring back users with personalized messaging while conserving ad spend based on user preferences.

This page was last modified: 27 Sep 2022
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Example Journeys Use Cases
E-commerce use cases
Repeat purchase campaign
Low recency purchase winback
B2B use cases
Trial to paid conversion
Onboarding flow
Media use cases
Paid subscription acquisition
Re-engagement Campaign
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/journeys-logic/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Journeys are powered by a series of Audiences and Computed Traits. This guide defines the logic used to create sequential campaigns.
By the end of this guide, you’ll understand how and why users progress through your Journey. You’ll also gain familiarity with the following key Journeys concepts:
Journeys begin with an entry condition that computes like standardEngage Audiences. This entry condition queries your customer data in Segment to find users who meet your specified criteria.
After users meet the Journey’s entry condition, their progress through the Journey depends on satisfying the criteria of subsequent Journey steps.
Journey steps operate based on the following behaviors:
The combination of these traits, audiences, and business rules allows you to create an enforced funnel with the following implications:
To enter a Journey, users must satisfy the entry conditions.
To enter each subsequent step, three conditions must be true:
“Add a condition” steps operate likeEngage Audiences. The defined conditions provide criteria for each step’s membership.
When you add a “Wait” step to a Journey, Segment automatically includes wait times in the membership criteria of the next condition step.  Journeys represents wait times in relation to thepreceding_step_joined_time trait, which must be at least N time ago.
The following table summarizes the three step membership conditions and their equivalents in written logic:
For every step after the entry step, Journeys leveragesthe Engage real-time compute system.
When a user’s traits change or they exceed time-based conditions (for example, “within 7 days”), they may no longer fulfill the conditions of a previously joined step. If a user joins a step but no longer meets its conditions, Journeys removes them from that step’s preview and analytics.  The user does, however, continue to progress through the Journey.
Consider the following example of Journey conditions for a cart abandonment campaign:
If a user makes a purchase during the wait time of 5 days, the system would automatically update membership tofalsefor the audience created from the entry condition, Step 1. However, the user could still satisfy Step Condition 3 based on the three step membership conditions:
To maintain best practices and enforce your funnel, re-check or modify audience conditions that follow wait steps.  For example, adding apurchases = 0condition to Step 3 results in Segment not advancing users who made a purchase during the wait time:
Unless a Journey has an exit condition configured, Journey members permanently remain in Destination sync steps. Segment neither sendsAudience Exitevents to Destinations nor removes users from Destinations lists.
Exit conditions will lead to users being removed from all Journey steps and Destinations.
Each step’s membership conditions evaluate in real time, which means that users remain in a step until the immediate next step’s conditions becomes true.
Yes. To allow users to re-enter Journeys that they’ve exited,enable re-entryduring initial Journey setup.
Deleting a Journey removes its underlying audiences from profile views in the Profile explorer. However, the Journey’s True/False traits remain in the user’s last recorded state.
Note
Cloning a Journey generates new, unique traits and sync keys.  Deleting the original Journey won’t impact any cloned Journeys.
True/false splits enforce mutual exclusivity by ensuring that once users enter either side of a split, they can’t enter the other.
Multi-branch splits don’t enforce mutual exclusivity. Users can enter multiple branches of a split if they satisfy the split conditions.
Use Historical Data backfills the entry condition to “prime” the Journey.  Future events and existing trait memberships trigger all Journey conditions, except for entry.  As a result, event-based conditions only evaluate events that occurred after you published the Journey.
If you want to check for events that occurred before you published your Journey, base your conditions on computed traits instead.
For example, to evaluate if a user already in a Journey has ever used a discount code, create a Computed Trait fordiscount_used, and set it totrueorfalse.
With time windows within step conditions, you can designate a timeframe for Segment to evaluate whether or not a user has met the condition.  Segment calculates the time window from the current point in time, not relative to any other steps in your Journey.
This page was last modified: 09 Jan 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Understanding Journeys Logic
Entry conditions and step behavior
Step membership
Condition steps
Wait times
Real-Time step membership
Send to Destination steps
FAQs
What happens when a user reaches a single or Multi-Split Condition step and the conditions evaluates tofalse?
Can users exit and re-enter a Journey?
What happens to traits and audiences when I delete a Journey?
Are splits mutually exclusive?
How does “Use Historical Data” backfill work?
How do time windows within step conditions work?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/journeys/key-terms/
Paragraphs:
Engage Foundations requires a Business tier account and includes Unify.See theavailable plans, orcontact Support.
On this page
Keep the following terms in mind as you begin to explore Journeys.
This page was last modified: 06 Feb 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Journeys Key Terms
General
Steps
Statuses
Steps with Audiences
Steps without Audiences
Analytics
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/email/template/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use Twilio Engage to build personalized email templates to store and use throughout marketing campaigns.
Build an email template from scratch using theDrag and Drop Editoror theHTML Editor. Includepersonalized contentin the subject line, preview text, and email body to engage with users based on their profile traits and actions.
Navigate toEngage > Contentand use the Email Templates page to preview and edit existing templates.
To configure an email template, clickCreate Template.
You must first connect aSendGrid subuser accountto your Segment space to build email templates in Engage. Visit theonboarding stepsfor more information.
Engage content validation
For all content editors in Engage, you’ll see alerts for any issues in your template, such as invalid profile traits or incorrect liquid syntax. Engage both flags template issue(s), and displays recommended next steps. While you can save these templates, you must fix any issues before using them in Engage campaigns.
You can send test emails before you include a template in marketing campaigns.
You can also test email templates directly from aSend an Email stepin Journeys.
Engage supports dynamic sending using merge tags. Personalize email content by adding real-time profile traits in merge tags to the following fields:
As you configure the template, clickMerge Tagsand select the profile traits to include. Engage inserts the merge tags based on cursor placement.
The following table contains a description and some best practices for all fields in the email template. Asterisks indicate required fields.
You can also add merge tags in the heading or body text as you design an email with theDrag and DroporHTMLeditors. Engage supportsliquid templatingto create dynamic content in the email design editor.
If you’re using theimage content modulein the Drag and Drop Editor, you can’t use liquid statements in theImage URLfield. 
To use liquid statements with an image, Segment recommends using anHTML blockwith the following syntax:<img src=“{{profile.traits.imageLink | default: '<insert your default URL here>'}}”, whereprofile.traits.imageLinkis an example profile trait representing personalized image links for each recipient.
To learn more about profile traits, visit Segment’sComputed TraitsandSQL Traitsdocumentation.
When you build an email template, you’ll need to include links that your customers can access to unsubscribe and manage their email preferences. You’ll find both in theSpecial Linksdropdown menu of theInsert/Edit linkwindow.
When you build email templates, it’s your responsibility to include an unsubscribe link in your message. Add unsubscribe links to an email template from the Drag and Drop or HTML editors.
When a recipient clicks on an unsubscribe link, they’ll see a confirmation page and the recipient’s subscription state is updated.
Learn more aboutUser Subscriptionsin Twilio Engage.
The manage preference link lets your customers opt in and out of email groups on an individual basis instead of unsubscribing from all your campaigns.
For more information, seesubscription groups.
Segment doesn’t support profile traits in object and array datatypes inBroadcasts, but you cam use them inJourneys.
View someemail deliverability tips and tricksfrom SendGrid.
You can also use the Templates screen in Engage tobuild SMS templates.
When you add a template to a Journey step, it becomes a copy specific to that step. Changes made to the original template won’t update the Journey version, and edits made in the Journey step won’t affect the original template. This keeps your Journey changes separate while preserving the original for reuse.
This page was last modified: 26 Nov 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Email Template
Build an Email template
Test the Email template
Dynamic sender using merge tags
Use liquid statements with an image URL
Include unsubscribe and manage preference links
Unsubscribe links
Manage preference links
Arrays and objects in Broadcasts
Next steps
FAQs
Do updates to an email template automatically apply to Journey steps using it?
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/email/editor/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use Twilio Engage to build email templates with awhat you see is what you get(WYSIWYG) Drag and Drop Editor. Use drag and drop tools to design the template layout and include user profile traits to personalize the message for each recipient.
You can navigate to the Drag and Drop Editor from theSelect Editorscreen:
From theSelect Editorscreen, selectDrag and Drop Editorand clickBuild Email.
The Drag and Drop Editor consists of aleft sidebarwith design modules and anemail canvas.
The left sidebar contains the following tools:
Click and drag the tools you want to use from the left sidebar in the email canvas.
Use the canvas to organize and preview the email template for both desktop and mobile. Drag and drop content modules from the sidebar into the canvas and arrange the layout as desired.
Select content in the canvas and return to the left sidebar to set properties for the selected content.
Navigate between desktop or mobile to design the email template for both formats. Toggle between desktop or mobile in the left sidebar or use the buttons in the bottom right corner of the email canvas.
Mobile view doesn’t contain all design options that are available for desktop. For example, upload image capabilities are only available when you edit for desktop. However, content that you add for desktop will also display for mobile devices by default. Seecontent modulesfor more on content that’s only available to edit for desktop.
Use responsive design settings in the sidebar to hide specific content for either desktop or mobile.
Select from the following content modules:
Use the Blocks tool to add both blank columns and pre-existing content blocks to the email. Drag empty column blocks in the canvas to organize the layout, then drag and dropcontent toolsinside the column blocks.
Predefined content blocks allow you to add content such as:
Use the body tool to apply general style and link attributes to the entire email canvas.
Email body attributes include:
To modify style attributes for specific content in the email, select a content block in the canvas and edit attributes in the left sidebar.
Use the images tool to add images to your email. Scroll through available images in the left sidebar or use the search tool.
Select and drag and image into the canvas, then return to the sidebar to set image properties:
Use the Uploads tool to upload an image for the email template. ClickUpload Imageto select an image stored locally or drag and drop images in the sidebar dropzone.
The maximum image file size you can upload is 10 MB.
Use theAction Typedrop down menu in the sidebar to select the action that occurs when a recipient clicks on the link, button, or image in the email template.
Select from the following link actions:
It’s always best practice to include an unsubscribe link in the emails you build. Engage adds an unsubscribe link to templates, which you can edit at any time. For more on email unsubscribe links, view SendGrid’sbest practices.
Add an unsubscribe link as a button:
Add an unsubscribe link to text:
You can alternatively add apredefined unsubscribelink content block.
Engage also adds a manage preference link to templates. The manage preference link lets your customers opt in and out of email groups on an individual basis instead of unsubscribing from all your campaigns. For more information, seesubscription groups.
Add merge tags in the Drag and Drop Editor to personalize your message with user profile traits.
Engage supports liquid templating to create dynamic content in the email design editor and the SMS editor.
For example, use{% if %},{% elseif %}, and{% else %}tags to call a product by name if known, or use a default message:
To view more examples related to your use case, visit theLiquidJS docs.
For all content editors in Engage, you’ll see alerts for any issues in your template, such as invalid profile traits or incorrectliquid syntax. Engage both flags template issue(s), and displays recommended next steps. While you can save these templates, you must fix any issues before using them in Engage campaigns.
After you design the email, clickCreate Email Template.
Learn more aboutbuilding email templatesto include in your Engage campaigns.
You can learn about theHTML Editorfor both code and visual editing capabilities from a single view.
once you create an email with the Drag and Drop Editor, you can’t modify it with the HTML Editor, and vice versa.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Drag and Drop Editor
Left sidebar
Email canvas
Design for desktop or mobile
Responsive design
Add content modules
Add blank columns or predefined content blocks
Email body attributes
Add an image
Upload an image
Link actions
Add unsubscribe links
Add a manage preference link
Personalize with merge tags
Content validation
Save the template
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/email/html-editor/
Paragraphs:
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use the HTML Editor to design your email template with both code and visual editing capabilities. Build your email template with code, copy and paste existing code, or use the Visual Editor for a code free design experience.
On this page, you’ll learn how to use the HTML Editor to build personalized email templates for your Engage campaigns.
You can navigate to the HTML Editor in two ways:
From theSelect Editorscreen, selectHTML Editorand clickBuild Email.
Use the Visual Editor for a no-code option to design your email. With the Visual Editor, you can:
Engage updates any changes you make in the Visual Editor to the HTML Editor in real-time.
To insert an image from the Visual Editor:
To preview your email template, click the preview icon in the Visual Editor toolbar.
From the preview screen, you can toggle between desktop or mobile to view the email in both displays.
Use the HTML Editor to maintain your email template with code. Copy and paste existing code or build a new template in the editor.
Engage displays any changes you make in a preview screen to the right of your code. You can preview your email in both desktop and mobile display.
ClickFormatat any time to properly indent and format your code in the HTML Editor.
When you toggle from the HTML Editor to the Visual Editor, Engage may make minor changes to your code formatting. If Engage re-formats your code, it will not affect the email layout.
Engage displays in-line error flags in the code editor to help you debug your code. If there are errors, you might not see content as expected in the preview screen until you’ve debugged your code.
For all content editors in Engage, you’ll see alerts for any issues in your template, such as invalid profile traits or incorrectliquid syntax. Engage both flags template issue(s), and displays recommended next steps. While you can save these templates, you must fix any issues before using them in Engage campaigns.
Add merge tags to personalize your message with user profile traits.
You can also add merge tags to your email right from the code editor.
Engage supports liquid templating to create dynamic content in the HTML Editor.
For example, use{% if %},{% elseif %}, and{% else %}tags to call a product by name if known, or use a default message:
If you use liquid templating, be sure totest your emailto make sure that everything renders properly.
While both the HTML and Visual Editor support liquid templating, Segment recommends using the HTML Editor to write liquid templating.
Engage doesn’t support liquid template syntax that produces partial blocks of HTML.
To view more examples related to your use case, visit theLiquidJS docs.
It’s always best practice to include an unsubscribe link in the emails you build. Engage adds an unsubscribe link to email templates, which you can edit at any time.
You can add unsubscribe links from the visual or HTML Editor.
From the Visual Editor:
To add a link from the code editor, use<a href = "[unsubscribe]"> </a>in your HTML.
For more on email unsubscribe links, view SendGrid’sbest practices.
From the editor screen, you can clickUse HTML EditororUse Visual Editorto toggle between the two editors.
The Visual Editor renders your HTML in an editable preview (similar to an email client), so you might need to accept formatting changes to your HTML to use the Visual Editor. In this case, Segment displays a confirmation modal with HTML differences.
Potential HTML changes include formatting, removing attributes with potentially unsuported scripts in your HTML (for example,onclickoronblur), attribute reordering, and adding missing tags.
If you don’t want to accept the changes required to use the Visual Editor, you can continue editing in the HTML Editor.
In the HTML Editor, you can use theFormatbutton to properly indent and format your code. Note that the Format button may not implement all changes necessary to use the Visual Editor.
After you design the email, clickCreate Email Template. You can navigate toEngage > Content > Templatesto view and maintain your email template.
Learn more aboutbuilding email templatesto include in your Engage campaigns.
You can also learn about theDrag and Drop Editorin Engage to build Email templates with drag and drop functionality.
Once you create an email with the HTML Editor, you can’t modify it with the Drag and Drop Editor, and vice versa.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
HTML Editor
Getting started
Visual Editor
Insert an image
Preview for desktop or mobile display
HTML Editor
Error flagging and content validation
Personalize with merge tags
Liquid templating
Add unsubscribe links
Toggle between editors
Formatting your HTML
Save the template
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/sms/template/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use Twilio Engage to build SMS message templates to include throughout your marketing campaigns.
You can build an SMS template and include personalized content in messages based on user profile traits. Once you build the SMS, Twilio Engage saves the template for you to preview, maintain, and reuse.
Use personalized SMS messages to connect with users in real-time, as they reach a specific step in a journey.
You can choose between two SMS template types:
You must first configure your SMS service with Twilio to build an SMS template in Engage. Visit theonboarding stepsfor more on how to connect a Twilio account.
Follow these steps to build an SMS template:
Use the SMS Templates screen to preview and update existing SMS message templates.
Engage content validation
For all content editors in Engage, you’ll see alerts for any issues in your template, such as invalid profile traits or incorrectliquid syntax. Engage both flags template issue(s), and displays recommended next steps. While you can save these templates, you must fix any issues before using them in Engage campaigns.
Send a test SMS message before you include it as a step in your Journey.
You can also test SMS templatesdirectly within Journeysbefore you send them.
Personalize SMS content in Engage using profile traits as merge tags in your messages.
To personalize an SMS, clickMerge Tagsin the SMS builder and select the profile traits to include in your message.
Engage inserts the selected traits inside merge tags based on cursor placement in the message. This allows you to personalize each SMS you send to recipients. You can also useliquid templatingto create dynamic content in the SMS editor.
To learn more about profile traits, visit Segment’sComputed TraitsandSQL Traitsdocumentation.
Use Link Shortening to send shorter, more manageable link URLs in your Engage SMS campaigns.
Configure Link Shortening in yourTwilio Consolein six steps:
Once you’ve configured Link Shortening, Twilio automatically shortens the link URLs for recipients of your SMS messages. Link shortening occurs during the message sending process, so shortened links don’t appear in the message editor.
Link Shortening is only available for SMS messages.
You can edit, duplicate, and delete SMS templates within your Engage workspace.
To edit an SMS template:
To duplicate an SMS template:
After you duplicate a template, you can edit it from the Templates page.
To delete an SMS template:
When you build an SMS, include an opt-out message in the body of your text that informs recipients they can unsubscribe from a message channel.
When an SMS recipient replies “Stop” to an SMS, they’ll receive an opt-out confirmation, and Engage updates their phone number subscription status. Visit theUser Subscription Statesdocumentation to learn more about user subscriptions in Engage.
Note that there’s a 1,600 character count limit for SMS messages.
Visit Twilio’sSMS Character Limitdocumentation for more information.
Use the Templates screen in Twilio Engage tobuild personalized email templates.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
SMS Template
SMS template types
Build an SMS message template
Test your SMS template
Personalize with merge tags
Configure Link Shortening
Working with SMS message templates
Edit an SMS message template
Duplicate an SMS message template
Delete an SMS message template
SMS best practices and limitations
Include an SMS opt-out message
SMS character limit
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/whatsapp/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
With Twilio Engage, you can build personalized WhatsApp templates to store and use throughout marketing campaigns.
This page explains how to create, build, and submit WhatsApp templates for approval.
WhatsApp Template Approval
WhatsApp templates must be approved by Meta before you can use them in campaigns.
You can choose between three WhatsApp template types:
Before you begin
If you’re new to Engage Premier, you’ll need to sign up for theTwilio Content Editor betabefore you can use WhatsApp templates.
Follow these steps to build a WhatsApp template:
If you saved your template without submitting it for approval, it won’t be available for use in campaigns until you submit it for approval.
Follow these steps to submit saved templates for approval:
You can personalize your WhatsApp templates with merge tags based on profile traits.
To include merge tags in your template, click+ Add merge tagin the template builder and select the profile trait(s) you want to include in your message.
Segment displays the merge tag in the body as a numerical value surrounded by curly braces, like{{1}}. When a susbcriber triggers your WhatsApp campaign, Segment will replace the merge tag with the specific value associated with that subscriber’s profile.
If a merge tag doesn’t apply to a subscriber, Engage will use the content you enter into theDefault contentfield.

To learn more about profile traits, visit Segment’sComputed TraitsandSQL Traitsdocumentation.
Meta must first review and approve your WhatsApp template before you can use it in a campaign. Meta approves most templates in under an hour, but some approvals can take up to 48 hours. Keep this time frame in mind if you plan to send time-sensitive campaigns.
For more on the template approval process, viewrecommendations and best practices for creating WhatsApp Message Templates.
Once your template has been approved, you cancreate a Journey to send a WhatsApp campaign.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
WhatsApp Template
WhatsApp template types
Build a WhatsApp message template
Submit a saved template for approval
Personalize with merge tags
Template approvals
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/mobile-push/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. Segment recommends exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Use Twilio Engage to build mobile push templates to include throughout your marketing campaigns.
You can choose between two mobile push template types:
To build mobile push templates in Engage, firstconfigure Engage for mobile.
Follow these steps to build a mobile push template:
When you build a mobile push template, you can choose between three click behaviors, which determine what happens when a user taps on the mobile push:
Push tokens
Push tokens are unique identifiers Segment associates with each profile. For mobile push, you’ll need to configure identity resolution settings for the push tokensios.push_tokenandandroid.push_token. Using the Profile explorer, you can find a profile’s push tokens by opening a profile and then selecting the Identities tab. You can only send mobile pushes to profiles with push tokens enabled.
Follow these steps to test your mobile push:
Segment verifies that the profile you’re sending a test to has a push token, then sends the test. If the test mobile push doesn’t work as expected, confirm that the profile you’re sending to has a push token.
Badge counts appear in the corner of an app icon on your user’s device. Badge counts show the number of unread notifications. During push notification setup, you can set badge count behavior from the badge count dropdown.
Choose from these badge count settings:
Action buttons sit below a push notification and let your users take action on the push. You can use action buttons to encourage users to make a purchase, visit a website, or share content on social media, for example.
Follow these steps to add an action button:
You can add up to three action buttons for each push notification.
Personalize mobile push content in Engage using profile traits as merge tags in your messages.
To personalize a mobile push, clickAdd merge tagsin the template builder and select the profile traits to include in your message.
Engage inserts the selected traits inside merge tags based on cursor placement in the message. This allows you to personalize each mobile push you send to recipients. You can also useliquid templatingto create dynamic content in the template editor.
To learn more about profile traits, visit Segment’sComputed TraitsandSQL Traitsdocumentation.
Now that you’ve built a mobile push template, you’re ready to beginsending mobile push campaigns.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Mobile Push Template
Mobile push template types
Build a mobile push message template
Click behaviors
Test your mobile push template
Advanced settings
Badge count settings
Action buttons
Personalize with merge tags
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/content/organization/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
To add structure to your marketing content, you can organize templates into folders and duplicate them within your Segment space.
Use folders to organize your Email, SMS/MMS, Push, and WhatsApp content templates. Group related content together to better help you manage and find your marketing resources.
From the Templates overview page you can create, update, view, and delete template folders.
You must have both read and write workspace permissions to create or make changes to folders.
To create a folder:
You can also rename, add templates, or disband your folder from the Templates overview page. Disbanding a folder returns all templates from the folder to the main template list, without deleting any of the templates.
You can only organize templates in your folders according to template type. For example, you can’t group email and SMS templates in the same folder.
From the Templates overview page, you can select individual template(s) to move to your folders.
After you select the templates you’d like to move:
Use theActionsbutton in your folder to remove templates or move them to a different location. When you remove a template, Engage returns the template to the Templates overview page, without deleting it.
You can clone existing Engage templates to edit and use in your message campaigns.
To duplicate an email, SMS, or push template:
Learn more about configuringemail,SMS, andpushtemplates.
To duplicate WhatsApp templates:
Learn more aboutconfiguring WhatsApp templates.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Organizing Your Templates
Organize with folders
Move templates to your folders
Duplicate an Engage template
Duplicate email, SMS, and push templates
Duplicate WhatsApp templates
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
With Engage, you can build email and SMS marketing campaigns within Journeys.
Use real-time data and unified customer profiles to send personalized messages to subscribed users. Build and send email and SMS campaigns for multi-channel customer engagement.
Visit Segment’sJourneys documentationfor more information on how to build a Journey.
Use Engage to sendemailandSMS campaignsin Journeys:
With Engage, you can buildemailandSMS templatesto use throughout your campaigns. Build an email template using a drag and drop or a visual HTML editor. Personalize templates with merge tags and test your messages before you send them in campaigns.
Engage saves the message templates for you to preview, maintain, and reuse throughout your campaigns.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Campaigns Overview
Send personalized campaigns
Build email and SMS templates
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/email-campaigns/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. Segment recommends exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
With Twilio Engage, you can send email and SMS campaigns to users who have opted in to receive your marketing materials. On this page, you’ll learn how to create and send an email campaign.
Some knowledge of the Journeys product will benefit you as you read through this guide. If you’re new to Journeys, theJourneys documentationwill bring you up to speed.
Twilio Engage uses Journeys to send email and SMS campaigns.  With Journeys, you add conditions and steps that trigger actions like sending an email or an SMS.
You’ll build and then send your campaign in three stages:
Because Engage campaigns exist within Journeys, begin by creating a Journey:
With your Journey created, you’ll now create aconditionthat will trigger your email campaign:
With your entry condition added, you’re now ready to create your email.
Follow these steps to create an email campaign:
Some email campaign fields, likeSender emailandSubject, are required.  The Send Email window indicates required fields with an asterisk.  Refer to theemail campaign fieldstable for a full description of available email fields.
Editing Templates
If you use a template for your email, Engage creates an editable copy of the original.  Editing the template within the Journey won’t alter the original template.
As you create your email campaign, you can set an email to send to all users regardless of theirsubscription state. This may be useful, for example, when you need to send a marketing transactional email to a user who hasn’t subscribed to your marketing emails.
To send an email to all users:
When you bypass subscription states, be sure to follow local laws and comply withCAN-SPAM guidance.
For more, view SendGrid’semail deliverability best practices.
At this point, you can send a test email before publishing your campaign. Test emails confirm that your design, unsubscribe links, and merge tags appear as expected.
As part of the test send, you can enter custom values to populate the profile traits in your message.
Follow these steps to test your campaign:
With your email designed and tested, you’re now ready to save the campaign and publish your Journey, with the following steps:
Your email campaign is now live. When users trigger the email’s parent Journey condition, they will receive your email campaign.
The following table contains descriptions of all available fields in the Journeys Send Email builder. Asterisks indicate required fields.
When you create an email, you have the option to select an IP pool. An IP pool is a group of IP addresses available to you in SendGrid. You can create and view your IP pools in your Engage-linked SendGrid subuser account by navigating toSettings > IP Addresses > IP Pools.
Your sending reputation is based on a combination of your domain and the IP address you use to send emails. Emails that end up in your recipients’ spam folders could harm your sending reputation. As a result, you may want to keep your marketing and transactional emails on different IP addresses.
Keep the following in mind as you use IP pools:
For more information, seeSendGrid’s IP pools documentation.
Using Journeys, you can create multi-channel customer engagement with both email and SMS campaigns. Having published an email, learn howEngage SMS campaignscan help you market to customers through text messages.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Email Campaigns
How Engage campaigns work
Create a Journey
Add a Journey condition
Create, test, and publish your email campaign
Send an email to all users
Test your email campaign
Publish your email campaign
Email campaign fields
Working with IP pools
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/sms-campaigns/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
With Twilio Engage, you can send email and SMS campaigns to users who have opted in to receive your marketing materials. On this page, you’ll learn how to create and send an SMS campaign.
Some knowledge of the Journeys product will benefit you as you read through this guide. If you’re new to Journeys, theJourneys documentationwill bring you up to speed.
Twilio Engage uses Journeys to send email and SMS campaigns.  With Journeys, you add conditions and steps that trigger actions like sending an email or an SMS.
You’ll build and then send your campaign in three stages:
Because Engage campaigns exist within Journeys, begin by creating a Journey:
With your Journey created, you’ll now create aconditionthat will trigger your SMS campaign:
With your entry condition added, you’re now ready to create your SMS campaign.
Follow these steps to create an SMS campaign:
Unsubscribe options are required by law.  Your SMS campaign must contain “Reply STOP to unsubscribe.”
At this point, you can send a test SMS before publishing your campaign. Testing the SMS confirms that your content and merge tags appear as expected.
As part of your test send, you can enter custom values to populate the profile traits in your SMS message.
Follow these steps to test your campaign:
With your SMS created and tested, you’re now ready to save the campaign and publish your Journey with the following steps:
Your SMS campaign is now live. Users who trigger the SMS step’s parent Journey condition will receive your SMS campaign.
The following table contains descriptions of the three fields in the Journeys Send SMS builder.  All SMS fields are required.
Using Journeys, you can create multi-channel customer engagement with both email and SMS campaigns.  Having published an SMS, learn howEngage email campaignscan help you market to customers through email.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
SMS Campaigns
How Engage campaigns work
Create a Journey
Add a Journey condition
Create, test, and publish your SMS campaign
Test your SMS campaign
Publish your SMS campaign
SMS campaign fields
Next steps
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/broadcasts/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. Segment recommends exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Broadcasts are one-time email or SMS campaigns that you can send with Twilio Engage. Use broadcasts for single, one-off occasions like the following:
For more on the different types of Engage campaigns, readAudiences, Journeys, and Broadcasts.
On this page, you’ll find step by step instructions for how to create a broadcast, as well as information on broadcast best practices and analytics.
Follow these steps to create an email broadcast:
Segment recommends sending email broadcasts to users with asubscribedstatus. However, if you need to send an email broadcast to someone who hasn’t subscribed, you can configure an email tosend to all users.
Blind carbon copy
Broadcasts doesn’t support BCC (blind carbon copy). If your use case requires BCC,contact Segment.
Follow these steps to create an email broadcast:
Follow these steps to cancel a scheduled broadcast:
Unscheduled broadcasts revert to draft status and can be found under the Drafts tab of the Broadcasts page.
Keep the following information in mind as you work with broadcasts.
SMS broadcasts longer than 160 characters are split into segments and then joined together by the recipient’s device. As a result, you can send SMS broadcasts longer than 160 characters, but each 160-character segment is billed individually.
For more on message segments, viewSMS character limits.
The total size of your email, including attachments, must be less than 30MB.
To learn more, view SendGrid’semail limits.
The following table lists geographic availability, scale, and speed details for email and SMS broadcasts:
Long-code message throughput depends on a number of factors, including your10DLC trust score.
Segment recommends that you use short code phone numbers for SMS broadcasts sent to more than 5000 recipients.
Segment provides analytics for each broadcast. By selecting a sent broadcast from the broadcasts list, you can view both high-level performance metrics and granular insights on what actions individual recipients have taken on the Broadcast campaign.
Engage powers analytics for both email and SMS broadcasts. For more information on Engage analytics, viewAnalytics Overview.
To view information for a sent broadcast, navigate toEngage > Broadcasts, and select a broadcast from the broadcasts list.
The content tab shows the message content and email or SMS settings that you configured for the broadcast.
Segment maintains a recipients list for broadcasts. The recipients list lets you filter through several analytics statuses. Selecting an individual profile from the recipients list opens a preview pane with that profile’s details.
The settings tab shows your broadcast’s setup info, the recipient audience and its subscription status, as well as the broadcast’s scheduled time.
On the settings tab, you can also find the broadcast’s campaign key, which you can use to reference the broadcast. For example, you can use the campaign key to create an audience for future targeting or to create a suppression list of recipients you don’t want to receive future broadcasts.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Broadcasts
Create and send an email broadcast
Create and send an SMS broadcast
Cancel a scheduled broadcast
Working with broadcasts
SMS segments
Email template limits
Scale and throughput
Broadcast analytics
Review sent broadcasts
Content tab
Recipients tab
Settings tab
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/whatsapp-campaigns/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
Twilio Engage uses Journeys to send WhatsApp, email, and SMS campaigns.  With Journeys, you add conditions and steps that trigger actions like sending a WhatsApp message.
You’ll build and send your WhatsApp campaign in three stages:
WhatsApp Templates
To send a WhatsApp campaign, you’ll first need an approved WhatsApp template. For instructions on building a template, viewWhatsApp Templates.
Because Engage campaigns exist within Journeys, begin by creating a Journey:
Segment then opens the Journey Builder.
With your Journey created, you’ll now set a condition to trigger your WhatsApp campaign:
With your entry condition added, you’re ready to add an approved WhatsApp template to build a campaign.
Your Journey and WhatsApp campaign are now live. Users who trigger the WhatsApp step’s parent Journey condition will receive your SMS campaign.
WhatsApp limits the number of unique recipients that can receive your campaigns. If your Meta Business Account isn’t verified, you’ll begin with a messaging limit of 250 unique recipients every 24 hours.
Once your Meta Business Account is verified, the number of unique recipients increases, depending on your messaging limit tier. For more information, view Meta’smessaging limits documentation.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
WhatsApp Campaigns
How Engage campaigns work
Create a Journey
Add a Journey condition
Add a WhatsApp step and publish your Journey
Messaging limits
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/mobile-push/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
This page walks you through the process of setting up mobile push notifications using Segment, Twilio, and Firebase/Apple Developer.
Prerequisites
Please reach out to your CSM or AE prior to trying out this feature.
This guide assumes familiarity with Swift and Kotlin and is intended for a developer audience.
You’ll set up mobile push in four stages:
Before you can send mobile pushes, you’ll need to set up analytics. In this step, you’ll integrate Segment’s mobile SDK into your app.
This section outlines the process for adding Segment’s base SDK to your app, including the Analytics Kotlin, Analytics-Swift, and React Native libraries.
You must initialize your Analytics instance in the Application class, otherwise you may experience issues with customization and delivery confirmation.
Follow these steps to integrate Analytics Kotlin:
For detailed instructions on integrating Analytics Kotlin, follow the steps in theAnalytics Kotlin getting started section.
Follow these steps to integrate Analytics-Swift for iOS & Apple:
For detailed instructions on integrating Analytics-Swift, follow the steps in theAnalytics-Swift getting started section.
Follow these steps to integrate the React Native library:
For detailed instructions on integrating Analytics for React Native, follow the steps in theAnalytics for React Native getting started section.
Next, you’ll add the Engage SDK plugins for both iOS and Android to your application.
Now that you’ve integrated Analytics-Swift, follow the steps in this section to add the Engage Plugin for iOS.
You can add the Engage SDK plugin using either Xcode orPackage.swift.
Instructions for adding the plugin with Xcode
In the Swift packages search dialog, enter the following URL:
Instructions for adding the plugin withPackage.swift
Import the plugin in the file where you configure your Analytics instance:
After your Analytics-Swift library setup, callanalytics.add(plugin: ...)to add an instance of the plugin to the Analytics timeline:
To start receiving and handling mobile push notifications, add or modify the following methods in yourAppDelegate:
The previous steps are required. For configuration options, including subscription statuses and media handling, visit thegetting started sectionof Segment’s Twilio Engage Plugin documentation on GitHub.
Now that you’ve integrated Analytics-Kotlin, follow these steps to add the Engage Plugin for Android:
Add the following to your Gradle dependencies:
Add the following service to theapplicationtag of yourAndroidManifest.xmlfile:
Add this plugin to your Analytics instance:
The previous steps are required. For configuration options, including subscription statuses and customized actions, visit thegetting started sectionof Segment’s Twilio Engage Destination documentation on GitHub.
Next, you’ll configure your iOS and Android push credentials for use with Twilio Notify and Twilio Notifications.
Before you begin, log into yourApple development accountand click onIdentifiersunder theCertificates, Identifiers & Profilessection. This will show a list of identifiers, including App IDs.
Next, you’ll create a push notification certificate, which lets your app receive notifications. You can either make a development certificate or a production certificate. This guide explains how to make a development certificate. Segment recommends that you use Xcode managed certificates.
Segment recommends that you use Xcode managed certificates for your application. If you prefer to create your certificate manually, follow these steps:
You just created an Apple Development iOS Push Services certificate, which you can now download and double-click to add to your Mac’s keychain.
You’ll extract your certificate key and private key from this file — you need these two keys to create a Twilio credential. First, run this command in Terminal:
cert.pemis your certificate key file. Next, run the following command in the terminal:
key.pemis your private key file. Next, run this command to process this key:
You can now paste your credentials into the modal found in the Twilio Console. Make sure that you strip anythingoutsideof the-----BEGIN CERTIFICATE-----and-----END CERTIFICATE-----boundaries and outside of the-----BEGIN RSA PRIVATE KEY-----and-----END RSA PRIVATE KEY-----boundaries before pasting your credentials. Check theSandboxbutton if you made a development certificate. Sandbox is synonymous with development mode.
Once you save a credential, theCERTIFICATEandPRIVATE KEYfields are hidden for security reasons.
After you’ve pasted your credentials, clickSave. You should see an SID appear on the new page; copy it to your clipboard, as you’ll need it in the next step.
Twilio lets you build multiple applications within a single account. To separate those applications, you need to create Service instances that hold all the data and configuration for a given application.
To do so, you’ll need to configure your Service instance to use the Credential that contains your APNS certificate and private key. You can do that using the Services page in the Console. You’ll need to update your Service with the Twilio Push Credential SID.
If you’re just getting started, set up the APN credential first, then create your Service by clicking the blue plus button on theServices Consolepage.
Follow the steps in Twilio’sConfiguring Android Push Notifications.
During Step 5,Upload your API Key to Twilio, follow these steps:
With your server key copied, finish steps 5 and 6 in the Twilio documentation.
Follow these steps to set up mobile push in Twilio Engage.
Follow the steps in 5a only if you’re new to Twilio Engage Premier. If you’ve alreadyconfigured messaging servicesas part of Twilio Engage Premier onboarding, you can skip to 5b.
Removing messaging services
To remove a messaging service, navigate to Engage > Engage settings > Channels and click the pencil icon underTwilio messaging service. Enter the account credentials by either using the API key secret or creating a new API key. Once you’ve selected the desired services, they will override the existing ones, effectively removing the ones you no longer need.
Complete mobile push onboarding by creating a new push service:
Now that you’ve completed mobile push setup, you’re ready tobuild a mobile push template.
This page was last modified: 13 Aug 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.

Headings:
Mobile Push Onboarding
Overview
1. Set up analytics for mobile push
Add the Segment base SDK
Kotlin
Swift
React Native
2. Add the Engage SDK plugin
Instructions for iOS
2a. Add the Engage SDK plugin dependency
2b. Import the plugin
Instructions for Android
3. Configure iOS push notifications
3a. Set up an App ID
Option 1: Use an existing App ID
Option 2: Create a new App ID
3b. Create a certificate
Option 1: Use an Xcode managed certificate
Option 2: Manually create a certificate
3c. Create a credential for Twilio
3d. Configure your Twilio Service to use your APNS credentials
4. Configure Android push notifications
5. Configure mobile push in Engage
5a. Set up Twilio credentials
5b. Create a new push service
Build a mobile push template
Need support?
Help improve these docs!
Was this page helpful?
Get started with Segment
Crawling: https://segment.com/docs/engage/campaigns/mobile-push/push-campaigns/
Paragraphs:
Engage Premier requires a Business tier account and includes Engage Foundations and Unify.See theavailable plans, orcontact Support.
On this page
Engage Premier entered an End of Sale (EOS) period effective  June 10, 2024. Existing Segment customers will continue to have access and support to Engage Premier until an end-of-life (EOL) date is announced. We recommend exploring the following pages in preparation of a migration or future MCM needs:
Twilio Marketing Campaigns
Preferred ISV Partners:
Airship BlogBloomreach BlogBraze BlogInsider BlogKlaviyo BlogTwilio Engage Foundations Documentation
With Twilio Engage, you can send campaigns to users who have opted in to receive your marketing materials. On this page, you’ll learn how to create and send a mobile push campaign.
Some knowledge of the Journeys product will benefit you as you read through this guide. If you’re new to Journeys, theJourneys documentationwill bring you up to speed.
Twilio Engage uses Journeys to send campaigns.  With Journeys, you add conditions and steps that trigger actions like sending an email, an SMS, or a mobile push.
You’ll build and then send your campaign in three stages:
Because Engage campaigns exist within Journeys, begin by creating a journey:
With your Journey created, you’ll now create aconditionthat will trigger your campaign:
With your entry condition added, you’re now ready to create your mobile push campaign.
Follow these steps to create a mobile push campaign:
Your mobile push campaign is now live. Users who trigger the mobile push step’s parent Journey condition will receive your campaign.
Push tokens
Push tokens are unique identifiers Segment associates with each profile. For mobile push, you’ll need to configure identity resolution settings for the push tokensios.push_tokenandandroid.push_token. Using the Profile explorer, you can find a profile’s push tokens by opening a profile and then selecting the Identities tab. You can only send mobile pushes to profiles with push tokens enabled.
Follow these steps to test your mobile push:
Segment verifies that the profile you’re sending a test to has a push token, then sends the test. If the test mobile push doesn’t work as expected, confirm that the profile you’re sending to has a push token.
This page was last modified: 15 Jul 2024
Questions? Problems? Need more info? Contact Segment Support for assistance!
Thanks for your feedback!
Can we improve this doc?Send us feedback!
On this page
Was this page helpful?
Thanks for your feedback!
Can we improvethis doc?Send us feedback!
Product
For Developers
Company
Support
© 2025 Segment.io, Inc.